/*!*  filename: sf-chat-ui.min.js 
*     version : 31.2.12 
*     Copyright Syncfusion Inc. 2001 - 2025. All rights reserved. 
*     Use of this code is subject to the terms of our license.
*     A copy of the current license can be obtained at any time by e-mailing 
*     licensing@syncfusion.com. Any infringement will be prosecuted under 
*     applicable laws. 
*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./bundles/sf-chat-ui.js":function(e,t,n){"use strict";n.r(t);n("./modules/sf-chat-ui.js")},"./modules/sf-chat-ui.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ChatUI=function(){"use strict";var e=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))},t=function(e,t){var n,o,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},n=function(){function n(e){var t=this;window.sfBlazor=window.sfBlazor,this.isScrollbarNeeded=!1,this.undoStack=[],this.redoStack=[],this.undoDebounceTimer=null,this.handleResize=function(){t.updateTextAreaObj()},this.dataId=e.dataId,this.updateContext(e),window.sfBlazor.setCompInstance(this),this.textAreaID=e.textAreaID,this.textAreaElement=this.element.querySelector("#"+this.textAreaID),this.messageWrapper=this.element.querySelector(".e-message-wrapper"),this.bindEvent(),this.updateTextAreaObj()}return n.prototype.updateContext=function(e){sf.base.extend(this,this,e)},n.prototype.bindEvent=function(){this.addTextAreaEventHandler(),sf.base.EventHandler.add(window,"resize",this.handleResize,this)},n.prototype.updateTextAreaEle=function(){this.textAreaElement=null},n.prototype.addTextAreaEventHandler=function(){sf.base.isNullOrUndefined(this.textAreaElement)||(sf.base.EventHandler.add(this.textAreaElement,"keydown",this.keyActionHandler.bind(this),this),sf.base.EventHandler.add(this.textAreaElement,"paste",this.handlePaste.bind(this),this))},n.prototype.handleMessageMouseEvents=function(e,t){var n=this.messageWrapper.querySelector("#"+e);if(n){var o=n.querySelector(".e-chat-message-toolbar");o&&(t?this.handleMouseOver(n,o):o.classList.remove("e-show"))}},n.prototype.handleMouseOver=function(e,t){this.hideMessageToolbar();var n=e.parentElement.classList.contains("e-left");t.style.visibility="hidden",t.style.display="block";var o=t.getBoundingClientRect();t.style.visibility="",t.style.display="none";var r=this.messageTemplate?e:n?e.querySelector(".e-message-content"):e.querySelector(".e-status-wrapper"),s=e.getBoundingClientRect(),i=r.getBoundingClientRect(),a=i.top-s.top-o.height;n||(a+=4);var l=this.messageWrapper.getBoundingClientRect();if(i.top-l.top<o.height&&(a=i.bottom-s.top),t.style.top=a+"px",i.width<o.width&&n)t.style.left="0",t.style.right="auto";else{var c=r.querySelector(".e-status-icon"),u=c?c.getBoundingClientRect().width+2:0,d=s.right-i.right+u;t.style.right=d+"px"}t.style.display="",t.classList.add("e-show")},n.prototype.hideMessageToolbar=function(){this.messageWrapper.querySelectorAll(".e-chat-message-toolbar.e-show").forEach((function(e){e.classList.remove("e-show")}))},n.prototype.detachTextAreaEventHandler=function(){sf.base.isNullOrUndefined(this.textAreaElement)||(sf.base.EventHandler.remove(this.textAreaElement,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(this.textAreaElement,"paste",this.handlePaste))},n.prototype.unBindEvent=function(){this.detachTextAreaEventHandler(),sf.base.EventHandler.remove(window,"resize",this.handleResize)},n.prototype.keyActionHandler=function(n){return e(this,void 0,void 0,(function(){var e,o,r;return t(this,(function(t){switch(t.label){case 0:return e=(n.ctrlKey||n.metaKey)&&"z"===n.key&&!n.shiftKey,o=(n.ctrlKey||n.metaKey)&&("y"===n.key||"z"===n.key&&n.shiftKey),"Enter"!==n.key||n.shiftKey?[3,1]:(this.pushToUndoStack(this.textAreaElement.innerText),n.preventDefault(),[3,5]);case 1:return e?(n.preventDefault(),this.undo(),[4,this.updateTextAreaObj()]):[3,3];case 2:return r=t.sent(),this.dotNetRef.invokeMethodAsync("FooterClassesHandler",r,!0),[3,5];case 3:return o?(n.preventDefault(),this.redo(),[4,this.updateTextAreaObj()]):[3,5];case 4:r=t.sent(),this.dotNetRef.invokeMethodAsync("FooterClassesHandler",r,!0),t.label=5;case 5:return[2]}}))}))},n.prototype.updateTextAreaObj=function(e){var t=this;return void 0===e&&(e=!1),new Promise((function(n){if(sf.base.isNullOrUndefined(t.textAreaElement))return n(!1);setTimeout((function(){var o=t.textAreaElement;o.style.height="auto";var r=t.element.querySelector(".e-footer");r.classList.remove("expanded");var s=o.scrollHeight>parseInt(getComputedStyle(o).minHeight,10);if(r.classList[s?"add":"remove"]("expanded"),t.dotNetRef.invokeMethodAsync("FooterClassesHandler",s,!0),o.style.height=o.scrollHeight+"px",t.isScrollbarNeeded=o.scrollHeight>280,e){var i=t.textAreaElement.parentElement.classList;i.toggle("show-scrollbar",t.isScrollbarNeeded),i.toggle("hide-scrollbar",!t.isScrollbarNeeded)}n(s)}),e?20:0)}))},n.prototype.removeBRTag=function(){""===this.textAreaElement.innerText.trim()&&("<br>"!==this.textAreaElement.innerHTML&&""!==this.textAreaElement.innerHTML.trim()||(this.textAreaElement.innerHTML=""))},n.prototype.emptyFooterValue=function(){this.textAreaElement&&(this.textAreaElement.innerText="")},n.prototype.getFooterValue=function(e){var t="";return this.textAreaElement=this.textAreaElement?this.textAreaElement:this.element.querySelector("#"+this.textAreaID),this.textAreaElement&&(this.removeBRTag(),this.textAreaElement.innerText.trim().length>0&&(t=this.textAreaElement.innerHTML),e&&this.handleInputRedoChanges()),t},n.prototype.handlePaste=function(n){return e(this,void 0,void 0,(function(){var e,o,r,s,i,a;return t(this,(function(t){return n.preventDefault(),e=n.clipboardData.getData("text/plain")||"",(o=window.getSelection())&&0!==o.rangeCount?((r=o.getRangeAt(0)).deleteContents(),s=e.split(/\r?\n/),i=document.createDocumentFragment(),s.forEach((function(e,t){e&&i.appendChild(document.createTextNode(e)),t<s.length-1&&i.appendChild(document.createElement("br"))})),r.insertNode(i),this.setFocusAtEnd(),this.redoStack=[],a=new CustomEvent("input",{bubbles:!0,cancelable:!0,detail:{inputType:"insertFromPaste",data:this.textAreaElement.innerHTML,isComposing:!1}}),this.textAreaElement.dispatchEvent(a),this.pushToUndoStack(this.textAreaElement.innerHTML),this.updateScroll(this.textAreaElement),[2]):[2]}))}))},n.prototype.pushToUndoStack=function(e){0!==this.undoStack.length&&this.undoStack[this.undoStack.length-1]===e||(this.undoStack.push(e),this.undoStack.length>100&&this.undoStack.shift())},n.prototype.undo=function(){if(!(this.undoStack.length<=1)){var e=this.undoStack.pop(),t=this.undoStack[this.undoStack.length-1];this.redoStack.push(e),this.textAreaElement.innerHTML=t,this.setFocusAtEnd()}},n.prototype.redo=function(){if(0!==this.redoStack.length){var e=this.redoStack.pop();this.undoStack.push(e),this.textAreaElement.innerHTML=e,this.setFocusAtEnd()}},n.prototype.handleInputRedoChanges=function(){this.scheduleUndoPush(this.textAreaElement.innerHTML),this.redoStack=[]},n.prototype.scheduleUndoPush=function(e){var t=this;this.undoDebounceTimer&&clearTimeout(this.undoDebounceTimer),this.undoDebounceTimer=setTimeout((function(){t.pushToUndoStack(e),t.undoDebounceTimer=null}),400)},n.prototype.updateScroll=function(e){e.scrollTo(0,e.scrollHeight)},n.prototype.setFocusAtEnd=function(){if(this.textAreaElement){var e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.textAreaElement),e.collapse(!1),t&&(t.removeAllRanges(),t.addRange(e))}},n.prototype.getScrollHeight=function(){return this.messageWrapper&&this.messageWrapper.scrollHeight>this.messageWrapper.clientHeight?this.messageWrapper.scrollTop:-1},n.prototype.updateScrollPosition=function(e){var t=this;setTimeout((function(){t.messageWrapper&&(t.messageWrapper.scrollTop=t.messageWrapper.scrollHeight-e)}),20)},n.prototype.scrollToMessage=function(e){if(this.messageWrapper){var t=this.messageWrapper.querySelector("#"+e);if(!t)return;t.scrollIntoView({behavior:"smooth",block:"start"})}},n.prototype.handleCopySupport=function(e){this.getClipBoardContent(e)},n.prototype.getClipBoardContent=function(e){var t=document.createElement("div");t.innerHTML=e,t.style.top="0",t.style.left="0",t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([t.innerHTML],{type:"text/html"}),"text/plain":new Blob([t.innerText],{type:"text/plain"})})]),document.body.removeChild(t)},n.prototype.getScrollPosition=function(){return this.messageWrapper.scrollHeight-this.messageWrapper.scrollTop},n.prototype.isMentionPopupOpen=function(){var e=document.querySelector(".e-chat-mention.e-mention");return e&&e.classList.contains("e-popup-open")},n.prototype.scrollToBottom=function(){var e=this;setTimeout((function(){e.messageWrapper&&e.messageWrapper.scrollTo(0,e.messageWrapper.scrollHeight)}),100)},n.prototype.checkBottom=function(){return this.messageWrapper.scrollHeight-this.messageWrapper.scrollTop<=this.messageWrapper.clientHeight+5},n.prototype.getViewportHeight=function(){return parseInt(window.innerHeight.toString(),10)},n.prototype.destroy=function(){this.unBindEvent(),window.sfBlazor.disposeWindowsInstance(this.dataId)},n}();return{initialize:function(e){e.dataId&&new n(e)},updateScrollPosition:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).updateScrollPosition(e.scrollPosition)},scrollToMessage:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).scrollToMessage(e.messageId)},activateScrollToBottom:function(e){e&&window.sfBlazor.getCompInstance(e).scrollToBottom()},getScrollPosition:function(e){return e?window.sfBlazor.getCompInstance(e).getScrollPosition():-1},getScrollHeight:function(e){return e?window.sfBlazor.getCompInstance(e).getScrollHeight():-1},checkBottom:function(e){return!!e&&window.sfBlazor.getCompInstance(e).checkBottom()},getViewportHeight:function(e){return e?window.sfBlazor.getCompInstance(e).getViewportHeight():0},setFocus:function(e){e&&window.sfBlazor.getCompInstance(e).setFocusAtEnd()},emptyFooterValue:function(e){e&&window.sfBlazor.getCompInstance(e).emptyFooterValue()},getFooterValue:function(e){var t="";return e.dataId&&(t=window.sfBlazor.getCompInstance(e.dataId).getFooterValue(e.isInput)),t},isMentionPopupOpen:function(e){var t=!1;return e&&(t=window.sfBlazor.getCompInstance(e).isMentionPopupOpen()),t},updateTextArea:function(n){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return n?[4,window.sfBlazor.getCompInstance(n).updateTextAreaObj(!0)]:[3,2];case 1:return e.sent(),[2,window.sfBlazor.getCompInstance(n).isScrollbarNeeded];case 2:return[2,!1]}}))}))},handleCopySupport:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).handleCopySupport(e.textToCopy)},handleMessageMouseEvents:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).handleMessageMouseEvents(e.messageItemID,e.isMouseOver)},hideMessageToolbar:function(e){e&&window.sfBlazor.getCompInstance(e).hideMessageToolbar()},updateTextAreaEle:function(e){e&&window.sfBlazor.getCompInstance(e).updateTextAreaEle()},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroy()}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js`).then(()=>{sfBlazor.loadDependencies('sfchatui');})})();