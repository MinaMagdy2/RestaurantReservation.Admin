/*!*  filename: sf-querybuilder.min.js 
*     version : 31.2.12 
*     Copyright Syncfusion Inc. 2001 - 2025. All rights reserved. 
*     Use of this code is subject to the terms of our license.
*     A copy of the current license can be obtained at any time by e-mailing 
*     licensing@syncfusion.com. Any infringement will be prosecuted under 
*     applicable laws. 
*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"./bundles/sf-querybuilder.js":function(e,t,r){"use strict";r.r(t);r("./modules/sf-querybuilder.js")},"./modules/sf-querybuilder.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.QueryBuilder=function(){"use strict";var e=function(){function e(e,t,r){this.element=t,this.dataId=e,this.dotnetRef=r,this.element.blazor__instance=this,this.initializeDraggable(),sf.base.EventHandler.add(document,"keydown",this.keyBoardHandler,this)}return e.prototype.initializeDraggable=function(){this.draggable=new sf.base.Draggable(this.element,{dragTarget:".e-drag-qb-rule",distance:5,helper:this.helper.bind(this),dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),isReplaceDragEle:!0,isPreventSelect:!1,abort:".e-parent-header",isDragScroll:!0})},e.prototype.helper=function(e){var t=this.draggable.currentStateTarget;if(!t.classList.contains("e-drag-qb-rule")||t.classList.contains("e-drag-qb-rule")&&sf.base.closest(t,".e-disable"))return!1;var r,s=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-query-builder e-dragclone",styles:'height:"auto", z-index:2, width:'+this.element.offsetWidth});if(this.draggable.currentStateTarget.parentElement.classList.contains("e-group-header"))r=sf.base.closest(t,".e-group-container").cloneNode(!0),sf.base.closest(t,".e-group-container").classList.add("e-qb-dragging-rule");else{s.classList.add("e-group-body"),r=sf.base.createElement("div",{className:"e-rule-container"});var a=sf.base.closest(t,".e-rule-field").cloneNode(!0);r.appendChild(a),sf.base.closest(t,".e-rule-field").classList.add("e-qb-dragging-rule")}return s.appendChild(r),s.querySelectorAll("*").forEach((function(e){e.removeAttribute("id")})),this.element.appendChild(s),s},e.prototype.dragStart=function(e){this.isPreventDrag=!1,this.draggedRule=e.target,document.body.classList.add("e-prevent-select"),this.dragElement=e.dragElement,e.bindEvents(e.dragElement);var t=sf.base.closest(e.target,".e-rule-container"),r=sf.base.closest(e.target,".e-group-container");this.dotnetRef.invokeMethodAsync("DragStartAsync",null!==t?t.id:r.id,r.id)},e.prototype.drag=function(e){var t=this.element.querySelectorAll(".e-drag-rule-bottom-line");if(t.forEach((function(e){e.classList.remove("e-drag-rule-bottom-line")})),(t=this.element.querySelectorAll(".e-drag-rule-top-line")).forEach((function(e){e.classList.remove("e-drag-rule-top-line")})),!sf.base.isNullOrUndefined(e.target))if("HTML"===e.target.nodeName||sf.base.closest(e.target,".e-qb-dragging-rule")||sf.base.closest(e.target,".e-group-header")||!sf.base.closest(e.target,"#"+this.element.id))this.dragElement.classList.add("e-notallowedcur");else{this.dragElement.classList.remove("e-notallowedcur");var r=sf.base.closest(e.target,".e-rule-container"),s=sf.base.closest(e.target,".e-group-container");if(r){var a=r.getBoundingClientRect(),n=(o=e.event.clientY||e.event.changedTouches[0].clientY)-a.top,i=a.bottom-o;n<(l=20)?r.classList.add("e-drag-rule-top-line"):i<l&&r.classList.add("e-drag-rule-bottom-line")}else if(e.target.classList.contains("e-rule-list")&&0===e.target.children.length)e.target.classList.add("e-drag-rule-bottom-line");else if(e.target.classList.contains("e-rule-list")&&e.target.children[0].classList.contains("e-group-container")){a=e.target.children[0].getBoundingClientRect();(n=(o=e.event.clientY||e.event.changedTouches[0].clientY)-a.top)<(l=20)&&e.target.classList.add("e-drag-rule-top-line")}else if((sf.base.closest(e.target,".e-group-container")||e.target.classList.contains("e-group-container"))&&(s||(s=e.target),s.id.indexOf("group0")>-1)){a=e.target.getBoundingClientRect();var l,o=e.event.clientY||e.event.changedTouches[0].clientY;(i=a.bottom-o)<(l=20)&&e.target.classList.add("e-drag-rule-bottom-line")}}},e.prototype.dragStop=function(e){if(!this.isPreventDrag){var t=sf.base.closest(e.target,".e-rule-container"),r=sf.base.closest(e.helper,".e-notallowedcur"),s=this.draggable.currentStateTarget.parentElement.classList.contains("e-rule-field");if(!r&&t){for(var a=sf.base.closest(this.draggable.currentStateTarget,".e-rule-container"),n=sf.base.closest(t,".e-group-container"),i=sf.base.closest(this.draggable.currentStateTarget,".e-group-container"),l=n.querySelectorAll(".e-rule-container"),o=void 0,c=0;c<l.length;c++)l[c].classList.contains("e-drag-rule-bottom-line")?o=n.id===i.id?c:c+1:l[c].classList.contains("e-drag-rule-top-line")&&-1===(o=n.id===i.id?c-1:c)&&(o=0);this.dotnetRef.invokeMethodAsync("DragEndAsync",s,s?a.id:i.id,t.id,o,!1,!1,!1)}else if(e.target.classList.contains("e-rule-list")&&0===e.target.children.length&&!r){a=sf.base.closest(this.draggable.currentStateTarget,".e-rule-container");s||(a=sf.base.closest(this.draggable.currentStateTarget,".e-group-container"));var d=sf.base.closest(e.target,".e-group-container");this.dotnetRef.invokeMethodAsync("DragEndAsync",s,a.id,d.id,0,!0,!1,!1)}else if(e.target.classList.contains("e-rule-list")&&e.target.children[0].classList.contains("e-group-container")&&!r){a=sf.base.closest(this.draggable.currentStateTarget,".e-rule-container");s||(a=sf.base.closest(this.draggable.currentStateTarget,".e-group-container"));d=sf.base.closest(e.target,".e-group-container");this.dotnetRef.invokeMethodAsync("DragEndAsync",s,a.id,d.id,0,!1,!0,!1)}else if((sf.base.closest(e.target,".e-group-container")||e.target.classList.contains("e-group-container"))&&!r){var g=sf.base.closest(e.target,".e-group-container");if(!g&&e.target.classList.contains("e-group-container")&&(g=e.target),"group0"===g.id.split("_")[1]){a=sf.base.closest(this.draggable.currentStateTarget,".e-rule-container");s||(a=sf.base.closest(this.draggable.currentStateTarget,".e-group-container")),this.dotnetRef.invokeMethodAsync("DragEndAsync",s,a.id,g.id,0,!1,!1,!0)}}document.body.classList.remove("e-prevent-select");var u=this.element.querySelectorAll(".e-drag-rule-bottom-line");u.forEach((function(e){e.classList.remove("e-drag-rule-bottom-line")})),(u=this.element.querySelectorAll(".e-drag-rule-top-line")).forEach((function(e){e.classList.remove("e-drag-rule-top-line")})),(u=this.element.querySelectorAll(".e-qb-dragging-rule")).forEach((function(e){e.classList.remove("e-qb-dragging-rule")})),e.helper.classList.contains("e-cloneproperties")&&document.querySelector("."+e.helper.classList[0])&&sf.base.remove(e.helper)}},e.prototype.keyBoardHandler=function(e){if("Escape"===e.code){this.isPreventDrag=!0,document.body.classList.remove("e-prevent-select");var t=this.element.querySelectorAll(".e-drag-rule-bottom-line");t.forEach((function(e){e.classList.remove("e-drag-rule-bottom-line")})),(t=this.element.querySelectorAll(".e-drag-rule-top-line")).forEach((function(e){e.classList.remove("e-drag-rule-top-line")})),(t=this.element.querySelectorAll(".e-qb-dragging-rule")).forEach((function(e){e.classList.remove("e-qb-dragging-rule")}));var r=this.element.querySelector(".e-cloneproperties");r&&sf.base.remove(r)}},e}();return{initialize:function(t,r,s){sf.base.isNullOrUndefined(r)||new e(t,r,s)},destroy:function(e){sf.base.isNullOrUndefined(e)||sf.base.EventHandler.remove(document,"keydown",this.keyBoardHandler)}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js`).then(()=>{sfBlazor.loadDependencies('sfquerybuilder');})})();