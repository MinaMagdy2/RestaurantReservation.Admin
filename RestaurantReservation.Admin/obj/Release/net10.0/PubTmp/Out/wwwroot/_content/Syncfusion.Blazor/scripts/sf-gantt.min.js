/*!*  filename: sf-gantt.min.js 
*     version : 31.2.12 
*     Copyright Syncfusion Inc. 2001 - 2025. All rights reserved. 
*     Use of this code is subject to the terms of our license.
*     A copy of the current license can be obtained at any time by e-mailing 
*     licensing@syncfusion.com. Any infringement will be prosecuted under 
*     applicable laws. 
*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"./bundles/sf-gantt.js":function(e,t,i){"use strict";i.r(t);i("./modules/sf-gantt.js")},"./modules/sf-gantt.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Gantt=function(){"use strict";var e=function(){function e(e,t){this.previousCount=-1,this.timelineScrollLeft=0,this.initialDistance=null,this.lastTouchMove=0,this.throttleTimeout=300,this.parent=e,this.chartRootElement=t.querySelector(".e-chart-root-container"),this.chartElement=t.querySelector(".e-gantt-chart-pane"),this.element=t.querySelector(".e-chart-scroll-container"),this.timelineHeaderElement=t.querySelector(".e-timeline-header-container"),this.chartVirtualTable=this.element.querySelector(".e-virtualtable"),this.timelineVirtualTrack=this.timelineHeaderElement.querySelector(".e-virtualtrack"),this.dependencyViewContainer=t.querySelector(".e-gantt-dependency-view-container"),this.holidayContainer=t.querySelector(".e-holiday-container"),this.addEventListeners(),this.ChartHeight(t,this.chartRootElement)}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.element,"scroll",this.onScroll,this),sf.base.EventHandler.add(this.chartElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"wheel",this.onWheelScroll,this),sf.base.EventHandler.add(this.element,"touchstart",this.handleTouchStart,this),sf.base.EventHandler.add(this.element,"touchmove",this.handleTouchMove,this),sf.base.EventHandler.add(this.element,"touchend",this.handleTouchEnd,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane"),i=e.element.querySelector(".e-chart-scroll-container");sf.base.EventHandler.remove(i,"scroll",this.onScroll),sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.mouseDownHandler),sf.base.EventHandler.remove(i,"wheel",this.onWheelScroll),sf.base.EventHandler.remove(i,"touchstart",this.handleTouchStart),sf.base.EventHandler.remove(i,"touchmove",this.handleTouchMove),sf.base.EventHandler.remove(i,"touchend",this.handleTouchEnd)},e.prototype.gridScrollHandler=function(e){this.element.scrollTop=e,this.parent.isFromTreeGrid=!0},e.prototype.showHideSpinner=function(e){var t=this.parent;e&&!this.parent.spinnerShown?(this.parent.dotNetRef.invokeMethodAsync("ShowSpinner"),this.parent.spinnerShown=!0):!e&&this.parent.spinnerShown&&(t.dotNetRef.invokeMethodAsync("HideSpinner"),t.spinnerShown=!1)},e.prototype.getTimelineLeft=function(){var e=this.parent.element,t=this.timelineVirtualTrack.offsetWidth-3*e.offsetWidth;return Math.abs(this.timelineScrollLeft)===t?Math.abs(this.timelineScrollLeft):Math.abs(this.timelineScrollLeft)>e.offsetWidth?Math.abs(this.timelineScrollLeft)-e.offsetWidth:0},e.prototype.updateSpinner=function(e){var t,i=this;this.showHideSpinner(!0),window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout((function(){e&&(i.calculateScrollLeft(),t=i.getTimelineLeft(),i.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",t,i.parent.element.offsetWidth).then((function(){i.updateChartElementStyle()}))),i.element.querySelector(".e-chart-rows-container").style.visibility="visible",i.showHideSpinner(!1),window.clearTimeout(i.isScrolling)}),1e3)},e.prototype.getTopPosition=function(){var e=this.element.querySelector(".e-virtualtable"),t=e.style.transform.split(","),i=t.length>1?t[1].trim().split(")")[0]:e.style.transform.substring(e.style.transform.lastIndexOf("(")+1,e.style.transform.lastIndexOf(")"));return parseFloat(i)},e.prototype.getContentHeight=function(){var e=this.element.scrollHeight,t=this.chartElement.offsetHeight;return t<e?t:e},e.prototype.updateTopPosition=function(){var e,t=this.parent.treeGridElement.querySelector(".e-content"),i=this.parent.chartScrollModule.getContentHeight(),s=t.scrollTop;this.parent.chartScrollModule&&this.parent.options.enableRowVirtualization?e=s-this.parent.chartScrollModule.getTopPosition():e=s;sf.base.isNullOrUndefined(this.holidayContainer)||(this.holidayContainer.style.height=i+"px",this.holidayContainer.style.top=e+"px")},e.prototype.updateScrollTopPosition=function(){var e=this.parent.treeGridElement.querySelector(".e-content");sf.base.isNullOrUndefined(e)||this.element.scrollTop===e.scrollTop||(this.element.scrollTop=e.scrollTop)},e.prototype.onScroll=function(){var e=this.parent;if(e.scrollbarUpdate=!0,this.element.scrollLeft!==this.parent.chartPreviousScroll.left&&(sf.base.isNullOrUndefined(this.parent.taskbarEditModule)||(this.parent.taskbarEditModule.LongPress=!1)),this.element.scrollTop!==e.chartPreviousScroll.top&&this.parent.options.enableRowVirtualization&&(this.element.scrollTop-e.chartPreviousScroll.top>40||e.chartPreviousScroll.top-this.element.scrollTop>40)&&this.updateSpinner(!1),this.element.scrollLeft!==this.parent.chartPreviousScroll.left){if(this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,e.options.enableTimelineVirtualization){var t=this.parent.chartPreviousScroll.left,i=this.element.scrollLeft;!this.parent.enableRTL&&(this.element.scrollLeft-this.parent.chartPreviousScroll.left>50||this.parent.chartPreviousScroll.left-this.element.scrollLeft>50)||this.parent.enableRTL&&(Math.abs(i)-Math.abs(t)>50||Math.abs(t)-Math.abs(i)>50)?(this.appendDummyTable(),this.updateSpinner(!0)):this.updateVirtualContent()}this.parent.chartPreviousScroll.left=this.element.scrollLeft}this.element.scrollTop!==this.parent.chartPreviousScroll.top&&(this.parent.isFromTreeGrid||this.parent.treeGridModule.updateScrollTop(this.element.scrollTop),this.parent.chartPreviousScroll.top=this.element.scrollTop,this.updateTopPosition(),this.parent.isFromTreeGrid=!1)},e.prototype.onWheelScroll=function(e){if(e.ctrlKey){e.preventDefault();var t=e.deltaY<0,i=Date.now();Math.abs(e.deltaY)<50?Math.abs(e.deltaY)>.5&&i-this.lastTouchMove>=this.throttleTimeout&&(this.lastTouchMove=i,this.parent.dotNetRef.invokeMethodAsync("PerformZooming",t)):this.parent.dotNetRef.invokeMethodAsync("PerformZooming",t)}},e.prototype.handleTouchStart=function(e){2===e.touches.length&&(this.initialDistance=this.getDistance(e.touches))},e.prototype.handleTouchMove=function(e){var t=Date.now();if("touchmove"===e.type&&2===e.touches.length&&null!=this.initialDistance&&t-this.lastTouchMove>=this.throttleTimeout){this.lastTouchMove=t;var i=this.getDistance(e.touches);Math.abs(i-this.initialDistance)>15&&(i!==this.initialDistance&&this.parent.dotNetRef.invokeMethodAsync("PerformZooming",i>this.initialDistance),this.initialDistance=i),e.preventDefault()}},e.prototype.handleTouchEnd=function(e){e.touches.length<2&&(this.initialDistance=null)},e.prototype.getDistance=function(e){var t=e[0].clientX-e[1].clientX,i=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+i*i)},e.prototype.updateContent=function(){var e=this;this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var t=this.parent.element,i=Math.round(this.timelineScrollLeft/(2*t.offsetWidth));if(this.previousCount!==i){this.calculateScrollLeft();var s=this.getTimelineLeft();this.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",s,t.offsetWidth).then((function(){e.updateChartElementStyle()}))}this.previousCount=i},e.prototype.updateVirtualContent=function(){this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var e=this.parent.element,t=Math.round(this.timelineScrollLeft/e.offsetWidth);this.previousCount!==t&&(this.appendDummyTable(),this.timelineScrollLeft+=this.parent.enableRTL?e.offsetWidth:-e.offsetWidth,this.updateSpinner(!0)),this.previousCount=t},e.prototype.updateChartElementStyle=function(){var e=this.getTimelineLeft(),t=3*this.parent.element.offsetWidth;if(this.timelineVirtualTrack.offsetWidth>t){var i=new DOMMatrixReadOnly(this.chartVirtualTable.style.transform).m42,s=this.parent.enableRTL?-e:e;this.chartVirtualTable.style.transform="translate("+s+"px,"+i+"px)";var n=this.parent.enableRTL?t+Math.abs(e):t+e,r=-e;sf.base.isNullOrUndefined(this.chartTaskTable)||(this.chartTaskTable.style.setProperty(this.parent.enableRTL?"right":"left",r+"px"),this.chartTaskTable.style.width=n+"px"),sf.base.isNullOrUndefined(this.dependencyViewContainer)||(this.dependencyViewContainer.style.left=-e+"px")}else this.timelineVirtualTrack.offsetWidth<t&&!sf.base.isNullOrUndefined(this.chartTaskTable)&&(this.chartTaskTable.style.width=this.timelineVirtualTrack.offsetWidth+"px")},e.prototype.calculateScrollLeft=function(){var e=this.parent.element,t=3*e.offsetWidth,i=this.timelineVirtualTrack.offsetWidth>t?this.timelineVirtualTrack.offsetWidth-t:t,s=Math.abs(this.timelineScrollLeft);this.timelineScrollLeft>=i?this.timelineScrollLeft=i:s>=i&&this.parent.enableRTL?this.timelineScrollLeft=-i:this.element.scrollLeft<this.parent.chartPreviousScroll.left&&!this.parent.enableRTL?this.timelineScrollLeft<=e.offsetWidth&&(this.timelineScrollLeft=0):this.timelineScrollLeft<0&&!this.parent.enableRTL&&(this.timelineScrollLeft=0)},e.prototype.appendDummyTable=function(){this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var e=this.timelineHeaderElement.querySelectorAll(".e-virtualtable");this.element.querySelector(".e-chart-rows-container").style.visibility="hidden",this.calculateScrollLeft();for(var t=this.getTimelineLeft(),i=this.parent.enableRTL?-t:t,s=0;s<e.length;s++){var n=e[parseInt(s.toString(),10)],r=new DOMMatrixReadOnly(n.style.transform).m42;n.style.transform="translate("+i+"px,"+r+"px)"}},e.prototype.mouseDownHandler=function(e){var t,i=e.target,s=!1,n=this.parent.getParentElement(i,"e-gantt-chart"),r=this.parent.getParentElement(i,"e-chart-row");if(t=this.getTaskbarLeft(e),null!=r&&(s=!!r.querySelector(".e-chart-empty-row")),null!=n){var a=null,o=null;if(this.parent.getParentElement(i,"e-timeline-header-container"))a="Header";else if(this.parent.getParentElement(i,"e-content")){if(!sf.base.isNullOrUndefined(e.target.classList)&&(e.target.classList.contains("e-connector-line")||e.target.classList.contains("e-rg-rangdiv")))return;a="Content",o=this.parent.getParentElement(i,"e-chart-row-cell")?this.parent.getParentElement(e.target,"e-chart-row-cell").getAttribute("data-uid"):null}"Header"!==a&&"Content"!==a||this.parent.dotNetRef.invokeMethodAsync("ChartMouseDownHandler",a,o,s,t)}},e.prototype.setScrollLeft=function(e,t){e=-1===t&&this.parent.enableRTL?-e:e,this.element.scrollLeft=e,this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,this.parent.chartPreviousScroll.left=this.element.scrollLeft},e.prototype.setScrollTop=function(e){this.element.scrollTop=e,this.parent.treeGrid.element.querySelector(".e-content").scrollTop=e},e.prototype.ChartHeight=function(e,t){this.toolbarElement=e.querySelector("#"+e.id+"_Gantt_Toolbar"),this.viewPortHeight=this.parent.height-this.parent.toolbarHeight-this.timelineHeaderElement.offsetHeight,t.style.height="calc(100% - "+this.timelineHeaderElement.offsetHeight+"px)"},e.prototype.getTaskbarLeft=function(e){var t,i,s;if(this.parent.enableRTL){var n=this.parent.element.getBoundingClientRect(),r=window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.clientLeft||document.body.clientLeft||0;t=n.left+r-a}else t=this.parent.getOffsetRect(this.parent.element).left;return this.parent.enableRTL?(i=Math.abs(t+this.chartElement.offsetWidth),s=Math.abs(("touchstart"===e.type?e.changedTouches[0].pageX:e.pageX)-i)):(i=t+this.chartElement.offsetLeft,s=("touchstart"===e.type?e.changedTouches[0].pageX:e.pageX)-i),this.parent.enableRTL?Math.abs(Math.abs(s)+Math.abs(this.parent.chartScrollModule.element.scrollLeft)):Math.abs(s)+this.parent.chartScrollModule.element.scrollLeft},e.prototype.destroy=function(e){this.removeEventListeners(e),e.chartScrollModule&&(e.chartScrollModule=null)},e}(),t=function(){function e(e,t){this.parent=e,this.content=t,this.treegridPane=this.parent.element.querySelector(".e-grid"),this.addEventListeners()}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.content,"scroll",this.scrollHandler,this),sf.base.EventHandler.add(this.treegridPane,sf.base.Browser.touchStartEvent,this.treeMouseDownHandler,this),sf.base.EventHandler.add(window,"resize",this.windowResize,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-content"),i=e.element.querySelector(".e-grid");sf.base.EventHandler.remove(i,sf.base.Browser.touchStartEvent,this.treeMouseDownHandler),sf.base.EventHandler.remove(t,"scroll",this.scrollHandler),sf.base.EventHandler.remove(window,"resize",this.windowResize)},e.prototype.scrollHandler=function(){this.content.scrollTop!==this.parent.treegridPreviousScroll.top&&this.parent.chartScrollModule.gridScrollHandler(this.content.scrollTop),this.parent.treegridPreviousScroll.top=this.content.scrollTop},e.prototype.treeMouseDownHandler=function(e){if(null!=this.parent.getParentElement(e.target,"e-grid")){var t=null,i=null,s=null;this.parent.getParentElement(e.target,"e-gridcontent")?(t="GridContent",i=this.parent.getParentElement(e.target,"e-row")?this.parent.getParentElement(e.target,"e-row").getAttribute("data-uid"):null):this.parent.getParentElement(e.target,"e-headercontent")&&(t="Header",s=!0),"Header"!==t&&"GridContent"!==t||this.parent.dotNetRef.invokeMethodAsync("TreeMouseDownHandler",t,i,s)}},e.prototype.windowResize=function(){if(sf.base.Browser.isDevice&&this.parent.dotNetRef.invokeMethodAsync("WindowResize"),this.parent.options.enableTimelineVirtualization){var e=this.parent.chartScrollModule.timelineHeaderElement;e&&(e.style.width=this.parent.chartScrollModule.element.offsetWidth-this.parent.scrollWidth+"px"),this.parent.chartScrollModule.updateContent()}},e.prototype.updateScrollTop=function(e){this.content.scrollTop=e,this.parent.treegridPreviousScroll.top=this.content.scrollTop},e.prototype.destroy=function(e){this.removeEventListeners(e),e.treeGridModule&&(e.treeGridModule=null)},e}(),i="e-taskbar-main-container",s="e-active-container",n="e-left-label-inner-div",r="e-right-label-inner-div",a="e-segmented-taskbar",o=function(){return(o=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},l=function(){function e(e){this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0,this.restrictTaskbarEdit=!1,this.restrictConnectorLineEdit=!1,this.dblClick=0,this.segmentIndex=-1,this.updateProgress=!0,this.segmentPosition=0,this.parent=e,this.initPublicProp(),this.ganttChartTableBody=this.parent.element.querySelector("#"+this.parent.element.id+"_chartContentBody"),this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane"),this.chartBodyContainer=this.parent.element.querySelector(".e-chart-root-container"),this.addEventListeners()}return e.prototype.initPublicProp=function(){this.taskBarEditElement=null,this.taskBarEditRecord=null,this.taskBarEditAction=null,this.dragMouseLeave=!1,this.isMouseDragging=!1,this.isTaskbarHold=!1,this.taskbarTouchEditing=!1,this.connectorPointWidth=null,this.connectorSecondAction=null,this.toPredecessorText=null,this.highlightedSecondElement=null,this.falseLine=null,this.segmentElement=null,this.segmentIndex=-1,this.taskBarEditSegmentElement=null,this.updateProgress=!0},e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseDown,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchCancelEvent,this.ganttMouseLeave,this),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp,this),sf.base.EventHandler.add(this.chartBodyContainer,"click",this.click,this),sf.base.EventHandler.add(this.chartPane,"mouseover",this.ganttMouseOver,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane"),i=e.element.querySelector(".e-chart-root-container");sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.ganttMouseDown),sf.base.EventHandler.remove(t,sf.base.Browser.touchMoveEvent,this.ganttMouseMove),sf.base.EventHandler.remove(t,sf.base.Browser.touchCancelEvent,this.ganttMouseLeave),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp),sf.base.EventHandler.remove(i,"click",this.click),sf.base.EventHandler.remove(t,"mouseover",this.ganttMouseOver)},e.prototype.checkPointerType=function(e){return-1!==e.type.indexOf("pointer")&&"safari"===sf.base.Browser.info.name&&parseInt(sf.base.Browser.info.version)>12},e.prototype.isTaskbarDragAndDrop=function(e){return!sf.base.isNullOrUndefined(e.querySelector(".e-gantt-taskbar-draganddrop"))},e.prototype.ganttMouseDown=function(e){this.taskbarCanDrag=!1;var t=this.parent.getOffsetRect(this.chartBodyContainer);this.event=this.getCoordinate(e),this.parent.enableRTL?this.mouseDownX=Math.abs(e.pageX-(t.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseDownX=this.event.pageX-t.left+this.parent.chartPreviousScroll.left;var s=e.target,n=s.classList.contains("e-chart-row-cell"),r=this.getElementByPosition(e),o=this.parent.getParentElement(r,"e-chart-row-cell"),l=null;if(sf.base.isNullOrUndefined(o)||(l=o.querySelector(".e-taskbar-main-container")),this.taskBarRow=this.parent.getParentElement(r,"e-chart-row"),sf.base.isNullOrUndefined(this.taskBarRow)||(this.parent.options.allowTaskbarDragAndDrop=this.isTaskbarDragAndDrop(this.parent.element)),this.updateTaskBarEditElement(e),!this.taskBarEditAction&&null===l&&this.parent.options.allowSchedulingOnDrag){if(this.chartEmptyRowElement=sf.base.createElement("div",{className:"e-chart-empty-row"}),sf.base.isNullOrUndefined(this.taskBarRow)||(this.taskBarRow.appendChild(this.chartEmptyRowElement),this.emptyRow=this.taskBarRow.querySelector(".e-chart-empty-row")),this.emptyRow){var h=document.querySelectorAll(".e-row");this.dataGuid=(Number(this.taskBarRow.getAttribute("aria-rowindex"))-1).toString();var c=h[this.dataGuid].querySelector(".e-treegridexpand");this.parentRow=!!c,this.parentRow?this.taskBarRow.style.cursor="no-drop":(this.taskBarRow.style.position="relative",this.taskBarRow.style.cursor="crosshair",this.emptyRow.style.left="0px",this.emptyRow.style.backgroundColor="transparent",this.emptyRow.style.top=(s.offsetHeight-(Math.floor(.62*s.offsetHeight)-2))/2-1+"px",this.emptyRow.style.height=Math.floor(.62*s.offsetHeight)+"px",this.parent.dotNetRef.invokeMethodAsync("ChartRowMouseDownHandler",this.dataGuid),this.isDown=!0)}this.longPress(!0)}else!this.taskBarEditAction&&this.taskBarRow&&n&&this.parent.options.allowSchedulingOnDrag&&(this.taskBarRow.style.cursor="no-drop");var d=this.parent.getParentElement(r,i);sf.base.isNullOrUndefined(d)||sf.base.isNullOrUndefined(this.taskbarCurrentEditElement)||d!==this.taskbarCurrentEditElement||(this.taskbarCanDrag=!0,this.checkPointerType(e)&&(e.stopPropagation(),this.parent.element.querySelector(".e-chart-scroll-container").style.overflow="hidden"));this.dblClick++,this.dblClick>=2&&(this.dblClick=1),sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)&&(this.taskBarEditSegmentElement=this.parent.getParentElement(e.target,a)),sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)||sf.base.EventHandler.add(this.taskBarEditSegmentElement,sf.base.Browser.touchCancelEvent,this.ganttChartMouseLeave,this)},e.prototype.click=function(e){var t=this.getElementByPosition(e);this.taskbarCurrentEditElement=this.parent.getParentElement(t,i),sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)&&(this.taskBarEditSegmentElement=this.parent.getParentElement(e.target,a)),sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)||sf.base.EventHandler.add(this.taskBarEditSegmentElement,sf.base.Browser.touchCancelEvent,this.ganttChartMouseLeave,this)},e.prototype.ganttMouseLeave=function(){this.dragMouseLeave=!0,sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)||this.ganttChartMouseLeave()},e.prototype.ganttChartMouseUp=function(e){var t=this;this.isTaskbarHold=!1,this.taskBarRow&&(this.isDown=!1,this.taskBarRow.style.cursor="");var i=-1;if(this.parent.options.allowTaskbarDragAndDrop&&this.parent.options.enableRowVirtualization){var s=document.elementFromPoint(e.clientX,e.clientY).getBoundingClientRect().x-5,n=document.elementFromPoint(s,e.clientY),r=this.parent.getParentElement(n,"e-chart-row");i=sf.base.isNullOrUndefined(r)?i:Number(r.getAttribute("aria-rowindex"))-1}this.taskBarEditAction&&this.isMouseDragging?(this.parent.isTaskbarEditingEventMapped?this.parent.dotNetRef.invokeMethodAsync("TaskbarEditBeforeSave",this.taskBarEditAction).then((function(e){e||t.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",t.dataGuid,t.taskBarEditAction,t.taskBarEditRecord,i).then((function(e){null!==t.taskBarEditRecord&&null!==e&&(t.taskBarEditRecord.left=e.left,t.taskBarEditRecord.width=e.width,t.taskBarEditRecord.progress=e.progress,t.taskBarEditRecord.progressWidth=e.progressWidth),t.updateItemPosition()}))})):this.dragMouseLeave||this.parent.isTaskbarEditingEventMapped?(this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",null,null,null,i),this.taskBarEditRecord=this.previousItem,this.updateItemPosition()):this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord,i).then((function(e){null!==t.taskBarEditRecord&&null!==e&&(t.taskBarEditRecord.left=e.left,t.taskBarEditRecord.width=e.width,t.taskBarEditRecord.progress=e.progress,t.taskBarEditRecord.progressWidth=e.progressWidth),t.updateItemPosition()})),this.checkPointerType(e)&&(this.parent.element.querySelector(".e-chart-scroll-container").style.overflow="scroll auto")):this.taskBarEditElement&&this.taskbarTouchEditing||this.taskBarEditAction?(this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",null,null,null,i),this.falseLine&&this.removeFalseLine(!0),this.initPublicProp()):this.tappedPoint?this.taskbarCurrentEditElement=null:!this.taskBarEditAction&&this.emptyRow&&!this.parentRow&&this.parent.options.allowSchedulingOnDrag&&(this.emptyRow.style.border="none",sf.base.isNullOrUndefined(this.chartEmptyRowElement)||sf.base.remove(this.chartEmptyRowElement),this.parent.dotNetRef.invokeMethodAsync("UpdateTaskbarResizedData",this.dataGuid),this.taskBarRow=null,this.emptyRow=null);this.removeCloneElement(),this.stopScrollTimer(),this.longPress(!1),sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)&&(this.taskBarEditSegmentElement=this.parent.getParentElement(e.target,a)),sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)||sf.base.EventHandler.add(this.taskBarEditSegmentElement,sf.base.Browser.touchCancelEvent,this.ganttChartMouseLeave,this)},e.prototype.ganttMouseOver=function(e){if(sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)&&(this.taskBarEditSegmentElement=this.parent.getParentElement(e.target,"e-segmented-taskbar")),sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)||null!==this.taskBarEditAction)sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)||null===this.taskBarEditAction||this.ganttChartMouseLeave();else{sf.base.EventHandler.add(this.taskBarEditSegmentElement,sf.base.Browser.touchCancelEvent,this.ganttChartMouseLeave,this);var t=this.taskBarEditSegmentElement.querySelector(".e-taskbar-left-resizer"),i=this.taskBarEditSegmentElement.querySelector(".e-taskbar-right-resizer");sf.base.isNullOrUndefined(t)||t.classList.add("e-left-resize-gripper"),sf.base.isNullOrUndefined(i)||i.classList.add("e-right-resize-gripper")}},e.prototype.ganttChartMouseLeave=function(){if(!sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)){var e=this.taskBarEditSegmentElement.querySelector(".e-taskbar-left-resizer"),t=this.taskBarEditSegmentElement.querySelector(".e-taskbar-right-resizer");!sf.base.isNullOrUndefined(e)&&e.classList.contains("e-left-resize-gripper")&&e.classList.remove("e-left-resize-gripper"),!sf.base.isNullOrUndefined(t)&&t.classList.contains("e-right-resize-gripper")&&t.classList.remove("e-right-resize-gripper"),sf.base.EventHandler.remove(this.taskBarEditSegmentElement,sf.base.Browser.touchCancelEvent,this.ganttChartMouseLeave),null===this.taskBarEditAction&&(this.taskBarEditSegmentElement=null)}},e.prototype.updateItemPosition=function(){this.setItemPosition(),this.falseLine&&this.removeFalseLine(!0),this.initPublicProp()},e.prototype.createResizeElement=function(){var e=sf.base.createElement("div");e.classList.add("e-gantt-chart-resize-indicator"),e.style.setProperty("width",this.taskBarEditElement.style.width);var t=this.parent.enableRTL?"right":"left";if(e.style.setProperty(t,this.taskBarEditElement.style.left),this.parent.options.enableTimelineVirtualization&&this.parent.options.enableRowVirtualization){var i=this.parent.chartScrollModule.getTimelineLeft(),s=e.style.left,n=s.substring(0,s.length-2);e.style.left=parseInt(n.toString(),10)+-i+"px"}this.parent.element.querySelector(".e-chart-rows-container").appendChild(e)},e.prototype.createTaskbarClone=function(e){sf.base.isNullOrUndefined(this.taskBarEditSegmentElement)||this.ganttChartMouseLeave();var t=this.parent.element.querySelector(".e-gantt-clone-taskbar"),i=e.cloneNode(!0);if(!t){i.classList.add("e-gantt-clone-taskbar");var s=0!==this.segmentIndex||"ChildDrag"!==this.taskBarEditAction&&"ProgressResizing"!==this.taskBarEditAction?this.segmentIndex<0?1:0:1;if(i.style.setProperty("top",e.parentElement.offsetTop+s+"px"),"LeftResizing"===this.taskBarEditAction)i.querySelector(".e-taskbar-left-resizer").classList.add("e-left-resize-gripper");if("RightResizing"===this.taskBarEditAction)i.querySelector(".e-taskbar-right-resizer").classList.add("e-right-resize-gripper");if("ProgressResizing"===this.taskBarEditAction)i.querySelector(".e-child-progress-resizer").classList.add("e-progress-resize-gripper");var n=i.querySelector(".e-left-connectorpoint-outer-div"),r=i.querySelector(".e-right-connectorpoint-outer-div");sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(r)||(n.style.setProperty("visibility","hidden"),r.style.setProperty("visibility","hidden"))}(this.cloneTaskbarElement=i,this.parent.options.allowTaskbarDragAndDrop&&(this.cloneTaskbarElement.style.zIndex="999"),this.cloneTaskbarElement.style.setProperty("opacity","40%"),this.taskBarEditElement=this.cloneTaskbarElement,sf.base.isNullOrUndefined(i))||(this.parent.options.enableRowVirtualization&&this.parent.options.allowTaskbarDragAndDrop?this.parent.element.querySelector(".e-chart-scroll-container").appendChild(i):e.parentElement.appendChild(i))},e.prototype.removeCloneElement=function(){var e=this.parent.element.querySelector(".e-gantt-chart-resize-indicator"),t=this.parent.element.querySelector(".e-gantt-clone-taskbar");if(sf.base.isNullOrUndefined(e)||e.remove(),!sf.base.isNullOrUndefined(t)){var s=t.parentElement.querySelector("."+i);this.segmentIndex<1&&(s=t.parentElement.querySelector("."+a)),sf.base.isNullOrUndefined(s)||s.style.removeProperty("z-index"),t.remove()}},e.prototype.updateTaskBarEditElement=function(e){var t,s=this,n=this.getElementByPosition(e),r=this.parent.getParentElement(n,i);if(this.taskBarEditElement=r,this.taskBarEditElement&&!this.tappedPoint){var o=r.style.cursor;if("mousedown"===e.type||"touchstart"===e.type||"click"===e.type||this.checkPointerType(e)){if(this.dataGuid=this.taskBarEditElement.getAttribute("rowuniqueid"),this.parent.dotNetRef.invokeMethodAsync("GetConnectorValues").then((function(e){s.connectorPointWidth=e})),this.taskBarEditAction=this.getTaskBarAction(e,o),this.parent.isTaskbarEditingEventMapped&&this.parent.dotNetRef.invokeMethodAsync("OnTaskbarEditing",this.dataGuid,this.taskBarEditAction).then((function(e){s.restrictTaskbarEdit=e})),"ProgressResizing"===this.taskBarEditAction){var l=r.querySelectorAll("."+a);!sf.base.isNullOrUndefined(l)&&l.length>1&&(this.segmentIndex=0)}else sf.base.isNullOrUndefined(this.parent.getParentElement(n,a))||(this.segmentElement=this.parent.getParentElement(n,a),this.segmentIndex=Number(this.segmentElement.getAttribute("data-segment-index")),0!==this.segmentIndex&&"ChildDrag"===this.taskBarEditAction?t=this.segmentElement:"RightResizing"!==this.taskBarEditAction&&"LeftResizing"!==this.taskBarEditAction||(t=this.segmentElement));this.parent.dotNetRef.invokeMethodAsync("GetEditedRecord",this.dataGuid,this.taskBarEditAction,this.segmentIndex).then((function(t){s.taskBarEditRecord=t,s.updateMouseDownProperties(e)})),this.isTaskbarHold=!0,sf.base.isNullOrUndefined(t)||(this.taskBarEditElement=t)}}else if(this.taskBarEditElement&&this.tappedPoint){var h=r.getAttribute("rowuniqueid");this.parent.dotNetRef.invokeMethodAsync("RenderConnectorLine",this.tappedPoint,this.dataGuid,h),this.initPublicProp()}},e.prototype.updateMouseDownProperties=function(e){var t=this.getCoordinate(e);if(t.pageX||t.pageY){var i=this.parent.getOffsetRect(this.chartBodyContainer);this.parent.enableRTL?this.mouseDownX=Math.abs(t.pageX-(i.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseDownX=t.pageX-i.left+Math.abs(this.parent.chartPreviousScroll.left),this.mouseDownY=t.pageY-i.top+this.parent.chartPreviousScroll.top}},e.prototype.getTaskBarAction=function(e,t){var i=this.getElementByPosition(e),s="";return i.classList.contains("e-taskbar-left-resizer")?s="LeftResizing":i.classList.contains("e-taskbar-right-resizer")?s="RightResizing":i.classList.contains("e-child-progress-resizer")||sf.base.closest(i,".e-child-progress-resizer")?s="ProgressResizing":i.classList.contains("e-connectorpoint-left-hover")?(s="ConnectorPointLeftDrag",("touchstart"===e.type||"click"===e.type||this.checkPointerType(e))&&(this.tappedPoint="ConnectorPointLeftDrag")):i.classList.contains("e-connectorpoint-right-hover")?(s="ConnectorPointRightDrag",("touchstart"===e.type||"click"===e.type||this.checkPointerType(e))&&(this.tappedPoint="ConnectorPointRightDrag")):"Auto"===this.parent.options.taskMode&&(sf.base.closest(i,".e-gantt-parent-taskbar")||sf.base.closest(i,".e-gantt-parent-milestone"))&&"default"!==t?s="ParentDrag":sf.base.closest(i,".e-gantt-child-taskbar")&&"default"!==t?s="ChildDrag":sf.base.closest(i,".e-gantt-milestone")&&"default"!==t&&(s="MilestoneDrag"),s},e.prototype.getElementByPosition=function(e){var t=this.getCoordinate(e);return t.pageX=null!==t.pageX?t.pageX:0,t.pageY=null!==t.pageY?t.pageY:0,document.elementFromPoint(t.pageX-window.scrollX,t.pageY-window.scrollY)},e.prototype.getCoordinate=function(e){var t={};if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchleave"===e.type){var i=e;t.pageX=i.changedTouches[0].pageX,t.pageY=i.changedTouches[0].pageY}else{i=e;t.pageX=i.pageX,t.pageY=i.pageY}return t},e.prototype.ganttMouseMove=function(e){if("touchmove"!==e.type&&"click"!==e.type&&!this.checkPointerType(e)||this.taskbarCanDrag){if(this.isDown&&!this.taskBarEditAction&&!this.parentRow&&"mousemove"===e.type||this.LongPress&&this.isDown){var t=e.target,i=this.parent.getParentElement(t,"e-chart-scroll-container");this.parent.chartPreviousScroll.left>0&&i.scrollWidth-this.chartBodyContainer.offsetWidth>this.parent.chartPreviousScroll.left&&e.preventDefault();var s=this.parent.getOffsetRect(this.chartBodyContainer),n=this.getCoordinate(e);if(this.parent.enableRTL?this.mouseMoveX=Math.abs(n.pageX-(s.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseMoveX=n.pageX-s.left+this.parent.chartPreviousScroll.left,this.emptyRow){var r=document.getElementById(this.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(r))r.style.left=this.event.pageX-10+"px",r.style.top=this.event.pageY-80+"px",sf.base.select(".e-arrow-tip",r).style.left="2px";(this.mouseMoveX-this.mouseDownX>2||this.mouseDownX-this.mouseMoveX>2)&&(this.mouseMoveX>this.mouseDownX?(this.taskBarWidth=this.mouseMoveX-this.mouseDownX,this.taskBarRight=this.mouseDownX+this.taskBarWidth,this.parent.dotNetRef.invokeMethodAsync("UpdateTaskbarResizingData",this.dataGuid,this.mouseDownX,this.taskBarRight)):(this.taskBarWidth=this.mouseDownX-this.mouseMoveX,this.taskBarRight=this.mouseDownX-this.taskBarWidth,this.parent.dotNetRef.invokeMethodAsync("UpdateTaskbarResizingData",this.dataGuid,this.taskBarRight,this.mouseDownX))),this.emptyRow.style.width=this.taskBarWidth+"px",this.parent.enableRTL?this.emptyRow.style.left=this.mouseMoveX<this.mouseDownX?i.scrollWidth-this.mouseDownX+"px":i.scrollWidth-this.taskBarRight+"px":this.emptyRow.style.left=this.mouseMoveX>this.mouseDownX?this.mouseDownX+"px":this.taskBarRight+"px",this.emptyRow.style.backgroundColor="";var a=0;(a=this.parent.enableRTL?Math.abs(Math.abs(this.mouseMoveX)-Math.abs(this.parent.chartPreviousScroll.left)+s.left):this.mouseMoveX-this.parent.chartPreviousScroll.left+s.left)+20>s.left+this.chartBodyContainer.offsetWidth?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):a+40>s.left+this.chartBodyContainer.offsetWidth&&this.parent.enableRTL&&0===this.parent.chartPreviousScroll.left?(this.parent.chartPreviousScroll.left=-1,this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):a-10<s.left?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("left")):null!==this.scrollTimer&&this.stopScrollTimer()}}if(this.taskBarEditAction&&this.taskBarEditRecord&&this.isTaskbarHold){s=this.parent.getOffsetRect(this.chartBodyContainer),n=this.getCoordinate(e);this.parent.enableRTL?this.mouseMoveX=Math.abs(n.pageX-(s.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseMoveX=n.pageX-s.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=n.pageY-s.top+this.parent.chartPreviousScroll.top,this.dragMouseLeave=!1,this.isMouseDragCheck(),this.isMouseDragging&&(this.taskBarEditingAction(e),1===this.dblClick&&"ConnectorPointRightDrag"!==this.taskBarEditAction&&"ConnectorPointLeftDrag"!==this.taskBarEditAction&&("ProgressResizing"!==this.taskBarEditAction&&this.createResizeElement(),this.taskBarEditElement.style.setProperty("z-index","4"),this.createTaskbarClone(this.taskBarEditElement),this.dblClick++))}var o=sf.base.closest(e.target,".e-taskbar-main-container");o&&"default"!==o.style.cursor&&(this.parent.options.allowTaskbarEditing&&"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction?o.style.cursor="move":o.style.cursor="auto")}},e.prototype.isMouseDragCheck=function(){if(!this.isMouseDragging&&this.taskBarEditAction&&(this.mouseDownX!==this.mouseMoveX&&(this.mouseDownX+3<this.mouseMoveX||this.mouseDownX-3>this.mouseMoveX)||this.mouseDownY!==this.mouseMoveY&&(this.mouseDownY+3<this.mouseMoveY||this.mouseDownY-3>this.mouseMoveY))){this.isMouseDragging=!0;var e=this.taskBarEditRecord;this.previousItem=o({},e),this.taskBarEditElement.setAttribute("aria-grabbed","true")}},e.prototype.updateMouseMoveProperties=function(e){var t=this.parent.getOffsetRect(this.chartBodyContainer),i=this.getCoordinate(e),s="ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction,n=!("ChildDrag"!==this.taskBarEditAction&&"MilestoneDrag"!==this.taskBarEditAction||!this.parent.options.allowTaskbarDragAndDrop);if((i.pageX||i.pageY)&&(this.parent.enableRTL?this.mouseMoveX=Math.abs(i.pageX-(t.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseMoveX=i.pageX-t.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=i.pageY-t.top+this.parent.chartPreviousScroll.top),this.taskBarEditRecord.width>3&&("ProgressResizing"!==this.taskBarEditAction||0!==this.taskBarEditRecord.progress&&100!==this.taskBarEditRecord.progress)||s){var r=0;r=this.parent.enableRTL?Math.abs(Math.abs(this.mouseMoveX)-Math.abs(this.parent.chartPreviousScroll.left)+t.left):this.mouseMoveX-this.parent.chartPreviousScroll.left+t.left;var a=this.mouseMoveY-this.parent.chartPreviousScroll.top+t.top;r+20>t.left+this.chartBodyContainer.offsetWidth?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):r+40>t.left+this.chartBodyContainer.offsetWidth&&this.parent.enableRTL&&0===this.parent.chartPreviousScroll.left?(this.parent.chartPreviousScroll.left=-1,this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):r-10<t.left?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("left")):(s||n)&&a>t.top+this.chartBodyContainer.offsetHeight-80?(this.timerCount=this.parent.chartPreviousScroll.top,this.startScrollTimer("bottom")):(s||n)&&a-25<t.top?(this.timerCount=this.parent.chartPreviousScroll.top,this.startScrollTimer("top")):null!==this.scrollTimer&&this.stopScrollTimer()}e.preventDefault()},e.prototype.longPress=function(e){var t=this;e?t.longPressTimer=window.setTimeout((function(){t.LongPress=!0}),1e3):(t.LongPress=!1,window.clearTimeout(t.longPressTimer))},e.prototype.startScrollTimer=function(e){var t=this;this.parent.chartScrollModule.previousCount=0,this.stopScrollTimer();var i=0,s=this.parent.element.querySelector(".e-chart-root-container");this.scrollTimer=window.setInterval((function(){if(-1===Math.sign(t.timerCount)&&(i=-1,t.timerCount=Math.abs(t.timerCount)),"right"===e)t.timerCount=t.timerCount+1>=t.parent.totalTimelineWidth?t.parent.totalTimelineWidth:t.timerCount+1;else if("bottom"!==e||sf.base.isNullOrUndefined(s))t.timerCount=t.timerCount-1<0?0:t.timerCount-1;else{var n=t.parent.options.enableRowVirtualization?parseFloat(s.querySelector(".e-virtualtrack").style.height):parseFloat(s.querySelector(".e-chart-rows-container").style.height);t.timerCount=t.timerCount+1>=n?n:t.timerCount+1}"bottom"===e||"top"===e?t.parent.chartScrollModule.setScrollTop(t.timerCount):(t.parent.chartScrollModule.setScrollLeft(t.timerCount,i),t.parent.options.enableTimelineVirtualization&&t.parent.chartScrollModule.updateContent()),"ConnectorPointLeftDrag"!==t.taskBarEditAction&&"ConnectorPointRightDrag"!==t.taskBarEditAction||t.drawFalseLine()}),0)},e.prototype.stopScrollTimer=function(){window.clearInterval(this.scrollTimer),this.scrollTimer=null},e.prototype.taskBarEditingAction=function(e){this.restrictTaskbarEdit||this.updateMouseMoveProperties(e),"ProgressResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"LeftResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"RightResizing"!==this.taskBarEditAction&&"ParentResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"ParentDrag"!==this.taskBarEditAction&&"ChildDrag"!==this.taskBarEditAction&&"MilestoneDrag"!==this.taskBarEditAction||this.restrictTaskbarEdit?"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||"touchmove"===e.type&&!this.checkPointerType(e)||this.restrictConnectorLineEdit||(this.updateConnectorLineSecondProperties(e),this.triggerDependencyEvent(e),this.drawFalseLine()):this.enableDragging():this.enableRightResizing(e):this.enableLeftResizing(e):(this.updateSplitTaskProgress(),this.performProgressResize()),this.restrictTaskbarEdit||this.setItemPosition(),"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction&&this.parent.dotNetRef.invokeMethodAsync("UpdateResizingData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord),this.taskbarTouchEditing=!0,this.updateProgress&&this.updateTooltip(e)},e.prototype.updateTooltip=function(e){var t=document.getElementById(this.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(t)){var s=this.taskBarEditRecord,n=s.width,r=s.progressWidth,a=this.parent.getOffsetRect(this.taskBarEditElement);if(-1!==this.segmentIndex&&"ProgressResizing"===this.taskBarEditAction){var o=sf.base.closest(this.taskBarEditElement,"."+i);sf.base.isNullOrUndefined(o)||(a=this.parent.getOffsetRect(o))}var l=this.parent.tooltipModule.getPointerPosition(e),h=sf.base.select(".e-arrow-tip",t),c=h.offsetWidth/2+(t.offsetWidth-t.clientWidth);if(h.style.left="2px","ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction)return;"LeftResizing"===this.taskBarEditAction?t.style.left=a.left-c+"px":"RightResizing"===this.taskBarEditAction||"ParentResizing"===this.taskBarEditAction?t.style.left=(this.parent.enableRTL?a.left-n-c:a.left+n-c)+"px":"ProgressResizing"===this.taskBarEditAction?t.style.left=(this.parent.enableRTL?a.left-r-c:a.left+r-c)+"px":t.style.left=l.x-c+"px",this.parent.options.allowTaskbarDragAndDrop&&(t.style.top=Math.abs(a.top-(t.offsetHeight+10))+"px")}},e.prototype.setItemPosition=function(){var e=this.taskBarEditRecord,t=this.parent.enableRTL?"right":"left";if(null!==e&&null!==this.taskBarEditElement&&(null!==sf.base.closest(this.taskBarEditElement,"tr.e-chart-row")||this.parent.options.allowTaskbarDragAndDrop&&this.parent.options.enableRowVirtualization)){var s,n="MilestoneDrag"===this.taskBarEditAction||e.isMilestone?this.milestoneHeight:e.width,r=n-10,o=!sf.base.isNullOrUndefined(e.segmentData)&&this.segmentIndex>-1?e.segmentData.segmentProgress/100*e.width:e.progress/100*e.width;s=this.taskBarEditElement.classList.contains(a)||this.taskBarEditElement.classList.contains(i)||"ChildDrag"===this.taskBarEditAction||"LeftResizing"===this.taskBarEditAction?this.taskBarEditElement:sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector("."+i);var l=this.taskBarEditElement.querySelector(".e-gantt-child-progressbar"),h=this.taskBarEditElement.querySelector(".e-gantt-child-taskbar"),c=this.taskBarEditElement.querySelector(".e-child-progress-resizer"),d=this.taskBarEditElement.querySelector(".e-taskbar-right-resizer"),u=this.taskBarEditElement.querySelector(".e-gantt-parent-progressbar");this.taskBarEditElement.querySelector(".e-right-connectorpoint-outer-div");this.parent.biggerMode&&(r=n-24);var f=this.parent.element.querySelector(".e-chart-rows-container").querySelector(".e-gantt-chart-resize-indicator");if(!sf.base.isNullOrUndefined(f)&&("ChildDrag"===this.taskBarEditAction||"ParentDrag"===this.taskBarEditAction||"RightResizing"===this.taskBarEditAction||"LeftResizing"===this.taskBarEditAction)){var p=0;if(sf.base.isNullOrUndefined(this.segmentElement)||sf.base.isNullOrUndefined(e.segmentData)||!(this.segmentIndex>0||0===this.segmentIndex&&("RightResizing"===this.taskBarEditAction||"LeftResizing"===this.taskBarEditAction))||(p=e.segmentData.taskbarLeft),f.style.width=n+"px",f.style.setProperty(t,e.left+p+"px"),this.parent.options.enableTimelineVirtualization&&this.parent.options.enableRowVirtualization){var m=this.parent.chartScrollModule.getTimelineLeft();f.style.left=e.left+-m+"px"}}if(s.classList.contains("e-gantt-clone-taskbar")&&"ParentResizing"!==this.taskBarEditAction&&"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction&&("ProgressResizing"!==this.taskBarEditAction&&(s.style.width=n+"px",s.style.setProperty(t,e.left+"px")),this.parent.options.allowTaskbarDragAndDrop&&("ChildDrag"===this.taskBarEditAction&&this.segmentIndex<1||"MilestoneDrag"===this.taskBarEditAction)&&(s.style.top=e.top+"px")),"MilestoneDrag"===this.taskBarEditAction||e.isMilestone)s.style.setProperty(t,e.left-n/2+2+"px"),sf.base.isNullOrUndefined(f)||f.style.setProperty("left",e.left-n/2+"px");else if("ProgressResizing"===this.taskBarEditAction)if(-1===this.segmentIndex)h.style.setProperty(t,e.left+e.progressWidth-10+"px"),sf.base.isNullOrUndefined(l)||(l.style.width=e.progressWidth+"px",l.style.borderBottomRightRadius=this.progressBorderRadius+"px",l.style.borderTopRightRadius=this.progressBorderRadius+"px",c.style.setProperty(t,e.progressWidth-8+"px"));else{if(this.updateProgress){this.updateSegmentProgress(e);for(var g=this.taskBarEditElement.querySelectorAll(".e-gantt-child-progressbar"),b=0;b<g.length;b++)g[parseInt(b.toString(),10)].style.width=e.segmentData.segments[parseInt(b.toString(),10)].progressWidth+"px"}else this.updateProgress=!1;l.style.borderBottomRightRadius=this.progressBorderRadius+"px",l.style.borderTopRightRadius=this.progressBorderRadius+"px",c.style.setProperty(t,e.progressWidth-8+"px")}else s.classList.contains("e-gantt-clone-taskbar")&&"RightResizing"===this.taskBarEditAction&&!sf.base.isNullOrUndefined(h)?(h.style.width=n+"px",sf.base.isNullOrUndefined(l)||(l.style.width=o+"px",d.style.setProperty(t,r+"px"),c.style.setProperty(t,o-8+"px"))):s.classList.contains("e-gantt-clone-taskbar")&&"RightResizing"===this.taskBarEditAction&&s.classList.contains(a)?d.style.setProperty(t,r+"px"):"ParentDrag"===this.taskBarEditAction?sf.base.isNullOrUndefined(l)||(u.style.width=e.progressWidth+"px"):(!s.classList.contains("e-gantt-clone-taskbar")||sf.base.isNullOrUndefined(h)||h.classList.contains(a)||(h.style.width=n+"px"),s.classList.contains("e-gantt-clone-taskbar")&&!sf.base.isNullOrUndefined(l)&&(sf.base.isNullOrUndefined(h)||h.classList.contains(a)||d.style.setProperty(t,r+"px"),0===this.segmentIndex&&this.parent.options.allowTaskbarDragAndDrop||(l.style.width=o+"px"),sf.base.isNullOrUndefined(c)||c.style.setProperty(t,o-8+"px")))}},e.prototype.enableLeftResizing=function(e){var t=this.taskBarEditRecord,i=0;this.taskBarEditElement.classList.contains(a)?this.enableSplitTaskLeftResize():(this.mouseDownX>this.mouseMoveX?this.mouseMoveX<t.left+t.width?(i=this.mouseDownX-this.mouseMoveX,t.left>0&&(t.left=this.previousItem.left-i,t.width=this.previousItem.width+i)):this.mouseMoveX>t.left+t.width&&(i=this.mouseDownX-this.mouseMoveX,t.left=this.previousItem.left-i,t.width=3):this.mouseMoveX<t.left+t.width?(i=this.mouseMoveX-this.mouseDownX,t.left<t.left+t.width&&this.previousItem.left+i<=this.previousItem.left+this.previousItem.width&&(t.left=this.previousItem.left+i,t.width=this.previousItem.width-i)):(i=this.mouseMoveX-this.mouseDownX,t.left=this.previousItem.left+i,t.width=3),this.updateEditPosition(e,t)),t.left=this.previousItem.left+this.previousItem.width-t.width},e.prototype.enableRightResizing=function(e){var t=this.taskBarEditRecord,i=0;if(this.mouseDownX>this.mouseMoveX?this.mouseMoveX>t.left&&this.mouseDownX-this.mouseMoveX>3?(i=this.mouseDownX-this.mouseMoveX,t.width=this.previousItem.width-i):this.mouseMoveX<t.left&&(t.width=3):this.mouseMoveX>t.left&&(i=this.mouseMoveX-this.mouseDownX,t.width=this.previousItem.width+i),!sf.base.isNullOrUndefined(t.segmentData)&&!sf.base.isNullOrUndefined(this.segmentElement)&&-1!==this.segmentIndex){var s=0;s=0===this.segmentIndex?t.segmentData.nextLeft:t.segmentData.nextLeft-this.segmentElement.offsetLeft,0!==t.segmentData.nextLeft&&t.width>Math.abs(s)&&(t.width=Math.abs(s))}sf.base.isNullOrUndefined(this.segmentElement)&&this.updateEditPosition(e,t)},e.prototype.enableDragging=function(){var e=this.taskBarEditRecord,t=0;if(this.mouseDownX>this.mouseMoveX?(t=this.mouseDownX-this.mouseMoveX)>0&&(e.left=this.previousItem.left-t):(t=this.mouseMoveX-this.mouseDownX,e.left=this.previousItem.left+t),!sf.base.isNullOrUndefined(null!==e.segmentData)&&!sf.base.isNullOrUndefined(this.segmentElement)&&this.segmentIndex>0){var i=e.segmentData.previousLeft+e.segmentData.taskbarLeft,s=e.left,n=e.segmentData.segments.length;s=this.segmentIndex>0&&n-1!==this.segmentIndex?e.segmentData.taskbarLeft+e.left<i+e.segmentData.previousWidth?e.segmentData.previousLeft+e.segmentData.previousWidth:e.width+e.left>e.segmentData.nextLeft?e.segmentData.nextLeft-e.width:e.left:e.segmentData.taskbarLeft+e.left<i+e.segmentData.previousWidth?e.segmentData.previousLeft+e.segmentData.previousWidth:e.left,e.left=s}var r=this.chartBodyContainer.querySelector(".e-task-table"),a=e.left<0?0:e.left+e.width>=r.offsetWidth?r.offsetWidth-e.width:e.left;this.parent.options.allowTaskbarDragAndDrop&&(e.top=this.previousItem.top+Math.abs(15-this.mouseMoveY)),e.left=a},e.prototype.performProgressResize=function(){var e=this.taskBarEditRecord,t=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>e.left&&this.mouseMoveX<e.left+e.width&&e.left>0?(t=this.mouseMoveX-e.left,e.progressWidth=t):this.mouseMoveX>=e.left+e.width?e.progressWidth=e.width:e.progressWidth=0:this.mouseMoveX>e.left&&this.mouseMoveX<e.left+e.width?(t=this.mouseMoveX-e.left,e.progressWidth=t):this.mouseMoveX<=e.left?e.progressWidth=0:e.progressWidth=e.width;var i=e.progressWidth>e.width?e.width:e.progressWidth;i=e.progressWidth<0?0:e.progressWidth,e.progressWidth=i;var s=e.width-e.progressWidth;this.progressBorderRadius=s<=4?4-s:0},e.prototype.updateEditPosition=function(e,t){this.updateIsMilestone(t)},e.prototype.updateIsMilestone=function(e){e.width<=3?(e.width=3,e.isMilestone=!0):e.isMilestone=!1},e.prototype.updateConnectorLineSecondProperties=function(e){var t=this.getElementByPosition(e),s=this.parent.getParentElement(t,i);this.connectorSecondAction=null;var n=0;this.parent.getParentElement(t,"e-connectorpoint-left")?(this.connectorSecondAction="ConnectorPointLeftDrag",this.toPredecessorText="Start"):this.parent.getParentElement(t,"e-connectorpoint-right")?(this.connectorSecondAction="ConnectorPointRightDrag",this.toPredecessorText="Finish"):(this.connectorSecondAction=null,this.toPredecessorText=null),this.taskBarEditElement!==s&&this.taskBarEditElement!==this.highlightedSecondElement&&(this.parent.options.enableRowVirtualization&&(n=this.getTopPosition(this.parent.element)),(this.parent.options.enableRowVirtualization&&0===this.elementOffsetLeft||!this.parent.options.enableRowVirtualization)&&(this.elementOffsetLeft=this.taskBarEditElement.offsetLeft,this.elementOffsetTop=this.taskBarEditElement.offsetTop+n,this.elementOffsetWidth=this.taskBarEditElement.offsetWidth,this.elementOffsetHeight=this.taskBarEditElement.offsetHeight,this.showHideTaskBarEditingElements(s,this.highlightedSecondElement))),sf.base.isNullOrUndefined(this.connectorSecondAction)&&!sf.base.isNullOrUndefined(this.connectorSecondElement)&&(this.connectorSecondElement.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-allow-block"),this.connectorSecondElement.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-allow-block")),this.connectorSecondElement=this.connectorSecondAction?s:null,this.toDataGuid=sf.base.isNullOrUndefined(this.connectorSecondElement)?null:this.connectorSecondElement.getAttribute("rowuniqueid")},e.prototype.getTopPosition=function(e){var t,i=e.querySelector(".e-virtualtable"),s=i.style.transform.split(",");if(s.length>1)t=s[1].trim().split(")")[0];else{var n=i.style.transform;t=n.substring(n.lastIndexOf("(")+1,n.lastIndexOf(")"))}return parseFloat(t)},e.prototype.showHideTaskBarEditingElements=function(e,t){if((t=t||this.taskBarEditElement)&&e!==t&&(t.querySelector(".e-taskbar-left-resizer")&&(t.querySelector(".e-taskbar-left-resizer").classList.remove("e-left-resize-gripper"),t.querySelector(".e-taskbar-right-resizer").classList.remove("e-right-resize-gripper"),t.querySelector(".e-child-progress-resizer")&&t.querySelector(".e-child-progress-resizer").classList.remove("e-progress-resize-gripper")),t.querySelector(".e-connectorpoint-left")||t.parentElement.querySelector(".e-connectorpoint-left"))){var i=sf.base.isNullOrUndefined(t.querySelector(".e-connectorpoint-left"))?t.parentElement:t;i.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-left-hover"),i.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-right-hover")}},e.prototype.triggerDependencyEvent=function(e){var t=this;this.parent.dotNetRef.invokeMethodAsync("DrawConnectorLine",this.taskBarEditAction,this.connectorSecondAction,this.toDataGuid).then((function(i){if(i){var s=document.getElementById(t.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(s)){var n=t.parent.tooltipModule.getPointerPosition(e),r=sf.base.select(".e-arrow-tip",s).offsetWidth/2+(s.offsetWidth-s.clientWidth);s.style.left=n.x-r+"px",s.style.visibility="visible"}}else{var a=t.getElementByPosition(e);(a.classList.contains("e-connectorpoint-left")||a.classList.contains("e-connectorpoint-right"))&&a.classList.add("e-connectorpoint-allow-block")}}))},e.prototype.drawFalseLine=function(){var e,t=this.mouseDownX,i=this.mouseDownY,s=this.mouseMoveX,n=this.mouseMoveY,r=Math.sqrt((t-s)*(t-s)+(i-n)*(i-n)),a=180*Math.atan2(n-i,s-t)/Math.PI,o="rotate("+(this.parent.enableRTL?-a:a)+"deg)",l=0;sf.base.isNullOrUndefined(document.querySelectorAll(".e-chart-row")[0])||(l=document.querySelectorAll(".e-chart-row")[0].offsetWidth),"ConnectorPointLeftDrag"===this.taskBarEditAction&&(e=this.parent.enableRTL?l-(this.elementOffsetLeft+this.elementOffsetWidth+this.connectorPointWidth/2)-Math.abs(this.parent.chartPreviousScroll.left):this.elementOffsetLeft-this.connectorPointWidth/2-Math.abs(this.parent.chartPreviousScroll.left)),"ConnectorPointRightDrag"===this.taskBarEditAction&&(e=this.parent.enableRTL?l-(this.elementOffsetLeft-this.connectorPointWidth/2)-Math.abs(this.parent.chartPreviousScroll.left):this.elementOffsetLeft+this.elementOffsetWidth+this.connectorPointWidth/2-Math.abs(this.parent.chartPreviousScroll.left));var h=this.taskBarEditElement.querySelector(".e-manualparent-main-container"),c=null!==h?(h.offsetTop+h.offsetHeight)/2:this.elementOffsetHeight/2,d=this.elementOffsetTop+c+this.chartBodyContainer.offsetTop-this.parent.chartPreviousScroll.top;this.removeFalseLine(!1),this.falseLine=document.createElement("div"),this.falseLine.className="e-gantt-false-line",this.falseLine.id="ganttfalseline"+this.parent.element.id,this.falseLine.style.position="absolute",this.falseLine.style.transform=o,this.falseLine.style.borderTopWidth="1px",this.falseLine.style.borderTopStyle="dashed",this.falseLine.style.zIndex="5",this.falseLine.style.width=r-3+"px",this.falseLine.style.top=d+"px",this.parent.enableRTL?(this.falseLine.style.left="auto",this.falseLine.style.right=e+"px",this.falseLine.style.transformOrigin="100% 0%"):(this.falseLine.style.right="auto",this.falseLine.style.left=e+"px",this.falseLine.style.transformOrigin="0% 100%"),this.chartBodyContainer.appendChild(this.falseLine)},e.prototype.removeFalseLine=function(e){this.falseLine&&(sf.base.remove(this.falseLine),this.falseLine=null,e&&(this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0))},e.prototype.updateSegmentProgress=function(e){for(var t=e.segmentData.segments,i=!0,s=e.width,n=s*(e.progressWidth/s*100)/100,r=n,a=0,o=0;o<t.length;o++){var l=t[parseInt(o.toString(),10)];if(0!==o)if(l.left<=r)n=r-l.left;else n=0;delete l.progressWidth,n>0&&n>l.width?(n-=l.width,l.progressWidth=l.width,a+=l.progressWidth):i&&(l.progressWidth=n,n-=l.width,i=!1,a+=l.progressWidth)}e.segmentData.segmentProgressWidth=a},e.prototype.enableSplitTaskLeftResize=function(){var e=this.taskBarEditRecord,t=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX<e.segmentData.taskbarLeft+e.left+e.width&&(t=this.mouseDownX-this.mouseMoveX,e.left>0?(e.left=this.previousItem.left-t,e.width=this.previousItem.width+t,e.segmentData.taskbarLeft+e.left<e.segmentData.taskbarLeft+e.segmentData.previousLeft+e.segmentData.previousWidth&&(t=e.segmentData.taskbarLeft+e.segmentData.previousLeft+e.segmentData.previousWidth-(e.segmentData.taskbarLeft+e.left),e.left=this.previousItem.left+t,e.width-=t)):e.left<=0&&0===this.segmentIndex&&(e.left=this.previousItem.left-t,e.width=this.previousItem.width+t)):this.mouseMoveX<e.segmentData.taskbarLeft+e.width+e.left&&(t=this.mouseMoveX-this.mouseDownX,0===this.segmentIndex&&e.left<=0?e.width=e.width-t:e.left<e.left+e.width&&(e.left=this.previousItem.left+t,e.width=this.previousItem.width-t))},e.prototype.updateSplitTaskProgress=function(){if(null!==this.taskBarEditElement.querySelector(".e-child-progress-resizer")&&-1!==this.segmentIndex){var e=this.taskBarEditElement.querySelector(".e-child-progress-resizer"),t=e.offsetLeft<0?1:e.offsetLeft+8;this.taskBarEditRecord.segmentData.updateTooltip=this.updateProgress=!1;for(var i=0;i<this.taskBarEditRecord.segmentData.segments.length;i++){var s=this.taskBarEditRecord.segmentData.segments[parseInt(i.toString(),10)];(0===s.segmentIndex&&s.left<=t&&s.width>t||0!==s.segmentIndex&&s.left<t&&s.left+s.width>t)&&(this.updateProgress=!0,this.taskBarEditRecord.segmentData.updateTooltip=!0)}}},e.prototype.destroy=function(e){this.stopScrollTimer(),this.removeEventListeners(e),e.taskbarEditModule&&(e.taskbarEditModule=null)},e}(),h=function(){function e(e){this.parent=e,this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane"),this.addEventListeners()}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseMove,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane");sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.ganttMouseMove),sf.base.EventHandler.remove(t,sf.base.Browser.touchMoveEvent,this.ganttMouseMove)},e.prototype.ganttMouseMove=function(e){this.tooltipMouseEvent=e},e.prototype.tooltipOpened=function(e){var t=document.getElementById(e);if(!sf.base.isNullOrUndefined(this.tooltipMouseEvent)){var i=this.getPointerPosition(this.tooltipMouseEvent),s=this.parent.getOffsetRect(this.chartPane),n=s.top+this.chartPane.offsetHeight,r=s.left+this.chartPane.offsetWidth,a=i.x,o=i.y;if(r<a+t.offsetWidth+10)for(;r<a+t.offsetWidth+10;)a=r-t.offsetWidth-10,t.style.left=a+"px";else a+=10,t.style.left=a+"px";window.innerHeight<t.offsetHeight+o&&(o=o-t.offsetHeight-10),n<o+t.offsetHeight+20?o=o-t.offsetHeight-10:o+=10,t.style.top=o+"px",t.style.visibility="visible"}},e.prototype.predecessorTooltipOpened=function(e){var t=document.getElementById(e);if(!sf.base.isNullOrUndefined(this.tooltipMouseEvent)){var i=this.getPointerPosition(this.tooltipMouseEvent),s=this.parent.getOffsetRect(this.chartPane),n=s.top+this.chartPane.offsetHeight,r=s.left+this.chartPane.offsetWidth,a=i.x,o=i.y;if(r<a+t.offsetWidth+10)for(;r<a+t.offsetWidth+10;)a=r-t.offsetWidth-10,t.style.left=a+"px";else t.style.left=a+"px";if(window.innerHeight<t.offsetHeight+o&&(o=o-t.offsetHeight-10),n<o+t.offsetHeight+20?o=o-t.offsetHeight-10:o+=10,document.getElementsByClassName("e-arrow-tip e-tip-bottom").length>0)document.getElementsByClassName("e-arrow-tip e-tip-bottom")[0].style.left=i.x-t.offsetLeft+"px";t.style.visibility="visible"}},e.prototype.getPointerPosition=function(e){var t,i;return sf.base.isNullOrUndefined(sf.base.getValue("pageX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("pageY",e))?sf.base.isNullOrUndefined(sf.base.getValue("touches[0].pageX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("touches[0].pageY",e))?sf.base.isNullOrUndefined(sf.base.getValue("clientX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("clientY",e))||(t=sf.base.getValue("clientX",e)+document.body.scrollLeft+document.documentElement.scrollLeft,i=sf.base.getValue("clientY",e)+document.body.scrollTop+document.documentElement.scrollTop):(t=sf.base.getValue("touches[0].pageX",e),i=sf.base.getValue("touches[0].pageY",e)):(t=sf.base.getValue("pageX",e),i=sf.base.getValue("pageY",e)),{x:t,y:i}},e.prototype.destroy=function(e){this.removeEventListeners(e),e.tooltipModule&&(e.tooltipModule=null)},e}(),c=function(){function i(e,t,i,s){this.toolbarHeight=0,this.chartPreviousScroll={top:0,left:0},this.treegridPreviousScroll={top:0,left:0},window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=s,this.isFromTreeGrid=!1,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this),this.enableRTL=i.enableRtl,this.enableAdaptiveUI=i.enableAdaptiveUI}return i.prototype.getOffsetRect=function(e){var t=e.getBoundingClientRect(),i=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop,s=window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.clientTop||document.body.clientTop||0,r=document.documentElement.clientLeft||document.body.clientLeft||0,a=t.top+i-n,o=this.enableRTL?t.right+s-r:t.left+s-r;return{top:Math.round(a),left:Math.round(o),width:t.width,height:t.height}},i.prototype.getParentElement=function(e,t,i){for(var s=e;s&&!(i?s.id===t:s.classList.contains(t));)s=s.parentElement;return s},i.prototype.destroy=function(){e.prototype.destroy(this),l.prototype.destroy(this),h.prototype.destroy(this),t.prototype.destroy(this),this.element&&(this.element=null),this.treeGrid&&(this.treeGrid=null),this.treeGridElement&&(this.treeGridElement=null),this.toolbarElement&&(this.toolbarElement=null)},i}(),d=function(){function e(e){this.activeElementName=null,this.activeElement=null,this.parent=e}return e.prototype.taskbarFocus=function(e){var t=e.querySelector(".e-gantt-child-taskbar"),n=e.querySelector(".e-gantt-parent-taskbar"),r=e.querySelector(".e-gantt-milestone"),a=e.querySelector(".e-gantt-parent-milestone");if(this.activeElementName=i,r)this.activeElement=r,r.focus(),e.querySelector("."+i).querySelector(".e-gantt-milestone").classList.add(s);else if(a)this.activeElement=a,a.focus(),e.querySelector("."+i).querySelector(".e-gantt-parent-milestone").classList.add(s);else if(t)this.activeElement=t,t.focus(),e.querySelector("."+i).querySelector(".e-gantt-child-taskbar").classList.add(s);else{if(!n)return this.activeElement=null,this.activeElementName=null,"isFirstGridCell";this.activeElement=n,n.focus(),e.querySelector("."+i).querySelector(".e-gantt-parent-taskbar").classList.add(s)}return"isNextTaskbar"},e.prototype.RightLabelFocus=function(e){var t=e.querySelector(".e-right-label-container");return this.activeElementName="e-right-label-container",this.activeElement=t,t.focus(),t.querySelector(".e-label").classList.add(s),"isNextRightLabel"},e.prototype.LeftLabelFocus=function(e){var t=e.querySelector(".e-left-label-container");return this.activeElementName="e-left-label-container",this.activeElement=t,t.focus(),t.querySelector(".e-label").classList.add(s),"isNextLeftLabel"},e}();return{initialize:function(e,t,i,s,n,r){var a={taskMode:i.taskMode,allowTaskbarEditing:i.allowTaskbarEditing,enableRowVirtualization:i.enableRowVirtualization,enableTimelineVirtualization:i.enableTimelineVirtualization,allowSchedulingOnDrag:i.allowSchedulingOnDrag,enableRtl:i.enableRtl,enableAdaptiveUI:i.enableAdaptiveUI},o=new c(e,t,a,s);this.dotnetRef=s;var l={};this.instance=window.sfBlazor.getCompInstance(e),n&&o.element.classList.add("e-gantt-single-timeline");var h=o.element.querySelector("#"+o.element.id+"_Gantt_Splitter");return o.height=l.height=t.offsetHeight,o.isMobileDevice=sf.base.Browser.isDevice,o.width=l.width=t.offsetWidth,o.toolbarElement=t.querySelector("#"+t.id+"_Gantt_Toolbar"),sf.base.isNullOrUndefined(o.toolbarElement)||(o.toolbarHeight=l.toolbarHeight=o.toolbarElement.offsetHeight),document.body.classList.contains("e-bigger")?o.biggerMode=l.biggerMode=!0:this.instance.enableAdaptiveUI&&(o.biggerMode=l.biggerMode=!0,document.body.classList.add("e-bigger")),h.style.height="calc(100% - "+o.toolbarHeight+"px)",l.ganttOffsetSize=this.ChartInitialize(i.timelineWidth,i.milestoneHeight,i.taskbarEvent,i.connectorLineEvent),this.getTreeGrid(e,n,r),l},refreshGantt:function(e){var t=window.sfBlazor.getCompInstance(e);return document.body.classList.contains("e-bigger")?t.biggerMode=!0:t.biggerMode=!1,t.biggerMode},adjustTable:function(e,t){var i,s=e.chartScrollModule,n=s.chartVirtualTable,r=s.chartRootElement.querySelector(".e-virtualtrack");if(e.options.enableRowVirtualization){var a=document.getElementById("treeGrid"+e.element.id+"_gridcontrol"),o=a.querySelector(".e-gridcontent").querySelector(".e-virtualtable"),l=a.querySelector(".e-gridcontent").querySelector(".e-virtualtrack");i=new DOMMatrixReadOnly(n.style.transform);var h=new DOMMatrixReadOnly(o.style.transform);sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(n)||(r.style.height=l.style.height,""===n.style.transform?n.style.transform=o.style.transform:n.style.transform="translate("+i.m41+"px,"+h.m42+"px)")}if(e.options.enableTimelineVirtualization){var c=3*e.element.offsetWidth;i=new DOMMatrixReadOnly(n.style.transform);var d=t<c?0:t<i.m41?t-c:i.m41;r.style.width=s.timelineVirtualTrack.offsetWidth+"px",n.style.transform="translate("+d+"px,"+i.m42+"px)",sf.base.isNullOrUndefined(s.dependencyViewContainer)||(s.dependencyViewContainer.style.left=-d+"px")}},setChartHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e),s=0,n={chartHeight:0,viewPortHeight:0},r=i.chartScrollModule,a=i.element.querySelector(".e-holiday-container"),o=i.element.querySelector(".e-gridcontent").querySelector(".e-virtualtrack"),l=i.element.querySelector(".e-gridcontent").querySelector(".e-content");if(l.setAttribute("tabindex","0"),i.element.querySelector(".e-gridcontent").querySelector(".e-table").setAttribute("role","treegrid"),sf.base.isNullOrUndefined(o)&&(o=i.element.querySelector("#treeGrid"+i.element.id+"_gridcontrol_content_table")),o&&o.clientHeight){var h=i.element.querySelector("#treeGrid"+i.element.id+"_gridcontrol"),c=o.clientHeight+"px",d=r.chartRootElement;r.chartTaskTable=d.querySelector(".e-task-table");var u=r.chartTaskTable.clientHeight,f=d.getElementsByClassName("e-chart-rows-container")[0],p=h.querySelectorAll(".e-content")[0].clientHeight,m=r.timelineHeaderElement;if(p<o.clientHeight?(s=o.clientHeight,f.style.height=i.options.enableRowVirtualization?u+"px":c,m.style.width="calc(100% - "+(i.isMobileDevice?0:i.scrollWidth)+"px)",l.style.cssText+="width: calc(100% + "+(i.scrollWidth+1)+"px);",this.viewPortHeight=p):(s=p,f.style.height=r.element.clientHeight-1+"px",m.style.width="100%",l.style.cssText+="width: calc(100% + 1px);",this.viewPortHeight=f.clientHeight),n.chartHeight=i.options.enableRowVirtualization?s-u:s,n.viewPortHeight=this.viewPortHeight,document.body.classList&&document.body.classList.contains("e-bigger"))r.chartRootElement.style.height="calc(100% - "+r.timelineHeaderElement.offsetHeight+"px)",i.element.querySelector(".e-gridcontent").style.height="calc(100% - "+r.timelineHeaderElement.offsetHeight+"px)"}return!sf.base.isNullOrUndefined(i)&&i.enableRTL&&(i.element.querySelector(".e-gridheader").style.paddingLeft="0"),this.adjustTable(i,t),sf.base.isNullOrUndefined(a)||r.updateTopPosition(),r.updateScrollTopPosition(),n},treegridHeaderAlign:function(e,t){if(t){var i=e.element.querySelector(".e-gridheader").offsetHeight;e.element.querySelector(".e-gridcontent").style.height="calc(100% - "+i+"px)"}},getTreeGrid:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);this.hideTreeGridScrollBar(s,i),sf.base.isNullOrUndefined(s.treeGridElement)||(this.instance.treeGrid=s.treeGridElement.blazor_instance),this.treegridHeaderAlign(s,t)},hideTreeGridScrollBar:function(e,i){e.treeGridElement=e.element.querySelector("#treeGrid"+e.element.id);var s=e.treeGridElement.querySelector(".e-content"),n=s.querySelector(".e-table"),r=e.treeGridElement.querySelector(".e-headercontent"),a=e.treeGridElement.querySelector(".e-gridcontent .e-movablescrollbar"),o=sf.base.isNullOrUndefined(a)?"overflow: auto;":"overflow: hidden auto;";s.style.cssText+=o,r.style.width="calc(100% + 1px)";i?(e.treeGridModule=new t(e,s),e.scrollWidth=this.getScrollbarWidth(e.element),s.clientHeight>n.clientHeight?s.style.cssText+="width: calc(100% + 1px);":s.clientHeight<n.clientHeight?(0===e.scrollWidth&&!sf.base.isNullOrUndefined(window.navigator.userAgent)&&window.navigator.userAgent.toLocaleLowerCase().includes("windows")&&"mozilla"===sf.base.Browser.info.name&&(e.scrollWidth=17),e.isMobileDevice?s.style.cssText+="width: calc(100% + 1px); scrollbar-width: none);":s.style.cssText+="width: calc(100% + "+(e.scrollWidth+1)+"px);"):s.classList.add("e-gantt-scroll-padding")):(s&&(s.style.height="100%",e.element.querySelector(".e-gridcontent").style.height="calc(100% - "+e.element.querySelector(".e-gridheader").offsetHeight+"px)",e.treeGridModule=new t(e,s)),e.scrollWidth=this.getScrollbarWidth(e.element),s.clientHeight>n.clientHeight?s.style.cssText+="width: calc(100% + 1px);":s.clientHeight<n.clientHeight?(e.scrollWidth=e.isMobileDevice?16:e.scrollWidth,s.style.cssText+="width: calc(100% + "+(e.scrollWidth+1)+"px);"):s.classList.add("e-gantt-scroll-padding"))},getScrollbarWidth:function(e){var t=e,i=document.createElement("div");i.style.visibility="hidden",i.style.overflow="scroll",i.style.msOverflowStyle="scrollbar";var s=document.createElement("div");i.appendChild(s),t.appendChild(i);var n=i.offsetWidth-s.offsetWidth;return i.parentNode.removeChild(i),n},getOffsetLeft:function(){var e=this.instance.element.getBoundingClientRect(),t=window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft,i=document.documentElement.clientLeft||document.body.clientLeft||0,s=e.left+t-i;return Math.round(s)},tooltipOpened:function(e){this.instance.tooltipModule.tooltipOpened(e)},predecessorTooltipOpened:function(e){this.instance.tooltipModule.predecessorTooltipOpened(e)},setTooltipVisibility:function(){var e=document.getElementById(this.instance.element.id+"_editingtooltip_content");sf.base.isNullOrUndefined(e)||(e.style.visibility="visible")},removeEmptyRowElement:function(){sf.base.isNullOrUndefined(this.instance.taskbarEditModule.chartEmptyRowElement)||(sf.base.remove(this.instance.taskbarEditModule.chartEmptyRowElement),this.instance.taskbarEditModule.chartEmptyRowElement=null)},ChartInitialize:function(t,i,s,n){return this.instance.totalTimelineWidth=t,this.instance.isTaskbarEditingEventMapped=s,this.instance.isConnectorLineEventMapped=n,this.instance.keyboardModule=new d(this.instance),this.instance.options.allowTaskbarEditing&&(this.instance.taskbarEditModule=new l(this.instance),this.instance.taskbarEditModule.milestoneHeight=i),this.instance.tooltipModule=new h(this.instance),this.instance.chartScrollModule=new e(this.instance,this.instance.element),this.instance.spinnerShown=!1,{viewPortHeight:this.instance.element.querySelector(".e-gridcontent").querySelector(".e-content").clientHeight,chartWidth:this.instance.element.querySelector(".e-gantt-chart-pane").offsetWidth}},UpdateScroll:function(e){this.scrollBarElement=this.instance.element.querySelector(".e-chart-scroll-container"),this.instance.chartScrollModule.previousCount=-1;var t=this.scrollBarElement.scrollLeft;t=this.instance.enableRTL&&-1===Math.sign(t)?-t:t,(this.scrollBarElement.offsetWidth<e||t>e)&&(this.scrollBarElement.scrollLeft=this.instance.enableRTL?-e:e)},chartFocusOutHandler:function(e){var t=this.instance.element.querySelector(".e-chart-row-cell[data-uid="+e+"]"),i=t.querySelector("."+s)?t.querySelector("."+s).parentElement:null;i&&(i.querySelector(".e-label").classList.remove(s),i.blur())},focusOutHandler:function(e){var t=e.querySelector("."+s);sf.base.isNullOrUndefined(t)||t.classList.remove(s),sf.base.isNullOrUndefined(e.classList)||e.classList.remove(s)},resetPrivateProperties:function(){this.instance.taskbarEditModule.tappedPoint=null},setActiveElement:function(e,t){this.instance.keyboardModule.activeElement=e,this.instance.keyboardModule.activeElementName=t},tabFocusHandler:function(e,t,a,o){var l=this.instance.element.querySelector(".e-chart-row-cell[data-uid="+e+"]"),h="isNextLeftLabel",c=l.querySelector("."+s)?l.querySelector("."+s).parentElement:null;if("ArrowDown"!==o&&"ArrowUp"!==o||null!==c){if(c){if(null===c&&null!=this.instance.keyboardModule.activeElement){if("Tab"===o||"ArrowRight"===o){switch(this.instance.keyboardModule.activeElementName){case"e-left-label-container":h=this.instance.keyboardModule.taskbarFocus(l);break;case i:h=this.instance.keyboardModule.RightLabelFocus(l);break;default:this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,h="isFirstGridCell"}return h}switch(this.instance.keyboardModule.activeElementName){case"e-left-label-container":this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,h="isLastGridCell";break;case i:h=this.instance.keyboardModule.LeftLabelFocus(l);break;default:h=this.instance.keyboardModule.taskbarFocus(l)}return h}if(c.classList.contains(n)){if(a){if("End"===o)return this.endKeyHandler(l,c,h,o,a);var d=c.querySelector(".e-label");return d&&d.classList.remove(s),c.blur(),this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isLastGridCell"}return this.instance.keyboardModule.taskbarFocus(l)}if(c.classList.length){if(2===c.classList.length){if("End"===o||"Home"===o)l.querySelector(".e-gantt-multi-taskbar")&&(this.instance.keyboardModule.activeElement.classList.remove(s),h="isLastGridCell");else c.classList.contains("e-gantt-unscheduled-task")&&(a?l.querySelector(".e-left-label-inner-div")?h=this.instance.keyboardModule.LeftLabelFocus(l):(this.instance.keyboardModule.activeElement.classList.remove(s),h="isLastGridCell"):"Tab"===o&&(this.instance.keyboardModule.activeElement.classList.remove(s),h="isFirstGridCell"));return h}return c.classList.contains(r)?a?"End"===o||"Home"===o?(c.contains(c.querySelector(".e-label"))?c.querySelector(".e-label").classList.remove(s):this.instance.keyboardModule.activeElement.classList.remove(s),"isLastGridCell"):this.instance.keyboardModule.taskbarFocus(l):"ArrowRight"===o||"Tab"===o?(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isFirstGridCell"):(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isLastGridCell"):""}return"End"===o?this.endKeyHandler(l,c,h,o,a):l.querySelector(".e-segmented-taskbar")?this.segmentedTaskbarFocus(c,l,o,a):a?"Home"===o?(this.instance.keyboardModule.activeElement.classList.remove(s),"isLastGridCell"):l.querySelector(".e-left-label-inner-div")?this.instance.keyboardModule.LeftLabelFocus(l):(this.clearActiveElement(),"isLastGridCell"):l.querySelector(".e-right-label-inner-div")?this.instance.keyboardModule.RightLabelFocus(l):"ArrowRight"===o||"Tab"===o?(this.clearActiveElement(),"isFirstGridCell"):(this.clearActiveElement(),"isLastGridCell")}return h="End"===o?this.endKeyHandler(l,c,h,o,a):!a&&"ArrowLeft"!==o&&l.querySelector("."+n)?this.instance.keyboardModule.LeftLabelFocus(l):a&&l.querySelector("."+r)?this.instance.keyboardModule.RightLabelFocus(l):this.instance.keyboardModule.taskbarFocus(l)}if(null!=this.instance.keyboardModule.activeElement)switch(this.focusOutHandler(this.instance.keyboardModule.activeElement),this.instance.keyboardModule.activeElementName){case i:this.instance.keyboardModule.taskbarFocus(l);break;case"e-left-label-container":this.instance.keyboardModule.LeftLabelFocus(l);break;default:this.instance.keyboardModule.RightLabelFocus(l)}else this.instance.keyboardModule.taskbarFocus(l);return""},endKeyHandler:function(e,t,i,a,o){var l=e.lastElementChild,h=e.querySelector("."+r);if(l)if(e.querySelector(".e-segmented-taskbar")&&!l.contains(h))i=this.segmentedTaskbarFocus(t,e,a,o);else if(e.querySelectorAll(".e-gantt-multi-taskbar").length>0){var c=Array.from(e.querySelectorAll(".e-gantt-multi-taskbar"));i=this.setFocusToMultiTaskbar(c[c.length-1])}else h&&l.contains(h)&&""!==h.innerText.trim()?i=this.instance.keyboardModule.RightLabelFocus(e):t&&t.classList.contains(n)?i=this.instance.keyboardModule.taskbarFocus(e):t?(this.instance.keyboardModule.activeElement.classList.remove(s),i="isLastGridCell"):i=this.instance.keyboardModule.taskbarFocus(e);return i},updateScrollLeft:function(e,t,i){var s=this.instance.element.querySelector(".e-chart-scroll-container");if(null!=i){var n=this.instance.element.querySelector(".e-row").offsetHeight,r=i*n;(s.offsetHeight-n/2+s.scrollTop<r||s.scrollTop>r)&&(s.scrollTop=r)}if(t=t>0?t:0,t=s.scrollWidth<=t?s.scrollWidth:t,s.offsetWidth+s.scrollLeft<t||s.scrollLeft>t){var a=t-50;s.scrollTo({left:this.instance.enableRTL?-a:a,behavior:"smooth"})}},exportSave:function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),s=new Uint8Array(i.length),n=0;n<i.length;n++)s[parseInt(n.toString(),10)]=i.charCodeAt(n);var r=new Blob([s.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(r,e)}else{var a=document.createElement("a");a.download=e,a.href="data:application/octet-stream;base64,"+t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},segmentedTaskbarFocus:function(e,t,i,n){var a=t.querySelectorAll(".e-segmented-taskbar"),o=null!=e?e.querySelector(".e-segmented-taskbar."+s):null;if(o){var l=parseInt(o.getAttribute("data-segment-index"),10);if(n)if(0===l){if("Home"===i)return this.instance.keyboardModule.activeElement.classList.remove(s),"isLastGridCell";if("End"!==i)return t.querySelector(".e-left-label-inner-div")?this.instance.keyboardModule.LeftLabelFocus(t):(this.clearActiveElement(),"isLastGridCell");this.setFocusToSegment(a.item(a.length-1))}else if("End"===i){if(l===a.length-1)return this.instance.keyboardModule.activeElement.classList.remove(s),"isLastGridCell";if(t.querySelector("."+r))return this.instance.keyboardModule.RightLabelFocus(t);this.setFocusToSegment(a.item(a.length-1))}else{if("Home"===i)return this.instance.keyboardModule.activeElement.classList.remove(s),"isLastGridCell";this.setFocusToSegment(a.item(l-1))}else{if(l===a.length-1)return t.querySelector(".e-right-label-inner-div")?this.instance.keyboardModule.RightLabelFocus(t):"ArrowRight"===i||"Tab"===i?(this.clearActiveElement(),"isFirstGridCell"):(this.clearActiveElement(),"isLastGridCell");this.setFocusToSegment(a.item(l+1))}}else if("End"===i){if(t.querySelector(".e-right-label-inner-div"))return this.instance.keyboardModule.RightLabelFocus(t);this.setFocusToSegment(a.item(a.length-1))}},setFocusToSegment:function(e){e.classList.add(s),this.instance.keyboardModule.activeElement=e,this.instance.keyboardModule.activeElementName=a,e.focus()},setFocusToMultiTaskbar:function(e){e.classList.add(s),this.instance.keyboardModule.activeElement=e,this.instance.keyboardModule.activeElementName=e,e.focus()},clearActiveElement:function(){this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);void 0!==t&&null!==t.dotNetRef&&t.destroy()}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js`).then(()=>{sfBlazor.loadDependencies('sfgantt');})})();