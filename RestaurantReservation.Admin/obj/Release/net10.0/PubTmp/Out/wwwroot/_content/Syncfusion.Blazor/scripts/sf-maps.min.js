/*!*  filename: sf-maps.min.js 
*     version : 31.2.12 
*     Copyright Syncfusion Inc. 2001 - 2025. All rights reserved. 
*     Use of this code is subject to the terms of our license.
*     A copy of the current license can be obtained at any time by e-mailing 
*     licensing@syncfusion.com. Any infringement will be prosecuted under 
*     applicable laws. 
*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"./bundles/sf-maps.js":function(e,t,i){"use strict";i.r(t);i("./modules/sf-maps.js")},"./modules/sf-maps.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Maps=function(){"use strict";var e=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function a(e){try{r(n.next(e))}catch(e){o(e)}}function l(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((n=n.apply(e,t||[])).next())}))},t=function(e,t){var i,n,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},i=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=function(e,t){this.x=e,this.y=t};function s(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",e),t}function o(e,t,i){var n="";switch(e){case"Balloon":n="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";break;case"Cross":n="M "+i.x+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" M "+(i.x-t.width/2)+" "+i.y+" L "+(i.x+t.width/2)+" "+i.y;break;case"Diamond":n="M "+i.x+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+i.y+" L "+i.x+" "+(i.y+t.height/2)+" L "+(i.x-t.width/2)+" "+i.y+" Z";break;case"Star":n="M "+(i.x+t.width/3)+" "+(i.y-t.height/2)+" L "+(i.x-t.width/2)+" "+(i.y+t.height/6)+" L "+(i.x+t.width/2)+" "+(i.y+t.height/6)+" L "+(i.x-t.width/3)+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" L "+(i.x+t.width/3)+" "+(i.y-t.height/2)+" Z";break;case"Triangle":n="M "+i.x+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+(i.y+t.height/2)+" L "+(i.x-t.width/2)+" "+(i.y+t.height/2)+" Z";break;case"HorizontalLine":n=" M "+(i.x-t.width/2)+" "+i.y+" L "+(i.x+t.width/2)+" "+i.y;break;case"VerticalLine":n="M "+i.x+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2);break;case"InvertedTriangle":n="M "+(i.x-t.width/2)+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" Z";break;case"Pentagon":for(var s=void 0,o=void 0,a=0;a<5;a++)s=t.width/2*Math.cos(Math.PI/180*(72*a)),o=t.height/2*Math.sin(Math.PI/180*(72*a)),n+=(0===a?"M ":"L ")+(i.x+s)+" "+(i.y+o);n+=" Z"}return n}var a=function(){function a(e,t,i,n){this.previousMarkerId="",this.previousId="",this.moveClientX=0,this.moveClientY=0,this.clientX=0,this.clientY=0,this.isPinch=!1,this.enableSelectionZoom=!1,this.allowPanning=!1,this.isInteracted=!1,this.isPanning=!1,this.isPan=!0,this.zoomClick=!1,this.mouseClick=!1,this.position=null,this.height=0,this.width=0,this.mapsBorderWidth=0,this.toolbarButtonOpacity=1,this.toolbarShapeOpacity=1,this.markerClusterExpandCheck=!1,this.svgCreated=!1,this.zoomIn=1,this.zoomOut=1,this.scaleFactor=1,this.factorCount=0,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.lastScale=1,this.clusterLocation=[],this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[],this.tileTranslatePoint=null,this.isToolbarTooltip=!1,this.marginTop=0,this.marginLeft=0,this.isPinchZoomed=!1,this.panComplete=!1,this.pinchComplete=!1,this.mouseMoveId="",this.isReset=!1,window.sfBlazor=window.sfBlazor,this.tapCount=0,this.isMarkerDrag=!1,this.allowMarkerDragStartEvent=!1,this.allowAnimationCompleteEvent=!1,this.allowMarkerMouseLeaveEvent=!1,this.allowRightClickEvent=!1,this.allowDoubleClickEvent=!1,this.allowClickEvent=!1,this.pinchTileZoomScale=0,this.isCancellation=!1,this.pinchZoomScale=1,this.isTouchEndProcessing=!1,this.isResize=!1,this.isAnimationComplete=!1,this.id=e,this.pinchDistance=null,this.element=t,this.dotNetRef=n,this.layerCount=i.layerCount,this.clusterSettings=i.markerCluster?JSON.parse(i.markerCluster):null,this.dataSource=i.dataSource?JSON.parse(i.dataSource):null,this.polygonDataSource=i.polygonDataSource?JSON.parse(i.polygonDataSource):null,this.shapeTranslatePoint=i.shapeTranslatePoint?i.shapeTranslatePoint:null,this.shapeBorderWidth=i.shapeBorderWidth,this.projectionType=i.projectionType,this.options=i,this.options.layerHighlightSettings=JSON.parse(this.options.layerHighlightSettings),this.options.markerHighlightSettings=JSON.parse(this.options.markerHighlightSettings),this.options.bubbleHighlightSettings=JSON.parse(this.options.bubbleHighlightSettings),this.options.navigationHighlightSettings=JSON.parse(this.options.navigationHighlightSettings),this.options.polygonHighlightSettings=JSON.parse(this.options.polygonHighlightSettings),this.options.selectionSettings=JSON.parse(this.options.selectionSettings),this.marginLeft=0,this.urlTemplate=i.urlTemplate?i.urlTemplate:null,this.isToolbarTooltip=!1,this.isTouch=!1,this.pinchFactor=1,this.lastScale=1,this.touchStartList=[],this.touchMoveList=[],this.dataId=e,window.sfBlazor.setCompInstance(this)}return a.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"wheel",this.mapMouseWheel.bind(this),this),sf.base.EventHandler.add(this.element,"touchmove mousemove",this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,"touchend mouseup mouseleave",this.mouseUp.bind(this),this),sf.base.EventHandler.add(this.element,"touchstart mousedown",this.mouseDown.bind(this),this),sf.base.EventHandler.add(this.element,"click pointerdown",this.click.bind(this),this),sf.base.EventHandler.add(this.element,"dblclick",this.doubleClick.bind(this),this),sf.base.EventHandler.add(this.element,"contextmenu",this.rightClick.bind(this),this),sf.base.EventHandler.add(this.element,"keydown",this.keyDown.bind(this),this),sf.base.EventHandler.add(this.element,"keyup",this.keyUp.bind(this),this),window.addEventListener("resize",this.reSize.bind(this))},a.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"wheel",this.mapMouseWheel),sf.base.EventHandler.remove(this.element,"touchmove mousemove",this.mouseMove),sf.base.EventHandler.remove(this.element,"touchend mouseup mouseleave",this.mouseUp),sf.base.EventHandler.remove(this.element,"touchstart mousedown",this.mouseDown),sf.base.EventHandler.remove(this.element,"click pointerdown",this.click),sf.base.EventHandler.remove(this.element,"dblclick",this.doubleClick),sf.base.EventHandler.remove(this.element,"contextmenu",this.rightClick),sf.base.EventHandler.remove(this.element,"keydown",this.keyDown),sf.base.EventHandler.remove(this.element,"keyup",this.keyUp),window.removeEventListener("resize",this.reSize.bind(this))},a.prototype.destroy=function(){this.unwireEvents(),this.dotNetRef=null},a.prototype.keyUp=function(e){var t=e.target.id;if(this.options.enablePanning&&this.isPanning){this.isPanning=!1;var i=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(this.currentTiles)&&!sf.base.isNullOrUndefined(i)&&this.currentTiles.childElementCount!==i.childElementCount&&this.currentTiles.childElementCount<i.childElementCount)for(var n=i.childElementCount-1;n>=this.currentTiles.childElementCount;n--)i.removeChild(i.children[n]);this.currentTiles=null,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1)}if("Tab"===e.code&&t.indexOf("_LayerIndex_")>-1){var s=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10);if(t.indexOf("shapeIndex")>-1){this.targetElementPath=e.target;var o=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10);t.indexOf("shapeIndex")>-1&&this.options.layerHighlightSettings[s]&&this.options.layerHighlightSettings[s].Enable&&(this.removeAllHighlight(),this.targetElementPath.classList.contains("mapShapeSelection")||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",s,o,t))}}},a.prototype.markerLineAnimation=function(e){if(this.isTileMap){for(var t=0;t<this.layerCount;t++){var i=document.getElementById(this.element.id+"_LayerIndex_"+t+"_Markers_Template_Group"),n=document.getElementById(this.element.id+"_LayerIndex_"+t+"_DataLabel_Group"),s=document.getElementById(this.element.id+"_LayerIndex_"+t);sf.base.isNullOrUndefined(i)||(i.style.display=e),sf.base.isNullOrUndefined(n)||(n.style.display=e),sf.base.isNullOrUndefined(s)||(s.style.display=e)}""===e&&this.removeElement(this.element.id+"_tiles")}},a.prototype.triggerEnableZoom=function(e,t,i){e>=1&&(this.scaleFactor=e,this.removeCluster(),this.tileAnimation(t,i))},a.prototype.tileAnimation=function(e,t,i,n,s){var o=this,a=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&this.animationDuration>0){this.isAnimationComplete=!0;var l=document.createElement("div");l.id=this.element.id+"_tiles",l.setAttribute("style","position: absolute; left: "+this.areaRect.x+"px; top: "+this.areaRect.y+"px; height: "+this.areaRect.height+"px; width: "+this.areaRect.width+"px; overflow: hidden; z-index: 0;");var r=document.getElementById(this.element.id+"_tile_parent");r.parentNode.insertBefore(l,r.nextSibling),this.markerLineAnimation("none");var h=document.getElementById(this.element.id+"_tiles");h.childElementCount>0&&h.removeChild(h.children[0]);var d=0,p=0,c="2";if(0===e.indexOf("ZoomOut")||"Reset"===e?(d=0,p=document.getElementById(this.element.id+"_tile_parent").getClientRects()[0].height/4,c=0===e.indexOf("ZoomOut")?"0.5":"0.2"):"wheel"===e?(d=this.baseMapBounds.availableSize.width/2-n.x-10,p=-n.y):(d=-10,p=-(this.baseMapBounds.mapsAreaRect.height/2+11.5)),a){a.style.transition=this.animationDuration+"ms",a.style.transform="translate("+d+"px, "+p+"px) scale("+c+")",clearTimeout(this.tileCountTimer);var g=this.tileZoomLevel=Math.round(this.scaleFactor);this.getTileTranslatePosition(e.indexOf("ZoomIn")>-1||"wheel"===e?g-1:g+1,g,"wheel"===e?{x:n.x,y:n.y}:{x:this.baseMapBounds.availableSize.width/2,y:this.baseMapBounds.availableSize.height/2},e),this.translatePoint.x=(this.tileTranslatePoint.x-.01*g)/Math.pow(2,g-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*g)/Math.pow(2,g-1),this.isResize&&(a.style.transition="none",this.isResize=!1),this.tileCountTimer=setTimeout((function(){if(o.dotNetRef){h.appendChild(a);var l=document.getElementById(o.element.id+"_animated_tiles");r.appendChild(l),l.style.transition="",a.style.transform="",o.markerLineAnimation(""),o.scaleFactor=g,o.isResize=o.isAnimationComplete=!1,i?o.dotNetRef.invokeMethodAsync("MouseWheelZoom",n.x,n.y,"touchend"===t?1:s.which,o.options.zoomOnClick?"click":"doubleClick"):o.dotNetRef.invokeMethodAsync("TriggerZoom",e,t,o.scaleFactor)}}),this.isResize?0:this.animationDuration)}}else this.dotNetRef&&(i?this.dotNetRef.invokeMethodAsync("MouseWheelZoom",n.x,n.y,"touchend"===t?1:s.which,this.options.zoomOnClick?"click":"doubleClick"):this.dotNetRef.invokeMethodAsync("TriggerZoom",e,t,null))},a.prototype.keyDown=function(e){var t=1,i=e.type,n=e.target.id;this.isReset=this.isResize=!1;var s=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(s)&&(this.currentTiles=s.cloneNode(!0)),"+"===e.key||"Equal"===e.code)this.options.enableZoom&&(this.isInteracted=!0,e.preventDefault(),this.mergeSeparation(),t=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,this.triggerEnableZoom(t,"ZoomIn",i));else if("-"===e.key||"Minus"===e.code)this.options.enableZoom&&(this.isInteracted=!0,e.preventDefault(),this.mergeSeparation(),t=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,t=this.options.maxZoom>=t&&this.options.minZoom<=t?t:this.options.minZoom,this.factorCount++,this.triggerEnableZoom(t,"ZoomOut",i));else if(82===e.keyCode)this.options.enableZoom&&(this.isInteracted=!0,e.preventDefault(),this.mergeSeparation(),this.zoomClick=!1,"Reset",this.enableSelectionZoom=!1,this.isReset=!0,this.scaleFactor=t=this.options.minZoom,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.tileAnimation("Reset",i));else if("ArrowUp"!==e.code&&"ArrowDown"!==e.code||!this.options.enablePanning)if("ArrowLeft"!==e.code&&"ArrowRight"!==e.code||!this.options.enablePanning){if("Enter"===e.code)if(e.preventDefault(),(n.indexOf("_Left_Page_Rect")>-1||n.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var o=document.getElementById(this.id+"_Paging_Text").textContent,a=(o=o.trim().replace("\n","")).split("/").map(Number);n.indexOf("_Left_Page_Rect")>-1?document.getElementById(n).style.outlineColor=a[0]+1!==a[1]?"":"transparent":document.getElementById(n).style.outlineColor=a[0]!==a[1]+1?"":"transparent",this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",n.indexOf("_Left_Page_Rect")>-1?1:0)}else if(n.indexOf("_LayerIndex_")>-1&&n.indexOf("shapeIndex")>-1){var l=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);this.shapeSelection(n,l)}}else this.isPanning=!this.isAnimationComplete,e.preventDefault(),this.mergeSeparation(),this.clientY=0,this.moveClientX=this.areaRect.width/7,this.panning("ArrowLeft"===e.code?-this.moveClientX:this.moveClientX,this.clientY,e.layerX,e.layerY,this.scaleFactor,!0),this.clientX=this.moveClientX;else this.isPanning=!this.isAnimationComplete,e.preventDefault(),this.mergeSeparation(),this.moveClientY=this.areaRect.height/7,this.clientX=0,this.panning(this.clientX,"ArrowUp"===e.code?-this.moveClientY:this.moveClientY,e.layerX,e.layerY,this.scaleFactor,!0),this.clientY=this.moveClientY;this.setToolbarButtonColor(t,this.isReset?this.element.id+"_Zooming_":this.mouseMoveId),sf.base.Browser.isDevice||this.setToolbarButtonColor(t,this.mouseMoveId),this.clientX=this.moveClientX,this.clientY=this.moveClientY},a.prototype.shapeSelection=function(e,t){var i=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),n=-1!==e.indexOf("_dataIndex_")?parseInt(e.split("_dataIndex_")[1].split("_")[0],10):null;this.options.selectionSettings&&this.options.selectionSettings[t]&&this.options.selectionSettings[t].Enable&&this.removeAllHighlight(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("SelectMap",e,t,i,"Shape",n)},a.prototype.rightClick=function(e){if(this.allowRightClickEvent){var t=e.target.id,i=this.getMousePosition(e.pageX,e.pageY);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseClick",i.x,i.y,document.getElementById(t),e.layerX,e.layerY)}},a.prototype.reSize=function(){var e,t,i,n,s;if(this.mergeSeparation(),null!==this.element){var o=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(o)){if(o.style.display="none",this.isTileMap){this.isResize=!0,(i=document.getElementById(this.element.id+"_tile_parent")).style.display="none",(n=document.getElementById(this.element.id+"_Secondary_Element")).style.display="none";for(var a=0;a<this.element.children.length;a++)this.element.children[a].id===this.element.id+"_svg"&&(this.element.children[a].style.display="none",s=a)}var l=this.element.getBoundingClientRect();e=l.width,t=l.height,o.style.removeProperty("display"),sf.base.isNullOrUndefined(i)||(i.style.removeProperty("display"),n.style.removeProperty("display"),this.element.children[s].style.removeProperty("display"))}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResize",e,t))},a.prototype.doubleClick=function(e){if(this.isResize=!1,!sf.base.isNullOrUndefined(this.dotNetRef)){var t=e.target.id;if(2===e.detail&&this.options.enableZoom&&this.options.doubleClickZoom&&(-1===t.indexOf("MarkerIndex")||this.options.zoomOnMarkerClick)){this.isInteracted=!0;var i=document.getElementById(this.id).getBoundingClientRect(),n=this.scaleFactor+1,s=document.getElementById(this.element.id+"_LayerCollections"),o=e.target.closest("#"+this.element.id+"_AnnotationGroup"),a=!(t.includes("Zooming_ToolBar")||t.includes("Legend")||o)&&(!t.includes("MarkerIndex")||this.options.zoomOnMarkerClick);if(s&&n>=1&&a){this.scaleFactor=n,this.removeCluster();var l={x:e.pageX-i.x,y:e.pageY-i.y};this.tileAnimation("wheel",e.type,!0,l,e)}}var r=this.getMousePosition(e.pageX,e.pageY);if("DoubleClick"===this.options.tooltipDisplayMode){var h=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10);if(t.indexOf("shapeIndex")>-1){var d=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,r.x,r.y,h,d,"Shape",0)}else if(t.indexOf("_MarkerIndex_")>-1&&-1===t.indexOf("_cluster_")){var p=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),c=parseInt(t.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,r.x,r.y,h,c,"Marker",p)}else if(t.indexOf("_BubbleIndex_")>-1){p=parseInt(t.split("_BubbleIndex_")[1].split("_")[0],10),c=parseInt(t.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,r.x,r.y,h,c,"Bubble",p)}else if(t.indexOf("_PolygonIndex_")>-1){var g=parseInt(t.split("_PolygonIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,r.x,r.y,h,-1,"Polygon",g)}else-1===t.indexOf("_shapeIndex_")&&-1===t.indexOf("_MarkerIndex_")&&-1===t.indexOf("_BubbleIndex_")&&-1===t.indexOf("_PolygonIndex_")&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",r.x,r.y,0,0,"",0)}this.allowDoubleClickEvent&&this.dotNetRef.invokeMethodAsync("TriggerDoubleClick",r.x,r.y,document.getElementById(t),e.layerX,e.layerY)}},a.prototype.mapMouseWheel=function(e){this.mergeSeparation();document.getElementById(this.element.id).getBoundingClientRect();var t=sf.base.isNullOrUndefined(e.wheelDelta)?-e.deltaY:e.wheelDelta,i="ZoomIn"===(t/120>0?"ZoomIn":"ZoomOut")?this.scaleFactor+1:this.scaleFactor-1,n=0===i;this.scaleFactor=i=this.options.maxZoom>=i&&this.options.minZoom<=i?i:i>this.options.maxZoom?this.options.maxZoom:this.options.minZoom,this.isReset=!1,this.setToolbarButtonColor(i,sf.base.Browser.isDevice?this.element.id+"_Zooming_":e.target.id);var s=this.getMousePosition(e.pageX,e.pageY);document.getElementById(this.element.id+"_LayerCollections")&&this.options.enableZoom&&this.options.enableMouseWheelZoom&&i>=1&&!n&&(this.isInteracted=!0,e.preventDefault(),this.scaleFactor=i,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("MouseWheelZoom",s.x,s.y,t,"wheelZoom"))},a.prototype.getGeoLocation=function(e,t,i){var n=this.calculateFactor(i),s=this.shapeTranslatePoint.x*this.scaleFactor,o=this.shapeTranslatePoint.y*this.scaleFactor,a=Math.min(this.areaRect.height,this.areaRect.width)*n*this.scaleFactor,l=Math.min(Math.max(e-s,0),a-1)/a-.5,r=.5-Math.min(Math.max(t-o,0),a-1)/a;return{latitude:90-360*Math.atan(Math.exp(2*-r*Math.PI))/Math.PI,longitude:360*l}},a.prototype.getClickLocation=function(e,t){var i=null;if(!this.isTileMap&&"Normal"===this.geometryType[this.markerDragArgument.layerIndex]&&!sf.base.isNullOrUndefined(this.markerDragArgument)){var n=this.calculateFactor(this.markerDragArgument.layerIndex),s=document.getElementById(this.element.id),o=s.getBoundingClientRect(),a=s.offsetTop-o.top,l=s.offsetLeft-o.left,r=document.getElementById(this.element.id+"_LayerIndex_"+this.markerDragArgument.layerIndex).getBoundingClientRect(),h={x:e+this.positionX>r.left?Math.abs(r.left-(e+this.positionX))-l:0,y:t+this.positionY>r.top?Math.abs(r.top-(t+this.positionY))-a:0},d=Math.abs(-this.baseMapBounds.longitudeMin*(n*this.scaleFactor)),p=this.convertGeoToPoint(0,0,n,this.markerDragArgument.layerIndex);i={latitude:Math.abs(this.baseMapBounds.latitudeMax-h.y/(n*this.scaleFactor)),longitude:Math.abs(h.x/(n*this.scaleFactor)+this.baseMapBounds.longitudeMin)},this.baseMapBounds.longitudeMin<0&&d>h.x&&(i.longitude=-i.longitude),(p.y*this.scaleFactor<h.y||this.baseMapBounds.latitudeMin<0&&this.baseMapBounds.latitudeMax<0)&&(i.latitude=-i.latitude)}return this.isTileMap?this.pointToLatLong(e-this.areaRect.x,t-this.areaRect.y):sf.base.isNullOrUndefined(i)?this.getGeoLocation(e,t,this.markerDragArgument.layerIndex):i},a.prototype.getMarkerClickLocation=function(e,t,i,n,s){var o=this.markerDragArgument,a=this.calculateFactor(o.layerIndex),l=document.getElementById(o.targetId);this.changeCursorPointer(o.targetId);var r=this.getClickLocation(e,t),h=this.isTileMap?this.convertTileLatLongToPoint({x:r.longitude,y:r.latitude},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(r.latitude,r.longitude,a,o.layerIndex),d=this.shapeTranslatePoint,p=this.isTileMap?h.x:(h.x+d.x)*this.scaleFactor,c=this.isTileMap?h.y:(h.y+d.y)*this.scaleFactor,g=this.markerSettings[o.layerIndex][o.markerIndex];if("Balloon"===this.dataSource[o.layerIndex][o.markerIndex][o.dataIndex][this.markerSettings[o.layerIndex][o.markerIndex].ShapeValuePath]||"Balloon"===g.Type?l.setAttribute("transform","translate( "+(p-g.Width/2)+" "+(c-g.Height)+" )scale("+g.Width/30+" "+g.Height/30+" )"):"Rectangle"===this.dataSource[o.layerIndex][o.markerIndex][o.dataIndex][this.markerSettings[o.layerIndex][o.markerIndex].ShapeValuePath]||"Rectangle"===g.Type?l.setAttribute("transform","translate( "+(p-g.Width/2)+" "+(c-g.Height/2)+" )"):l.setAttribute("transform","translate( "+p+" "+c+" )"),s){var m=this.getClickLocation(e-g.X,t-g.Y);this.dotNetRef.invokeMethodAsync("TriggerMarkerDragEnd",this.markerDragArgument.layerIndex,this.markerDragArgument.markerIndex,this.markerDragArgument.dataIndex,e,t,m.latitude,m.longitude)}},a.prototype.changeCursorPointer=function(e){if(e.indexOf("_MarkerIndex_")>-1&&e.indexOf("_LayerIndex_")>-1&&!(e.indexOf("cluster")>-1)){var t=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),i=parseInt(e.split("_MarkerIndex_")[1].split("_")[0],10);this.markerSettings[t][i].EnableDrag&&sf.base.isNullOrUndefined(this.markerDragArgument)?document.getElementById(this.element.id+"_svg").setAttribute("style","cursor: pointer"):this.markerSettings[t][i].EnableDrag&&!sf.base.isNullOrUndefined(this.markerDragArgument)?document.getElementById(this.element.id+"_svg").setAttribute("style","cursor: grabbing"):document.getElementById(this.element.id+"_svg").setAttribute("style","cursor: auto")}},a.prototype.mouseUp=function(e){var t,i,n=e.target.id,s=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,o=!1;this.isCancellation=this.isResize=!1,this.lastScale=1;var a=!(n.indexOf("Marker")>-1&&!this.options.zoomOnMarkerClick);if("touchend"===e.type){var l=e.target.closest("#"+this.element.id+"_Tooltip_TooltipTemplate");sf.base.isNullOrUndefined(l)&&e.cancelable&&(n.indexOf("LayerIndex")>-1||this.options.enableZoom&&(this.options.enablePinchZooming||this.options.enablePanning||this.enableSelectionZoom)||!sf.base.isNullOrUndefined(this.markerDragArgument))&&e.preventDefault(),this.moveClientX=t=e.changedTouches[0].pageX,this.moveClientY=i=e.changedTouches[0].pageY,o=!0,this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[]}else this.moveClientX=e.pageX,this.moveClientY=e.pageY,t=e.layerX,i=e.layerY;var r=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=r.x,this.moveClientY=r.y;n.split("_")[0];if(this.options.doubleClickZoom&&"touchend"===e.type){this.tapCount=this.tapCount>1?0:this.tapCount+1;var h=this;sf.base.isNullOrUndefined(this.tapCountTimer)&&(this.tapCountTimer=setTimeout((function(){window.clearTimeout(h.tapCountTimer),h.tapCountTimer=null,h.tapCount=0}),1e3))}if(!(n.indexOf("_Zooming_")>-1)&&this.options.enableZoom&&!this.isPanning&&"mouseleave"!==e.type&&(this.options.zoomOnClick&&a||this.options.doubleClickZoom&&"touchend"===e.type&&this.tapCount>1)&&!this.isPinch&&!this.isTouchEndProcessing){this.tapCount=0,this.isInteracted=!0;var d=this.scaleFactor+(this.isPinchZoomed?0:1);if(d>=1){this.scaleFactor=d,this.removeCluster();var p="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,c="touchend"===e.type?e.changedTouches[0].pageY:e.pageY,g=this.getMousePosition(p,c);document.getElementById(this.element.id+"_LayerCollections")&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.tileAnimation("wheel",e.type,!0,g,e)}}if(this.allowPanning&&this.isPanning&&this.options.enablePanning||this.isPinchZoomed){var m=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&this.isPinchZoomed){this.scaleFactor=this.tileZoomLevel=this.pinchZoomScale;var u=document.getElementById(this.element.id+"_tile_parent"),f=document.getElementById(this.element.id+"_Tile_SVG_Parent");u.style.removeProperty("transform"),u.style.removeProperty("transform-origin"),f.style.removeProperty("transform"),f.style.removeProperty("transform-origin"),this.removeTranformOrgin(),this.getTileTranslate(this.scaleFactor),this.generateTiles(),this.renderMarkers(null,!0);var y=document.getElementById(this.element.id).querySelector('[id*="_markerClusterConnectorLine"]');y&&y.remove()}if(this.isTileMap&&this.currentTiles&&m){var _=this.currentTiles.childElementCount,b=m.childElementCount;if(_!==b)for(var v=b;v>_;)m.lastElementChild.remove(),v--;document.getElementById(this.element.id+"_tiles")&&document.getElementById(this.element.id+"_tiles").remove()}this.currentTiles=null,sf.base.isNullOrUndefined(this.dotNetRef)||this.isPinchZoomed||(this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1),this.panComplete&&this.dotNetRef.invokeMethodAsync("TriggerPanningComplete",this.previousPoint.x,this.previousPoint.y,s.x,s.y,t,i,this.scaleFactor)),this.isPinchZoomed&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!0),this.pinchComplete&&this.dotNetRef.invokeMethodAsync("TriggerOnZoomComplete",s.x,s.y)),this.options.factor=this.scaleFactor}if(this.isPanning=!1,this.allowPanning=!1,this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick){this.svgCreated=!1,this.mouseClick=!1,this.isInteracted=!0;var x=document.getElementById(this.element.id+"drawRect");if(x){x.remove(),this.mergeSeparation(),this.removeCluster();var I=0;if(this.height>0&&this.width>0){var T=this.element.getBoundingClientRect();this.isTileMap?(I=this.scaleFactor+Math.round(this.scaleFactor+(T.width/this.width+T.height/this.height)/2),I-=2):I=this.scaleFactor+Math.round((T.width/this.width+T.height/this.height)/2),this.scaleFactor=I}this.setToolbarButtonColor(this.scaleFactor,this.element.id+"_Zooming_"),I>=1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerZoomSelection",this.position.x,this.position.y,this.height,this.width)}}if(!this.isPinchZoomed&&n.indexOf("_LayerIndex_")>-1){var M=void 0,S=void 0,C=void 0,k=void 0,B=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);if(n.indexOf("shapeIndex")>-1&&this.shapeSelection(n,B),n.indexOf("_BubbleIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(S=parseInt(n.split("_BubbleIndex_")[1].split("_")[0],10),M=-1!==n.indexOf("_dataIndex_")?parseInt(n.split("_dataIndex_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",n,B,M,"Bubble",S)),n.indexOf("_NavigationIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(C=parseInt(n.split("_NavigationIndex_")[1].split("_")[0],10),M=-1!==n.indexOf("_Line_")?parseInt(n.split("_Line_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",n,B,M,"NavigationLine",C)),n.indexOf("_PolygonIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(k=parseInt(n.split("_PolygonIndex_")[1].split("_")[0],10),this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",n,B,k,"Polygon",k)),this.allowMarkerMouseLeaveEvent&&o&&n.indexOf("MarkerIndex")>-1&&!(n.indexOf("cluster")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var O=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10),L=parseInt(n.split("_MarkerIndex_")[1].split("_")[0],10);M=parseInt(n.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",O,L,M,t,i,o)}}var P=document.getElementById(this.element.id+"_AnnotationGroup"),w=!sf.base.isNullOrUndefined(P)&&P.contains(e.target);n.indexOf("_Zooming_")>-1||!sf.base.isNullOrUndefined(this.markerDragArgument)||"mouseleave"===e.type||this.isPinchZoomed||!this.element.contains(e.target)||sf.base.isNullOrUndefined(this.dotNetRef)||w||this.isTouchEndProcessing||this.dotNetRef.invokeMethodAsync("TriggerClickEventArgs",!1,r.x,r.y,this.getDomObject("Target",document.getElementById(n)),!sf.base.isNullOrUndefined(this.isTileMap)&&this.isTileMap),sf.base.isNullOrUndefined(this.markerDragArgument)||"mouseleave"===e.type||(this.getMarkerClickLocation(this.moveClientX,this.moveClientY,t,i,!0),this.dotNetRef.invokeMethodAsync("TriggerMouseMove",this.markerDragArgument.layerIndex,this.markerDragArgument.markerIndex,this.markerDragArgument.dataIndex,n,this.moveClientX,this.moveClientY,n.indexOf("cluster")>-1?"cluster":"marker",o,!1,!1,t,i),this.markerDragArgument=null,this.changeCursorPointer(n),this.isMarkerDrag=!0),(sf.base.Browser.isDevice||n.indexOf("Reset")>-1)&&(this.enableSelectionZoom=!(n.indexOf("Reset")>-1)&&this.enableSelectionZoom,this.isReset=n.indexOf("Reset")>-1,this.setToolbarButtonColor(n.indexOf("Reset")>-1?this.options.minZoom:this.scaleFactor,this.element.id+"_Zooming_")),this.isTouchEndProcessing=!0,this.isPinchZoomed=!1},a.prototype.tilePinchingProcess=function(e){this.tileZoomLevel=Math.round(e),this.getTileTranslate(e),this.generateTiles("_animates_tiles",e)},a.prototype.getDomObject=function(e,t){return null!=t?window.sfBlazor.getDomObject(e,t):null},a.prototype.targetTouches=function(e){for(var t=[],i=0;i<e.length;i++)t.push({pageX:e[i].pageX,pageY:e[i].pageY});return t},a.prototype.mouseMove=function(e){var t,n,s=e.target.id;this.mouseMoveId=s,this.moveClientX=e.pageX,this.moveClientY=e.pageY;var o,a,l=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,r=!1;"touchmove"===e.type?(this.moveClientX=o=e.touches[0].pageX,this.moveClientY=a=e.touches[0].pageY,2===e.touches.length&&(this.touchMoveList=this.targetTouches(e.touches)),(this.options.enableZoom&&(this.options.enablePinchZooming||this.options.enablePanning||this.enableSelectionZoom)||!sf.base.isNullOrUndefined(this.markerDragArgument))&&e.preventDefault(),t=0,n=0,r=!0):(this.moveClientX=e.pageX,this.moveClientY=e.pageY,o=e.clientX,a=e.clientY,t=e.layerX,n=e.layerY),this.tooltipVisiblityChange(s),this.setToolbarButtonColor(this.scaleFactor,s),this.renderInteractiveLegend(s,e);var h=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=h.x,this.moveClientY=h.y;var d=s.split("_")[0];if(-1===s.indexOf("_MapAreaBorder")?this.highlightMap(e):this.removeAllHighlight(),this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick&&this.options.maxZoom>this.options.factor&&this.enableSelectionZoom){e.preventDefault(),this.svgCreated||(this.startValue=this.svgPoint(this.svg,o,a),this.svgCreated=!0),this.position=this.svgPoint(this.svg,o,a);var p=document.getElementById(this.element.id).getBoundingClientRect();this.width=Math.abs(this.position.x-this.startValue.x),this.height=Math.abs(this.position.y-this.startValue.y),this.position.x>this.startValue.x&&(this.position.x=this.startValue.x),this.position.y>this.startValue.y&&(this.position.y=this.startValue.y),this.position.x=this.position.x-p.x,this.position.y=this.position.y-p.y,i.setAttributeNS(null,"x",this.position.x.toString()),i.setAttributeNS(null,"y",this.position.y.toString()),i.setAttributeNS(null,"id",this.element.id+"drawRect"),i.setAttributeNS(null,"width",this.width.toString()),i.setAttributeNS(null,"height",this.height.toString()),i.setAttributeNS(null,"fill",this.options.rectangleZoomFillColor),i.setAttributeNS(null,"stroke-dasharray","3"),i.setAttributeNS(null,"opacity",this.options.rectangleZoomFillOpacity.toString()),i.setAttributeNS(null,"stroke",this.options.rectangleZoomBorderColor),null!==document.getElementById(this.element.id+"_tile_parent")?document.getElementById(this.element.id+"_LayerCollections").parentNode.appendChild(i):document.getElementById(this.element.id+"_svg").appendChild(i)}if(this.isPinch=!1,this.options.enableZoom&&this.options.enablePinchZooming&&this.touchMoveList.length>=2&&this.touchStartList.length>=2&&(this.isPinchZoomed=this.isPinch=!0,this.pinchComplete||this.panComplete||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerOnZoom",l.x,l.y),this.pinchZooming(e),this.pinchComplete=!0),sf.base.isNullOrUndefined(this.markerDragArgument)&&this.allowPanning&&this.options.enablePanning&&(this.clientX!==this.moveClientX||this.clientY!==this.moveClientY)&&!this.isPinchZoomed){if(this.isPanning=!this.isAnimationComplete,!this.isTileMap){for(var c=document.getElementById(this.element.id+"_LayerCollections"),g=0;g<(sf.base.isNullOrUndefined(c)?0:c.children.length);g++)for(var m=0;m<c.children[g].childElementCount;m++)if(c.children[g].children[m].id.indexOf("Polygon_Group")>-1){this.scaleFactor=c.children[g].children[m].transform.baseVal[0].matrix.a;break}if(c&&this.clientX!==this.moveClientX&&this.clientY!==this.moveClientY){var u=this.clientX-this.moveClientX,f=this.clientY-this.moveClientY,y=l.x-u/this.scaleFactor,_=l.y-f/this.scaleFactor;this.panComplete||this.pinchComplete||sf.base.isNullOrUndefined(this.dotNetRef)||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerPanning",l.x,l.y,y,_,t,n,this.scaleFactor)),this.panning(u,f,t,n,this.scaleFactor,!1),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(s.indexOf(d)>-1)if(null!==(c=document.getElementById(e.currentTarget.id+"_animated_tiles"))){this.isTileMap=!0,this.scaleFactor=parseInt(c.className,10);u=this.clientX-this.moveClientX,f=this.clientY-this.moveClientY;this.panComplete||sf.base.isNullOrUndefined(this.dotNetRef)||2===this.touchMoveList.length||2===this.touchStartList.length||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerTilePanning",this.previousPoint.x,this.previousPoint.y,l.x,l.y,t,n,this.scaleFactor)),this.panning(u,f,t,n,this.scaleFactor,!1),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(!sf.base.isNullOrUndefined(this.dotNetRef)){if(!(this.pinchComplete||this.allowPanning||this.mouseClick&&this.zoomClick))if(s.indexOf("shapeIndex")>-1&&"MouseMove"===this.options.tooltipDisplayMode){var b=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),v=parseInt(s.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,h.x,h.y,b,v,"Shape",0)}else if(!this.pinchComplete&&s.indexOf("_PolygonIndex_")>-1&&"MouseMove"===this.options.tooltipDisplayMode){var x=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),I=parseInt(s.split("_PolygonIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,h.x,h.y,x,-1,"Polygon",I)}if((""===s||-1===s.indexOf(this.element.id))&&!sf.base.isNullOrUndefined(e.target.offsetParent)){var T=e.target.offsetParent.id;s=T.indexOf("_MarkerIndex_")>-1?T:s}if(!this.pinchComplete&&((s.indexOf("_MapAreaBorder")>-1||s.indexOf("_MapMargin")>-1||""===s||s.indexOf("_svg")>-1)&&"MouseMove"===this.options.tooltipDisplayMode||this.isToolbarTooltip&&s.indexOf("_Zooming_ToolBar_")>-1)&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",h.x,h.y,0,0,"",0),this.isToolbarTooltip=!1,!this.pinchComplete&&s.indexOf("_Zooming_ToolBar_")>-1){this.isToolbarTooltip=!0;var M=s.split("_Zooming_ToolBar_")[1].split("_")[0];this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,h.x,h.y,0,0,M,0)}this.pinchComplete||(this.renderTitleTooltip(s,h,e),this.renderLegendTitleTooltip(s,h,e),this.renderLegendTextTooltip(s,h,e));var S=0,C=0,k=0,B="",O=!1,L=!1,P=!1;if((!this.isMarkerDrag&&s.indexOf("_LayerIndex_")>-1&&s.indexOf("_MarkerIndex_")>-1||r&&s.indexOf("MarkerIndex")>-1&&!(s.indexOf("cluster")>-1))&&(S=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),C=parseInt(s.split("_MarkerIndex_")[1].split("_")[0],10),k=parseInt(s.split("_dataIndex_")[1].split("_")[0],10),B=s.indexOf("cluster")>-1?"cluster":"marker",O=!sf.base.isNullOrUndefined(this.markerDragArgument),P=r,L=!0,this.changeCursorPointer(s)),!this.pinchComplete&&(s.indexOf("_LayerIndex_")>-1||s.indexOf("_MapAreaBorder")>-1||s.indexOf("_svg")>-1)&&this.dotNetRef.invokeMethodAsync("TriggerMouseMove",S,C,k,s,h.x,h.y,B,P,O,L,t,n),this.isMarkerDrag=!1,!this.pinchComplete&&s.indexOf("_LayerIndex_")>-1&&s.indexOf("_BubbleIndex_")>-1){var w=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),E=parseInt(s.split("_BubbleIndex_")[1].split("_")[0],10),A=parseInt(s.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerBubbleMouseMove",w,E,A,s,h.x,h.y,t,n)}if(this.allowMarkerMouseLeaveEvent&&!this.pinchComplete&&this.previousMarkerId.indexOf("_MarkerIndex_")>-1&&this.previousMarkerId!==s){var N=parseInt(this.previousMarkerId.split("_LayerIndex_")[1].split("_")[0],10),Z=parseInt(this.previousMarkerId.split("_MarkerIndex_")[1].split("_")[0],10),R=parseInt(this.previousMarkerId.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",N,Z,R,t,n,r)}}sf.base.isNullOrUndefined(this.markerDragArgument)?s.indexOf("MarkerIndex")>-1||document.getElementById(this.element.id+"_svg").setAttribute("style","cursor: auto"):(this.getMarkerClickLocation(this.moveClientX,this.moveClientY,t,n,!1),this.changeCursorPointer(s)),this.previousMarkerId=s.indexOf("MarkerIndex")>-1&&!(s.indexOf("cluster")>-1)?s:""},a.prototype.removeInteractiveLegend=function(){var e=document.getElementById(this.element.id+"_Interactive_Legend_Group");null!==e&&e.setAttribute("style","display: none;")},a.prototype.renderInteractiveLegend=function(e,t){var i=this;if(!sf.base.isNullOrUndefined(this.legendSettings)&&"Interactive"===this.legendSettings.mode&&e.indexOf("_LayerIndex")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var n=document.getElementById(t.target.id).getAttribute("fill");if(e.indexOf("_shapeIndex")>-1&&"Layers"===this.legendSettings.type){var s=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10);document.getElementById(e);clearTimeout(this.arrowCountTimer),this.renderInteractive(n,s,o,0),"touch"===t.pointerType&&(this.arrowCountTimer=setTimeout((function(){i.removeInteractiveLegend()}),1500))}else if(e.indexOf("_MarkerIndex_")>-1&&"Markers"===this.legendSettings.type){s=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10);var a=parseInt(e.split("_MarkerIndex_")[1].split("_")[0],10),l=-1!==e.indexOf("_dataIndex_")?parseInt(e.split("_dataIndex_")[1].split("_")[0],10):null;clearTimeout(this.arrowCountTimer),this.renderInteractive(n,s,a,l),"touch"===t.pointerType&&(this.arrowCountTimer=setTimeout((function(){i.removeInteractiveLegend()}),1500))}else if(e.indexOf("_BubbleIndex_")>-1&&"Bubbles"===this.legendSettings.type){s=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10);var r=parseInt(e.split("_BubbleIndex_")[1].split("_")[0],10);l=-1!==e.indexOf("_dataIndex_")?parseInt(e.split("_dataIndex_")[1].split("_")[0],10):null;clearTimeout(this.arrowCountTimer),this.renderInteractive(n,s,r,l),"touch"===t.pointerType&&(this.arrowCountTimer=setTimeout((function(){i.removeInteractiveLegend()}),1500))}else this.removeInteractiveLegend()}else sf.base.isNullOrUndefined(this.legendSettings)||"Interactive"!==this.legendSettings.mode||sf.base.isNullOrUndefined(this.dotNetRef)||this.removeInteractiveLegend()},a.prototype.renderInteractive=function(e,t,i,n){for(var s=0;s<(sf.base.isNullOrUndefined(this.legendDetails)?0:this.legendDetails.length);s++){for(var o=!1,a=0;a<this.legendDetails[s].length;a++){var l=this.legendDetails[s][a];if("Bubbles"===this.legendSettings.type&&parseInt(l.layerIndex)===t&&parseInt(l.dataIndex)===n||"Markers"===this.legendSettings.type&&parseInt(l.layerIndex)===t&&parseInt(l.dataIndex)===n&&parseInt(l.settingIndex)===i||"Layers"===this.legendSettings.type&&parseInt(l.layerIndex)===t&&parseInt(l.settingIndex)===i){var r=this.getLegendRect(this.legendShapeCollection[s].ShapeId);sf.base.isNullOrUndefined(r)||this.renderInteractivePointer(e,r),o=!0;break}this.removeInteractiveLegend()}if(o)break}},a.prototype.getLegendRect=function(e){var t=document.getElementById(e).getBoundingClientRect(),i=e.split("_Legend_")[0],n=document.getElementById(i).getBoundingClientRect();return{x:t.left-n.left,y:t.top-n.top,width:t.width,height:t.height}},a.prototype.renderInteractivePointer=function(e,t){var i,n,o,a="None"===this.legendSettings.orientation?"Top"===this.legendSettings.position||"Bottom"===this.legendSettings.position?"Horizontal":"Vertical":this.legendSettings.orientation;if(t.y="Float"===this.legendSettings.position&&this.isTileMap?t.y-this.baseMapBounds.mapsAreaRect.y:t.y,"Horizontal"===a){n=t.x+t.width/2-("Float"===this.legendSettings.position&&this.isTileMap?this.baseMapBounds.mapsAreaRect.y:0);var l=0;l="False"===this.legendSettings.invertedPointer?(o=t.y)-10:(o=t.y+t.height)+10,i=this.createInteractiveArrow(n,o,10,10,0,l,!0)}else{o=t.y+t.height/2;var r=0;r="False"===this.legendSettings.invertedPointer?(n=t.x+t.width-("Float"===this.legendSettings.position&&this.isTileMap?this.baseMapBounds.mapsAreaRect.x:0))+10:(n=t.x-("Float"===this.legendSettings.position&&this.isTileMap?this.baseMapBounds.mapsAreaRect.x:0))-10,i=this.createInteractiveArrow(n,o,10,10,r,0,!1)}var h={d:i,id:this.element.id+"_Interactive_Legend",fill:e,stroke:"#000000",opacity:1,strokeWidth:0},d=document.getElementById(this.element.id+"_Interactive_Legend_Group");null===d&&(d=s(this.element.id+"_Interactive_Legend_Group")),d.setAttribute("style","display: block;");var p=this.drawPath(h),c=document.getElementById(this.element.id+"_svg");d.appendChild(p),c.appendChild(d)},a.prototype.createInteractiveArrow=function(e,t,i,n,s,o,a){return"M "+e+" "+t+" L "+(a?e-i:s)+" "+(a?o:t-n)+" L "+(a?e+i:s)+" "+(a?o:t+n)+" Z"},a.prototype.renderTitleTooltip=function(e,t,i){var n=this;e===this.element.id+"_Map_title"&&i.target.textContent.indexOf("...")>-1&&!this.isPanning&&(clearTimeout(this.tooltipCountTimer),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","_Map_title",t.x,t.y,0,0,"Title",0),"touch"===i.pointerType&&(this.tooltipCountTimer=setTimeout((function(){n.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",t.x,t.y,0,0,"",0)}),1500)))},a.prototype.renderLegendTitleTooltip=function(e,t,i){var n=this;e===this.element.id+"_LegendTitle"&&i.target.textContent.indexOf("...")>-1&&!this.isPanning&&(clearTimeout(this.tooltipCountTimer),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","_LegendTitle",t.x,t.y,0,0,"LegendTitle",0),"touch"===i.pointerType&&(this.tooltipCountTimer=setTimeout((function(){n.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",t.x,t.y,0,0,"",0)}),1500)))},a.prototype.renderLegendTextTooltip=function(e,t,i){var n=this;e.indexOf("_Legend_Text_Index_")>-1&&i.target.textContent.indexOf("...")>-1&&!this.isPanning&&(clearTimeout(this.tooltipCountTimer),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","_LegendText_",t.x,t.y,0,parseInt(e.split("_Legend_Text_Index_")[1]),"LegendText",0),"touch"===i.pointerType&&(this.tooltipCountTimer=setTimeout((function(){n.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",t.x,t.y,0,0,"",0)}),1500)))},a.prototype.tooltipVisiblityChange=function(e){var t=this.getTooltipDuration(e);if(sf.base.Browser.isDevice){var i=this;window.clearTimeout(i.tooltipCountTimer),t>0&&(this.tooltipCountTimer=setTimeout((function(){i.tooltipCountTimer=null;for(var e=0,t=["_LayerTooltipTemplate","_MarkerTooltipTemplate","_BubbleTooltipTemplate","_PolygonTooltipTemplate","_Tooltip"];e<t.length;e++){var n=t[e],s=document.getElementById(i.element.id+n);if(s){s.style.visibility="hidden";break}}}),t))}},a.prototype.getTooltipDuration=function(e){var t=2e3;if(e.indexOf("_LayerIndex_")>-1){var i=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10);if(t=sf.base.isNullOrUndefined(this.layerTooltipSettings)||sf.base.isNullOrUndefined(this.layerTooltipSettings[i])?t:parseInt(this.layerTooltipSettings[i]),e.indexOf("_MarkerIndex_")>-1){var n=parseInt(e.split("_MarkerIndex_")[1].split("_")[0],10);t=sf.base.isNullOrUndefined(this.markerSettings[i][n])||sf.base.isNullOrUndefined(this.markerSettings[i][n].TooltipDuration)?t:this.markerSettings[i][n].TooltipDuration}else if(e.indexOf("_BubbleIndex_")>-1){var s=parseFloat(e.split("_BubbleIndex_")[1].split("_")[0]);t=sf.base.isNullOrUndefined(this.bubbleCollection[i][s])||sf.base.isNullOrUndefined(this.bubbleCollection[i][s].TooltipDuration)?t:parseInt(this.bubbleCollection[i][s].TooltipDuration)}else if(e.indexOf("_PolygonIndex_")>-1){var o=parseInt(e.split("_PolygonIndex_")[1].split("_")[0],10);t=sf.base.isNullOrUndefined(this.polygon[i][o])||sf.base.isNullOrUndefined(this.polygon[i][o].TooltipDuration)?t:this.polygon[i][o].TooltipDuration}}return t},a.prototype.mouseDown=function(e){this.isPinch=!1,this.isTouchEndProcessing=!1;var t=e.target.id,i=this.options.factor+(t.indexOf("_ZoomIn_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect").getAttribute("stroke-opacity")?1:0)+(t.indexOf("_ZoomOut_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect").getAttribute("stroke-opacity")?-1:0);i=t.indexOf("_Reset_")>1?this.options.minZoom:i,this.isPinchZoomed=!1,this.isTouch=!1,this.panComplete=!1,this.pinchComplete=!1,this.currentTiles=null,this.isReset=!1;var n=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(n)&&(this.currentTiles=n.cloneNode(!0)),"touchstart"===e.type){var s=e.target.closest("#"+this.element.id+"_Tooltip_TooltipTemplate");sf.base.isNullOrUndefined(s)&&this.options.enableZoom&&(this.options.enablePinchZooming||this.options.enablePanning||this.enableSelectionZoom||!sf.base.isNullOrUndefined(this.markerDragArgument))&&e.preventDefault(),this.clientX=e.touches[0].pageX,this.clientY=e.touches[0].pageY,2===e.touches.length&&(this.touchStartList=this.targetTouches(e.touches)),this.isTouch=!0}else this.clientX=e.pageX,this.clientY=e.pageY;if(this.isTileMap&&this.isTouch&&e.touches.length>1){var o=this.getMousePosition(e.touches[0].pageX,e.touches[0].pageY),a=this.getMousePosition(e.touches[1].pageX,e.touches[1].pageY);this.startDistance=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),this.touchCenter={x:(o.x+a.x)/2,y:(o.y+a.y)/2},this.pinchStartLatLong=this.pointToLatLong((o.x+a.x)/2,(o.y+a.y)/2),this.isCancellation=!1,this.pinchTileZoomScale=this.tileZoomLevel,this.pinchDistance=null}this.tooltipVisiblityChange(t);var l=this.getMousePosition(this.clientX,this.clientY);if(this.clientX=l.x,this.clientY=l.y,this.options.enableZoom&&this.options.enableSelectionZooming&&this.zoomClick&&(this.mouseClick=!0,e.preventDefault()),this.mouseClick||-1!==t.indexOf("ToolBar_Pan")||(t.indexOf("_MapAreaBorder")>-1&&this.options.enablePanning&&(this.allowPanning=!0),!this.enableSelectionZoom&&t.indexOf("")>-1&&!(t.indexOf("Zooming")>-1)&&this.options.enablePanning&&(this.allowPanning=!0)),t.indexOf("MarkerIndex")>-1&&!(t.indexOf("cluster")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var r=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),h=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),d=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),p=!1;!sf.base.isNullOrUndefined(this.clusterData)&&this.clusterData.length>0&&(p=this.clusterData[0].data.filter((function(e){return e.index===d})).length>0&&this.clusterData[0].layerIndex===r&&this.clusterData[0].markerIndex===h),this.markerSettings[r][h].EnableDrag&&!p&&(this.markerDragArgument={layerIndex:r,markerIndex:h,dataIndex:d,latitude:this.dataSource[r][h][d].Latitude,longitude:this.dataSource[r][h][d].Longitude,targetId:t},this.allowMarkerDragStartEvent&&this.dotNetRef.invokeMethodAsync("TriggerMarkerDragStart",r,h,d,this.clientX,this.clientY))}-1===t.indexOf("Reset")&&this.setToolbarButtonColor(i,t),t.indexOf("_Zoom_")>-1&&this.options.enableSelectionZooming&&i>this.options.max?(this.removeZoomColor(this.toolbarSelection),this.removePanColor(this.toolbarColor)):t.indexOf("_Pan_")>-1&&this.options.enablePanning&&!this.options.isTileMap&&i>1&&(this.removeZoomColor(this.toolbarColor),this.removePanColor(this.toolbarSelection))},a.prototype.removeToolbarClass=function(e,t,i,n,s){this.getElementByID(this.element.id+"_Zooming_KitCollection")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_ZoomIn_Group").setAttribute("class",t),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",i),document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class",s),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",n))},a.prototype.setOpacity=function(e,t,i,n){this.getElementByID(this.element.id+e)&&(this.getElementByID(this.element.id+e).setAttribute("stroke-opacity",i.toString()),this.getElementByID(this.element.id+e).setAttribute("fill-opacity",i.toString()),this.getElementByID(this.element.id+t).setAttribute("stroke-opacity",n.toString()),this.getElementByID(this.element.id+t).setAttribute("fill-opacity",n.toString()))},a.prototype.removeZoomOpacity=function(e,t,i,n,s,o,a,l,r,h){this.setOpacity("_Zooming_ToolBar_Zoom_Rect","_Zooming_ToolBar_Zoom_Path",t,e),this.setOpacity("_Zooming_ToolBar_ZoomIn_Rect","_Zooming_ToolBar_ZoomIn_Path",n,i),this.setOpacity("_Zooming_ToolBar_ZoomOut_Rect","_Zooming_ToolBar_ZoomOut_Path",o,s),this.setOpacity("_Zooming_ToolBar_Pan_Rect","_Zooming_ToolBar_Pan_Path",l,a),this.setOpacity("_Zooming_ToolBar_Reset_Rect","_Zooming_ToolBar_Reset_Path",h,r)},a.prototype.getElementByID=function(e){return document.getElementById(e)},a.prototype.setToolbarButtonColor=function(e,t){if(document.getElementById(this.element.id+"_Zooming_KitCollection")&&t.indexOf(this.element.id+"_Zooming_")>-1&&this.options.enableZoom){document.getElementById(this.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"),sf.base.Browser.isDevice?this.removeToolbarClass("","","","",""):this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","e-maps-toolbar",this.options.enablePanning?"e-maps-toolbar":"","e-maps-toolbar");var i=this.toolbarShapeOpacity,n=this.toolbarButtonOpacity;this.isTileMap&&e<=1.2?(sf.base.Browser.isDevice||this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","",this.options.enablePanning?"e-maps-toolbar":"",""),this.options.enablePanning&&this.removePanColor(this.toolbarSelection),this.enableSelectionZoom&&this.options.enableSelectionZooming&&!this.isReset&&(this.removeZoomColor(this.toolbarSelection),this.removePanColor(this.toolbarColor)),this.isReset&&(this.removeZoomColor(this.toolbarColor),this.removePanColor(this.toolbarSelection)),this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?n:.3,i,n,.3,.3,this.options.enablePanning?i:.3,this.options.enablePanning?n:.3,.3,.3)):e<=1.2?(sf.base.Browser.isDevice||this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","","",""),!this.enableSelectionZoom&&this.options.enablePanning&&this.removePanColor(this.toolbarColor),this.enableSelectionZoom&&this.options.enableSelectionZooming&&!this.isReset&&(this.removeZoomColor(this.toolbarSelection),this.removePanColor(this.toolbarColor)),this.isReset&&this.removeZoomColor(this.toolbarColor),this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?n:.3,i,n,.3,.3,.3,.3,.3,.3)):e<this.options.maxZoom?(sf.base.Browser.isDevice||this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","e-maps-toolbar",this.options.enablePanning?"e-maps-toolbar":"","e-maps-toolbar"),this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?n:.3,i,n,i,n,this.options.enablePanning?i:.3,this.options.enablePanning?n:.3,i,n),(this.isReset||e===this.options.minZoom)&&(this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?n:.3,i,n,.3,.3,this.options.enablePanning?i:.3,this.options.enablePanning?n:.3,.3,.3),this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","",this.options.enablePanning?"e-maps-toolbar":"","")),this.enableSelectionZoom&&this.options.enableSelectionZooming?(this.removeZoomColor(this.toolbarSelection),this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarColor)):!this.enableSelectionZoom&&this.options.enablePanning&&(this.removePanColor(this.toolbarSelection),this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarColor))):(sf.base.Browser.isDevice||this.removeToolbarClass("","","e-maps-toolbar",this.options.enablePanning?"e-maps-toolbar":"","e-maps-toolbar"),this.removeZoomOpacity(.3,.3,.3,.3,i,n,this.options.enablePanning?i:.3,this.options.enablePanning?n:.3,i,n),this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarColor),!this.enableSelectionZoom&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection))}else sf.base.Browser.isDevice||(this.removePanColor(this.toolbarColor),this.removeZoomColor(this.toolbarColor),this.removeZoomOpacity(1,1,1,1,1,1,1,1,1,1),document.getElementById(this.element.id+"_Zooming_KitCollection")&&document.getElementById(this.element.id+"_Zooming_KitCollection").setAttribute("opacity","0.3"))},a.prototype.pinchZooming=function(e){this.pinchFactor=this.scaleFactor;var t=this.scaleFactor,i=this.getBound(this.element.id);if(this.isInteracted=!0,this.mergeSeparation(),this.isTileMap){C=this.touchCenter;var n=this.getMousePosition(this.touchMoveList[0].pageX,this.touchMoveList[0].pageY),s=this.getMousePosition(this.touchMoveList[1].pageX,this.touchMoveList[1].pageY),o=Math.sqrt(Math.pow(n.x-s.x,2)+Math.pow(n.y-s.y,2)),a=o/this.startDistance;if(!sf.base.isNullOrUndefined(this.pinchDistance)){var l=Math.log2(a*(256*Math.pow(2,t))/256);l=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,l));var r=this.pinchDistance>o?t*a:l,h=l,d=!1;this.pinchDistance>o?(h=r%1,d=!0):this.pinchDistance<o&&(h=r%1+1);var p=Math.ceil(r);if(p>this.options.minZoom&&p<=this.options.maxZoom){var c=document.getElementById(this.element.id);c&&(c.style.overflow="hidden"),this.tileZoomLevel=p;var g=C.x/(this.areaRect.width-this.areaRect.x)*100,m=C.y/(this.areaRect.height-this.areaRect.y)*100,u=document.getElementById(this.element.id+"_tile_parent"),f=document.getElementById(this.element.id+"_tiles");f||((f=document.createElement("div")).id=this.element.id+"_tiles",this.element.appendChild(f),this.copyStyles(u,f),f.style.zIndex="0"),f.style.visibility="hidden",u.style.transformOrigin=g+"% "+m+"%",u.style.transform="scale("+h+")";var y=document.getElementById(this.element.id+"_Tile_SVG_Parent");y.style.transformOrigin=g+"% "+m+"%",y.style.transform="scale("+h+")";for(var _=0;_<this.layerCount;_++){var b=document.getElementById(this.element.id+"_LayerIndex_"+_+"_Markers_Template_Group");b&&(b.style.transformOrigin=g+"% "+m+"%",b.style.transform="scale("+h+")");var v=document.getElementById(this.element.id+"_LayerIndex_"+_+"_DataLabel_Group");v&&(v.style.transformOrigin=g+"% "+m+"%",v.style.transform="scale("+h+")")}if(!this.isCancellation&&.2>=r%1&&r%1>=.1&&!d||r%1<=.9&&d){var x=document.getElementById(this.element.id+"_animates_tiles");x||((x=document.createElement("div")).id=this.element.id+"_animates_tiles",x.classList.add(this.tileZoomLevel.toString()),f.appendChild(x)),0===x.childElementCount&&(this.pinchZoomScale=d?Math.floor(r):Math.ceil(r),this.tilePinchingProcess(d?Math.floor(r):Math.ceil(r)),this.isCancellation=!0)}if((this.isCancellation&&r%1>=.99&&!d||r%1<=.1&&d)&&""!==u.style.transformOrigin&&this.isCancellation){u.style.transformOrigin="",u.style.transform="",y.style.transformOrigin="",y.style.transform="",this.removeTranformOrgin(),this.pinchTileZoomScale=d?Math.floor(r):Math.ceil(r),d&&(r=Math.floor(r)),this.getTileTranslate(this.pinchTileZoomScale);var I=document.getElementById(this.element.id+"_animated_tiles"),T=document.getElementById(this.element.id+"_animates_tiles");if(this.syncElements(T,I),document.getElementById(this.element.id+"_animated_tiles").className=this.pinchTileZoomScale.toFixed(0),T)for(;T.firstChild;)T.removeChild(T.firstChild);this.renderMarkers(this.pinchTileZoomScale),this.isCancellation=!1}}}this.pinchDistance=o}else{var M=this.areaRect;this.previousScale=this.scaleFactor,this.previousPoint=this.shapeTranslatePoint;this.tileTranslatePoint;var S=this.calculateScale(this.touchStartList,this.touchMoveList),C=this.getTouchCenter(this.touchMoveList),k=S/this.lastScale;this.lastScale=S,this.pinchFactor*=k,this.pinchFactor=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,this.pinchFactor));var B=Math.abs(this.baseMapBounds.minBounds.x-this.baseMapBounds.maxBounds.x),O=Math.abs(this.baseMapBounds.minBounds.y-this.baseMapBounds.maxBounds.y),L=Math.abs(this.baseMapBounds.maxBounds.y-this.baseMapBounds.minBounds.y)*this.pinchFactor,P=this.shapeTranslatePoint.x-(M.width/this.scaleFactor-M.width/this.pinchFactor)/(M.width/(C.x-i.x)),w=this.shapeTranslatePoint.y-(M.height/this.scaleFactor-M.height/this.pinchFactor)/(M.height/(C.y-i.y));P=L<this.areaRect.height&&!sf.base.Browser.isDevice?M.x+(-this.baseMapBounds.minBounds.x+(M.width/2-B/2)):P,w=L<this.areaRect.height&&!sf.base.Browser.isDevice?M.y+(-this.baseMapBounds.minBounds.y+(M.height/2-O/2)):w,this.scaleFactor=this.pinchFactor,this.shapeTranslatePoint={x:P,y:w},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)}},a.prototype.removeTranformOrgin=function(){for(var e=0;e<this.layerCount;e++){var t=document.getElementById(this.element.id+"_LayerIndex_"+e+"_Markers_Template_Group");t&&(t.style.removeProperty("transform"),t.style.removeProperty("transform-origin"));var i=document.getElementById(this.element.id+"_LayerIndex_"+e+"_DataLabel_Group");i&&(i.style.removeProperty("transform"),i.style.removeProperty("transform-origin"))}},a.prototype.syncElements=function(e,t){for(var i=e.childElementCount,n=t.childElementCount,s=0;s<Math.min(i,n);s++)this.copyStyles(e.children[s],t.children[s]),t.children[s].children[0].src=e.children[s].children[0].src,t.children[s].style.removeProperty("visibility");if(n<i)for(s=n;s<i;s++)e.children[s]&&t.children[s]&&t.insertBefore(e.children[s],t.children[s]);else if(n>i)for(s=i;s<n;s++)t.children[s].style.display="none"},a.prototype.getTileTranslate=function(e){var t=e||this.scaleFactor,i=256*Math.pow(2,t),n=document.getElementById(this.element.id).getBoundingClientRect(),s=n.width/2-i/2,o=n.height/2-i/2,a=this.convertTileLatLongToPoint({x:1===t?0:this.pinchStartLatLong.longitude,y:1===t?0:this.pinchStartLatLong.latitude},t,{x:s,y:o},!0);s-=a.x-n.width/2,o=o-(a.y-n.height/2)+20;var l=Math.pow(2,t-1);this.translatePoint.x=(s-.01*this.tileZoomLevel)/l,this.translatePoint.y=(o-.01*this.tileZoomLevel)/l,this.tileTranslatePoint.x=s,this.tileTranslatePoint.y=o},a.prototype.copyStyles=function(e,t){var i=window.getComputedStyle(e);Array.from(i).forEach((function(e){t.style[e]=i.getPropertyValue(e)}))},a.prototype.removePanColor=function(e){document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&this.options.enablePanning&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",e))},a.prototype.removeZoomColor=function(e){document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&this.options.enableSelectionZooming&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",e))},a.prototype.getTileTranslatePosition=function(e,t,i,n){var s="ZoomOut"===n?10:"Reset"===n&&t>1?0:10,o=256*Math.pow(2,e),a=256*Math.pow(2,t),l=(i.x-this.tileTranslatePoint.x)/o*100,r=(i.y-this.tileTranslatePoint.y)/o*100,h=this.baseMapBounds.availableSize;this.tileTranslatePoint.x=1===t?h.width/2-256:i.x-l*a/100,this.tileTranslatePoint.y=1===t?h.height/2-256+2*s:i.y-r*a/100},a.prototype.calculateScale=function(e,t){var i=this.getDistance(e[0],e[1]);return this.getDistance(t[0],t[1])/i},a.prototype.getDistance=function(e,t){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},a.prototype.sum=function(e,t){return e+t},a.prototype.getTouchCenter=function(e){return{x:e.map((function(e){return e.pageX})).reduce(this.sum)/e.length,y:e.map((function(e){return e.pageY})).reduce(this.sum)/e.length}},a.prototype.getTouchCenterPoint=function(){for(var e=[],t=0;t<this.touchMoveList.length;t++)e.push(this.getMousePosition(this.touchMoveList[t].pageX,this.touchMoveList[t].pageY));return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}},a.prototype.highlightMap=function(e){var t=e.target,i=t.id;if(t.classList.contains("highlightLine")||t.classList.contains("highlightShape")||t.classList.contains("highlightMarker")||t.classList.contains("highlightBubble")||t.classList.contains("highlightNavigation")||t.classList.contains("highlightPolygon")||this.removeAllHighlight(),this.targetElementPath=t,i.indexOf("_LayerIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var n=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),s=i.indexOf("_dataIndex_")>-1?parseInt(i.split("_dataIndex_")[1].split("_")[0],10):0;if(i.indexOf("shapeIndex")>-1&&-1===i.indexOf("LabelIndex_")&&this.options.layerHighlightSettings[n]&&this.options.layerHighlightSettings[n].Enable){if(!t.classList.contains("mapShapeSelection")){var o=parseInt(i.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",n,o,i)}}else if(i.indexOf("_BubbleIndex_")>-1){var a=parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10);this.options.bubbleHighlightSettings[n][a]&&this.options.bubbleHighlightSettings[n][a].Enable&&!t.classList.contains("mapBubbleSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Bubble",n,a,s,i)}else if(i.indexOf("_NavigationIndex_")>-1){var l=parseInt(i.split("_NavigationIndex_")[1].split("_")[0],10);this.options.navigationHighlightSettings[n][l]&&this.options.navigationHighlightSettings[n][l].Enable&&!t.classList.contains("mapNavigationSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Navigation",n,l,0,i)}else if(i.indexOf("_PolygonIndex_")>-1){var r=parseInt(i.split("_PolygonIndex_")[1].split("_")[0],10);this.options.polygonHighlightSettings[n]&&this.options.polygonHighlightSettings[n].Enable&&!t.classList.contains("mapPolygonSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Polygon",n,r,0,i)}else if(i.indexOf("_MarkerIndex_")>-1&&-1===i.indexOf("_cluster_")&&!(i.indexOf("markerClusterConnectorLine")>-1)){var h=parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10);this.options.markerHighlightSettings[n][h]&&this.options.markerHighlightSettings[n][h].Enable&&!t.classList.contains("mapMarkerSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Marker",n,h,s,i)}}else if(i.indexOf("_Legend_Shape_")>-1){var d=parseInt(i.split("_Index_")[1],10),p=this.legendDetails[d];if("Layers"===this.legendSettings.type){if(!t.classList.contains("mapShapeSelection"))for(var c=0;c<p.length;c++){if(this.options.layerHighlightSettings[p[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.layerHighlightSettings[p[c].layerIndex])&&this.options.layerHighlightSettings[p[c].layerIndex].Enable)t.classList.add("highlightShape"),(g=document.getElementById(this.element.id+"_LayerIndex_"+p[c].layerIndex+"_shapeIndex_"+p[c].settingIndex))&&this.handleHighlight(g,"Shape",this.options.layerHighlightSettings[p[c].layerIndex])}}else if("Markers"===this.legendSettings.type){if(!t.classList.contains("mapMarkerSelection"))for(c=0;c<p.length;c++)if(this.options.markerHighlightSettings[p[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.markerHighlightSettings[p[c].layerIndex][p[c].settingIndex])&&this.options.markerHighlightSettings[p[c].layerIndex][p[c].settingIndex].Enable){t.classList.add("highlightMarker");var g=document.getElementById(this.element.id+"_LayerIndex_"+p[c].layerIndex+"_MarkerIndex_"+p[c].settingIndex+"_dataIndex_"+p[c].dataIndex);this.handleHighlight(g,"Marker",this.options.markerHighlightSettings[p[c].layerIndex][p[c].settingIndex])}}else if("Bubbles"===this.legendSettings.type&&!t.classList.contains("mapBubbleSelection"))for(c=0;c<p.length;c++)if(this.options.bubbleHighlightSettings[p[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.bubbleHighlightSettings[p[c].layerIndex][p[c].settingIndex])&&this.options.bubbleHighlightSettings[p[c].layerIndex][p[c].settingIndex].Enable){t.classList.add("highlightBubble");g=document.getElementById(this.element.id+"_LayerIndex_"+p[c].layerIndex+"_BubbleIndex_"+p[c].settingIndex+"_dataIndex_"+p[c].dataIndex);this.handleHighlight(g,"Bubble",this.options.bubbleHighlightSettings[p[c].layerIndex][p[c].settingIndex])}}},a.prototype.removeAllHighlight=function(){this.removeHighlight("Shape"),this.removeHighlight("Line"),this.removeHighlight("Marker"),this.removeHighlight("Bubble"),this.removeHighlight("Navigation"),this.removeHighlight("Polygon")},a.prototype.handleHighlight=function(e,t,i){if(("Marker"===t||"Bubble"===t||"Shape"===t)&&!sf.base.isNullOrUndefined(this.legendDetails)&&0!==this.legendDetails.length)for(var n=0;n<this.legendDetails.length;n++)for(var s=0;s<this.legendDetails[n].length;s++)if("Marker"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][s].layerIndex+"_MarkerIndex_"+this.legendDetails[n][s].settingIndex+"_dataIndex_"+this.legendDetails[n][s].dataIndex||"Bubble"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][s].layerIndex+"_BubbleIndex_"+this.legendDetails[n][s].settingIndex+"_dataIndex_"+this.legendDetails[n][s].dataIndex||"Shape"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][s].layerIndex+"_shapeIndex_"+this.legendDetails[n][s].settingIndex){document.getElementById(this.element.id+"_Legend_Shape_Index_"+n).classList.add("highlight"+t);break}if("Arrow"!==t){var o=!sf.base.isNullOrUndefined(e.getAttribute("data-geometry"))&&e.getAttribute("data-geometry").indexOf("LineString")>-1?"Line":t;("Bubble"===o&&e.id.indexOf("_BubbleIndex_")>-1&&i.Enable||"Marker"===o&&e.id.indexOf("_MarkerIndex_")>-1&&i.Enable||("Shape"===o||"Line"===o)&&e.id.indexOf("_shapeIndex_")>-1&&i.Enable||"Navigation"===o&&e.id.indexOf("_NavigationIndex_")>-1&&i.Enable||"Polygon"===o&&e.id.indexOf("_PolygonIndex_")>-1&&i.Enable)&&(e.classList.add("highlight"+o),null!==document.querySelector("#highlight"+o+"Style")&&0!==document.querySelector("#highlight"+o+"Style").length?this.customizeStyle("highlight"+o+"Style","highlight"+o,i,e.id):this.createStyle("highlight"+o+"Style","highlight"+o,i,e.id))}else e.setAttribute("fill",i.Fill),e.setAttribute("fill-opacity",i.opacity),e.setAttribute("stroke-opacity",i.BorderOpacity)},a.prototype.removeHighlight=function(e){var t=document.querySelectorAll(".highlight"+e);if(t&&t.length>0)for(var i=0;i<t.length;i++)if(t[i].classList.remove("highlight"+e),"Navigation"===e&&""!==t[i].id&&(""!==t[i].getAttribute("marker-start")||""!==t[i].getAttribute("marker-end"))){var n=document.getElementById(t[i].id+"_triangle"),s=parseInt(t[i].id.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(t[i].id.split("_NavigationIndex_")[1].split("_")[0],10);sf.base.isNullOrUndefined(n)||(n.setAttribute("fill",this.navigation[s][o].ArrowColor),n.setAttribute("opacity","1"))}},a.prototype.createStyle=function(e,t,i,n){var s=document.createElement("style");s.id=e,this.highlightStyle(s,t,i,n),document.body.appendChild(s)},a.prototype.highlightStyle=function(e,t,i,n){if(n.indexOf("NavigationIndex")>-1){var s=sf.base.isNullOrUndefined(i.Fill)?sf.base.isNullOrUndefined(i.BorderColor)?"transparent":i.BorderColor:i.Fill,o=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10),a=parseInt(n.split("_NavigationIndex_")[1].split("_")[0],10);this.navigation[o][a].Angle,e.innerHTML="."+t+" {fill: none;fill-opacity:"+i.Opacity+";stroke:"+s+";stroke-width:"+i.BorderWidth+";stroke-opacity:"+i.BorderOpacity}else t.indexOf("Line")>-1?e.innerHTML="."+t+" {fill: transparent;fill-opacity:"+i.Opacity+";stroke:"+i.Fill+";stroke-width:"+(this.isTileMap?i.BorderWidth/Math.pow(2,this.options.factor-1):i.BorderWidth/this.options.factor)+";stroke-opacity:"+i.BorderOpacity:e.innerHTML="."+t+" {fill:"+i.Fill+";fill-opacity:"+i.Opacity+";stroke:"+i.BorderColor+";stroke-width:"+(this.isTileMap?t.toLowerCase().indexOf("polygon")>-1?i.BorderWidth:i.BorderWidth/Math.pow(2,this.options.factor-1):i.BorderWidth/this.options.factor)+";stroke-opacity:"+i.BorderOpacity},a.prototype.customizeStyle=function(e,t,i,n){var s=document.getElementById(e);this.highlightStyle(s,t,i,n)},a.prototype.renderMarkers=function(e,t){void 0===t&&(t=!1);for(var i=e||this.scaleFactor,n=document.getElementById(this.element.id+"_LayerCollections"),s=0;s<this.layerCount;s++){var o=document.getElementById(this.element.id+"_LayerIndex_"+s+"_Markers_Template_Group");this.markerTemplateTranslate(o,0,this.translatePoint.x,this.translatePoint.y,i);var a=document.getElementById(this.element.id+"_LayerIndex_"+s+"_DataLabel_Group");this.labelTemplateTranslate(a,this.translatePoint.x,this.translatePoint.y,i)}for(var l=0;l<n.childElementCount;l++){var r=n.children[l];if("g"===r.tagName){r.id.indexOf("_LayerIndex_")>-1&&parseFloat(r.id.split("_LayerIndex_")[1].split("_")[0]);for(var h=0;h<r.children.length;h++){var d=r.children[h];if(d.COMMENT_NODE!==d.nodeType)if(d.id.indexOf("_Polygon_Group")>-1)d.setAttribute("transform","scale("+Math.pow(2,i-1)+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(d.id.indexOf("_MarkerGroup")>-1&&!t)for(s=0;s<d.childElementCount;s++)-1===d.children[s].id.indexOf("markerClusterConnectorLine")&&this.markerTranslate(d.children[s],0,this.translatePoint.x,this.translatePoint.y,i,!1);else if(d.id.indexOf("_Polygons_Group")>-1)if(this.isTileMap)for(var p=0;p<d.childElementCount;p++){var c=document.getElementById(d.children[p].id);for(s=0;s<c.childElementCount;s++)if(""!==c.children[s].id){var g=parseInt(c.children[s].id.split("_LayerIndex_")[1].split("_")[0],10),m=parseInt(c.children[s].id.split("_PolygonIndex_")[1].split("_")[0],10);this.polygonTranslate(c.children[s],0,g,m)}}else d.setAttribute("transform","scale("+i+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(d.id.indexOf("_line_Group")>-1)this.isTileMap?d.setAttribute("transform","scale("+Math.pow(2,i-1)+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )"):d.setAttribute("transform","scale("+i+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(d.id.indexOf("_dataLableIndex_Group")>-1){var u=Math.pow(2,i-1);for(s=0;s<d.children.length;s++)this.dataLabelTranslate(d.children[s],0,this.translatePoint.x,this.translatePoint.y,u,"DataLabel")}}}}},a.prototype.setMarkerTranslate=function(e,t,i,n,s){"Balloon"!==this.dataSource[t][i][n][this.markerSettings[t][i].ShapeValuePath]&&"Balloon"!==this.markerSettings[t][i].Type||e.id.indexOf("cluster")>-1?"Rectangle"!==this.dataSource[t][i][n][this.markerSettings[t][i].ShapeValuePath]&&"Rectangle"!==this.markerSettings[t][i].Type||e.id.indexOf("cluster")>-1?this.isTileMap&&e.classList.contains("e-maps-cluster")?e.setAttribute("transform","translate( "+(s.x-this.areaRect.x)+" "+(s.y-this.areaRect.y)+" )"):e.setAttribute("transform","translate( "+s.x+" "+s.y+" )"):e.setAttribute("transform","translate( "+(s.x-this.markerSettings[t][i].Width/2)+" "+(s.y-this.markerSettings[t][i].Height/2)+" )"):e.setAttribute("transform","translate( "+(s.x-this.markerSettings[t][i].Width/2)+" "+(s.y-this.markerSettings[t][i].Height)+" )scale("+this.markerSettings[t][i].Width/30+" "+this.markerSettings[t][i].Height/30+" )")},a.prototype.markerTranslate=function(e,t,i,n,s,o){if(e.COMMENT_NODE!==e.nodeType&&e.TEXT_NODE!==e.nodeType){var a=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),l=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),r=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),h=sf.base.isNullOrUndefined(this.markerSettings[a][l].LatitudeValuePath)||""===this.markerSettings[a][l].LatitudeValuePath?sf.base.isNullOrUndefined(this.dataSource[a][l][r].Latitude)?"latitude":"Latitude":this.markerSettings[a][l].LatitudeValuePath,d=sf.base.isNullOrUndefined(this.markerSettings[a][l].LongitudeValuePath)||""===this.markerSettings[a][l].LongitudeValuePath?sf.base.isNullOrUndefined(this.dataSource[a][l][r].Longitude)?"longitude":"Longitude":this.markerSettings[a][l].LongitudeValuePath,p=0!==this.dataSource[a].length&&0!==this.dataSource[a][l].length?this.dataSource[a][l][r][d]:null,c=0!==this.dataSource[a].length&&0!==this.dataSource[a][l].length?this.dataSource[a][l][r][h]:null;if(c&&p)if(this.isTileMap){var g=this.convertTileLatLongToPoint({x:p,y:c},this.tileZoomLevel,this.tileTranslatePoint,!0);g.x=g.x+this.markerSettings[a][l].X,g.y=g.y+this.markerSettings[a][l].Y,o?(e.style.left=g.x+"px",e.style.top=g.y+"px"):this.setMarkerTranslate(e,a,l,r,g)}else{var m=this.convertGeoToPoint(c,p,t,a);m.x=(m.x+i)*s+this.markerSettings[a][l].X,m.y=(m.y+n)*s+this.markerSettings[a][l].Y,o?(e.style.left=m.x-this.areaRect.x+"px",e.style.top=m.y-this.areaRect.y+"px"):this.setMarkerTranslate(e,a,l,r,m)}}},a.prototype.polygonTranslate=function(e,t,i,n){if(!sf.base.isNullOrUndefined(this.polygon[i])){for(var s="",o=[],a=0;a<this.polygonDataSource[i][n].length;a++){var l=this.isTileMap?this.convertTileLatLongToPoint({x:this.polygonDataSource[i][n][a].Longitude,y:this.polygonDataSource[i][n][a].Latitude},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(this.polygonDataSource[i][n][a].Latitude,this.polygonDataSource[i][n][a].Longitude,t,i);o.push(l)}for(var r=0;r<o.length;r++)s+=0===r?"M "+o[r].x+","+o[r].y:" L "+o[r].x+","+o[r].y;e=document.getElementById(this.id+"_LayerIndex_"+i+"_PolygonIndex_"+n),sf.base.isNullOrUndefined(e)?e=document.getElementById(this.id+"_LayerIndex_"+i+"_PolygonIndex_"+n+"_LineString"):s+=" z ",e.setAttribute("d",s)}},a.prototype.navigationTranslate=function(e,t,i,n){if(!sf.base.isNullOrUndefined(this.navigation[i])){var s=this.navigation[i][n].Angle,o=void 0,a=void 0,l=[];if(this.navigation[i][n].Latitude.length===this.navigation[i][n].Longitude.length)for(var r=0;r<this.navigation[i][n].Latitude.length;r++){var h=this.isTileMap?this.convertTileLatLongToPoint({x:this.navigation[i][n].Longitude[r],y:this.navigation[i][n].Latitude[r]},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(this.navigation[i][n].Latitude[r],this.navigation[i][n].Longitude[r],t,i);l.push(h)}for(var d=0;d<l.length-1;d++){s=1<(s=-1>s?-1:s)?1:s;var p=this.convertRadius(l[d],l[d+1]);s<=1&&s>0&&(o=0,l[d].x>l[d+1].x&&(o=1)),s>=-1&&s<0&&(o=1,l[d].x>l[d+1].x&&(o=0)),a=0===(s=Math.abs(s))?"M "+l[d].x+","+l[d].y+"L "+l[d+1].x+","+l[d+1].y+" ":"M "+l[d].x+","+l[d].y+" A "+(p/2+(1-s)*p/(10*s))+" "+(p/2+(1-s)*p/(10*s))+" 0,0,"+o+" , "+l[d+1].x+","+l[d+1].y+" ",document.getElementById(this.id+"_LayerIndex_"+i+"_NavigationIndex_"+n+"_Line_"+d).setAttribute("d",a)}}},a.prototype.dataLabelTranslate=function(e,t,i,n,s,o){if(e.COMMENT_NODE!==e.nodeType&&e.TEXT_NODE!==e.nodeType){var a,l,r=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),h=parseFloat(e.id.split("_shapeIndex_")[1].split("_")[0]);if("Template"!==o){a=(d=this.labelCollection[r][h]).LocationX,l=d.LocationY;a=(a+i)*s-d.BorderSize.Height/4+d.OffsetX,l=(l+n)*s+d.BorderSize.Height/4+d.OffsetY,e.id.indexOf("_RectIndex_")>-1?(e.setAttribute("x",(a-parseInt(e.getAttribute("width"))/2).toString()),e.setAttribute("y",(l-(5+parseInt(e.getAttribute("height"))/2)).toString())):e.setAttribute("transform","translate( "+a+" "+l+" )")}else{var d;a=((d=this.dataLabelTemplateCollection[r][h]).LocationX+i)*s+d.OffsetX,l=(d.LocationY+n)*s+d.OffsetY,e.style.left=a+"px",e.style.top=l+"px"}}},a.prototype.convertTileLatLongToPoint=function(e,t,i,n){var s=256*Math.pow(2,t),o=(e.x+180)/360,a=Math.sin(e.y*Math.PI/180),l=.5-Math.log((1+a)/(1-a))/(4*Math.PI),r=e.x,h=e.y;return n&&(r=o*s+.5+i.x,h=l*s+.5+i.y),{x:r,y:h}},a.prototype.panning=function(e,t,i,n,s,o){if(this.mergeSeparation(),this.isInteracted=!0,this.isTileMap){if(!this.isAnimationComplete){a=this.tileTranslatePoint.x-e-(sf.base.Browser.isDevice&&1===s?e/2:0),l=this.tileTranslatePoint.y-t;this.tileTranslatePoint.x=a,this.tileTranslatePoint.y=l,(this.tileTranslatePoint.y>-10&&t<0||this.tileTranslatePoint.y<-256*(Math.pow(2,s)-2)&&t>0)&&(this.tileTranslatePoint.x=a+e,this.tileTranslatePoint.y=l+t),o&&(e=0,t=0),this.translatePoint.x=this.tileTranslatePoint.x/Math.pow(2,s-1),this.translatePoint.y=this.tileTranslatePoint.y/Math.pow(2,s-1),this.generateTiles(),this.renderMarkers()}}else{this.shapeTranslatePoint;var a=this.shapeTranslatePoint.x-e/s,l=this.shapeTranslatePoint.y-t/s,r=document.getElementById(this.element.id+"_LayerCollections").getBoundingClientRect(),h=document.getElementById(this.element.id+"_svg").getBoundingClientRect(),d=document.getElementById(this.element.id+"_Legend_Group"),p=sf.base.isNullOrUndefined(d)?0:d.getClientRects()[0].height,c=e<0?r.left<=h.left+this.areaRect.x:r.left+r.width>=h.left+h.width+this.areaRect.x+this.marginLeft,g=t<0?r.top<=h.top+this.areaRect.y:r.top+r.height+p+this.marginTop>=h.top+h.height;c&&g?(this.shapeTranslatePoint={x:a,y:l},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)):c?(this.shapeTranslatePoint={x:a,y:this.shapeTranslatePoint.y},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)):g&&(this.shapeTranslatePoint={x:this.shapeTranslatePoint.x,y:l},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint))}},a.prototype.applyTransform=function(e,t){for(var i=this.isTileMap?this.translatePoint.x:t.x,n=this.isTileMap?this.translatePoint.y:t.y,s=document.getElementById(this.element.id+"_LayerCollections"),o=0;o<s.children.length;o++){var a=s.children[o];if(a.COMMENT_NODE!==a.nodeType&&"g"===a.tagName)for(var l=this.calculateFactor(parseFloat(a.id.split("_LayerIndex_")[1].split("_")[0])),r=(a.id.indexOf("_LayerIndex_")>-1&&parseFloat(a.id.split("_LayerIndex_")[1].split("_")[0]),0);r<a.children.length;r++){var h=a.children[r];if(h.COMMENT_NODE!==h.nodeType&&!sf.base.isNullOrUndefined(h.id))if(h.id.indexOf("Polygon")>-1||h.id.indexOf("_line_Group")>-1)h.setAttribute("transform","scale("+e+") translate( "+i+" "+n+" )");else if(h.id.indexOf("_MarkerGroup")>-1)for(var d=0;d<h.children.length;d++)sf.base.isNullOrUndefined(h.children[d].id)||this.markerTranslate(h.children[d],l,i,n,e,!1);else if(h.id.indexOf("_bubble_Group_")>-1)for(d=0;d<h.children.length;d++){var p=h.children[d];if(!sf.base.isNullOrUndefined(p.id)){var c=parseFloat(p.id.split("_LayerIndex_")[1].split("_")[0]),g=parseFloat(p.id.split("_BubbleIndex_")[1].split("_")[0]),m=parseFloat(p.id.split("_BubbleIndex_")[1].split("_")[2]);if(this.bubbleCollection[c]&&this.bubbleCollection[c][g]){var u=this.bubbleCollection[c][g].BubbleProperties[m],f=(u.ZoomTranslatePoint.X+i)*e,y=(u.ZoomTranslatePoint.Y+n)*e;1===u.Type&&(f-=u.Radius,y-=u.Radius),p.setAttribute("transform","translate( "+f+" "+y+" )")}}}else if(h.id.indexOf("_dataLableIndex_Group")>-1)for(d=0;d<h.children.length;d++)this.dataLabelTranslate(h.children[d],l,i,n,e,"DataLabel")}}for(var _=0;_<this.layerCount;_++){l=this.calculateFactor(_);var b=document.getElementById(this.element.id+"_LayerIndex_"+_+"_Markers_Template_Group");this.markerTemplateTranslate(b,l,i,n,e);var v=document.getElementById(this.element.id+"_LayerIndex_"+_+"_DataLabel_Group");this.labelTemplateTranslate(v,i,n,e)}},a.prototype.markerTemplateTranslate=function(e,t,i,n,s){if(e)for(var o=0;o<e.childElementCount;o++)this.markerTranslate(e.children[o],t,i,n,s,!0)},a.prototype.labelTemplateTranslate=function(e,t,i,n){if(e)for(var s=this.isTileMap?Math.pow(2,n-1):n,o=0;o<e.childElementCount;o++)this.dataLabelTranslate(e.children[o],0,t,i,s,"Template")},a.prototype.calculateFactor=function(e){var t,i,n,s=1,o=this.baseMapBounds,a=this.areaRect.width,l=this.areaRect.height;if(o){var r=this.convertGeoToPoint(o.latitudeMin,o.longitudeMin,null,e),h=this.convertGeoToPoint(o.latitudeMax,o.longitudeMax,null,e);i=h.y-r.y,n=h.x-r.x}else i=n=500;return t=i<l?parseFloat(Math.abs(100*Number(l/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:l/i,s=n<a?parseFloat(Math.abs(100*Number(a/Number(n.toString()+"e+1"))).toString().split(".")[0])/10:a/n,Math.min(s,t)},a.prototype.convertRadius=function(e,t){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},a.prototype.convertGeoToPoint=function(e,t,i,n){var s,o,a,l,r={width:this.areaRect.width,height:this.areaRect.height},h=this.degreesToRadians(e),d=this.degreesToRadians(t),p=null==i?Math.min(r.width,r.height):Math.min(r.width,r.height)*i,c=this.projectionType;if("Normal"!==this.geometryType[n])switch(c){case"Mercator":var g={x:p/2,y:p/2};s=g.x+t*(p/360);var m=this.calculateBound(Math.sin(this.degreesToRadians(e)),-.9999,.9999);o=g.y+.5*Math.log((1+m)/(1-m))*(-p/(2*Math.PI));break;case"Winkel3":((a=this.aitoff(d,h)).x+d/(Math.PI/2))/2,(a.y+h)/2;break;case"Miller":d,1.25*Math.log(Math.tan(Math.PI/4+.4*h));break;case"Eckert3":2/(l=Math.sqrt(Math.PI*(4+Math.PI)))*d*(1+Math.sqrt(1-4*h*h/(Math.PI*Math.PI))),4/l*h;break;case"AitOff":(a=this.aitoff(d,h)).x,a.y;break;case"Eckert5":d*(1+Math.cos(h))/Math.sqrt(2+Math.PI),2*h/Math.sqrt(2+Math.PI);break;case"Equirectangular":d,h;break;case"Eckert6":l=(1+Math.PI/2)*Math.sin(h);for(var u=1/0,f=0;f<10&&Math.abs(u)>1e-6;f++)h-=u=(h+Math.sin(h)-l)/(1+Math.cos(h));l=Math.sqrt(2+Math.PI),d*(1+Math.cos(h))/l,2*h/l}else s=null==i?t:Math.abs((t-this.baseMapBounds.longitudeMin)*i),o=null==i?e:Math.abs((this.baseMapBounds.latitudeMax-e)*i);return{x:s,y:o}},a.prototype.aitoff=function(e,t){var i=Math.cos(t),n=Math.sin(Math.cos(i*Math.cos(e/=2)));return{x:2*i*Math.sin(e)*n,y:Math.sin(t)*n}},a.prototype.degreesToRadians=function(e){return e*(Math.PI/180)},a.prototype.calculateBound=function(e,t,i){return sf.base.isNullOrUndefined(t)||(e=Math.max(e,t)),sf.base.isNullOrUndefined(i)||(e=Math.min(e,i)),e},a.prototype.getTileGeoLocation=function(e,t){var i=this.getBound(this.element.id),n=this.getBound(this.element.id+"_tile_parent");return this.pointToLatLong(e+this.areaRect.x-(n.x-i.x),t+this.areaRect.y-(n.y-i.y))},a.prototype.pointToLatLong=function(e,t){var i=256*Math.pow(2,this.scaleFactor),n=this.clip(e-this.translatePoint.x*Math.pow(2,this.scaleFactor-1),0,i-1)/i-.5,s=.5-this.clip(t-this.translatePoint.y*Math.pow(2,this.scaleFactor-1),0,i-1)/i;return{latitude:90-360*Math.atan(Math.exp(2*-s*Math.PI))/Math.PI,longitude:360*n}},a.prototype.generateTiles=function(e,t){void 0===e&&(e="_animated_tiles"),void 0===t&&(t=null);var i,n=this.baseMapBounds.availableSize.width,s=this.baseMapBounds.availableSize.height,o=0,a=0,l=0;o=i=Math.pow(2,this.tileZoomLevel);var r=[];this.tileTranslatePoint.x+256*o<n&&(a=this.tileTranslatePoint.x>0?Math.ceil(this.tileTranslatePoint.x/256):0,l=this.tileTranslatePoint.x+256*o<n?Math.ceil((n-(this.tileTranslatePoint.x+256*o))/256):0),o+=a+l,o=this.horizontalPanXCount>=o?this.horizontalPanXCount:o,this.horizontalPan=!1;for(var h=Math.min(i,(-this.tileTranslatePoint.y+s)/256+1),d=Math.min(o,(-this.tileTranslatePoint.x+n+256*l)/256+1),p=-(this.tileTranslatePoint.x+256*a+256)/256,c=-(this.tileTranslatePoint.y+256)/256,g=Math.round(p);g<Math.round(d);g++)for(var m=Math.round(c);m<Math.round(h);m++){var u=256*g+this.tileTranslatePoint.x,f=256*m+this.tileTranslatePoint.y;if(u>-256&&u<=n&&f>-256&&f<s&&m>=0){var y=g;g<0&&(y=y%i+i);var _={x:y%i,y:m,left:u,top:f,height:256,width:256,src:null};-1===this.urlTemplate.indexOf("virtualearth")?_.src=this.urlTemplate.replace("level",(t||this.scaleFactor).toString()).replace("tileX",_.x.toString()).replace("tileY",_.y.toString()):_.src=this.getBingMap(_,this.urlTemplate),r.push(_)}}var b=document.getElementById(this.element.id+e);if(sf.base.isNullOrUndefined(b)){var v=document.createElement("div");v.id=this.element.id+"_animated_tiles",v.className=this.tileZoomLevel.toString(),document.getElementById(this.element.id+"_tile_parent").appendChild(v),b=document.getElementById(this.element.id+"_animated_tiles")}for(m=0;m<r.length;m++){var x=b.querySelector("#"+this.element.id+"tile"+m),I=null,T=!1;x?(x.style.removeProperty("display"),I=x.children[0]):((x=document.createElement("div")).id=this.element.id+"tile"+m,(I=document.createElement("img")).alt="",I.width=r[m].width,T=!0),I.src!==r[m].src&&I.setAttribute("src",r[m].src),x.style.position="absolute",x.style.left=r[m].left+"px",x.style.top=r[m].top+"px",x.style.height=r[m].height+"px",x.style.width=r[m].width+"px",x.style.userSelect="none",T&&(x.appendChild(I),b.appendChild(x))}for(var M=r.length;M<b.childElementCount;M++){for(var S=!1,C=0;C<this.currentTiles.childElementCount;C++)S||this.currentTiles.children[C].id!==b.children[M].id||(S=!0);S?b.children[M].style.display="none":b.removeChild(b.children[M])}b.parentElement.style.transform=""},a.prototype.getBingMap=function(e,t){for(var i="",n=["t0","t1","t2","t3"],s=Math.min(this.tileZoomLevel,this.options.maxZoom);s>0;s--){var o=0,a=1<<s-1;0!=(e.x&a)&&o++,0!=(e.y&a)&&(o+=2),i=i+""+o}var l=n[Math.min(parseInt(i.substring(i.length-1,1),10),n.length)];return(t=t.replace("{quadkey}",i).replace("{subdomain}",l))+"&mkt=en-US&ur=IN"},a.prototype.clip=function(e,t,i){return Math.min(Math.max(e,t),i)},a.prototype.svgPoint=function(e,t,i){var n=this.svg.createSVGPoint();return n.x=t-(this.isTileMap?this.areaRect.x:0),n.y=i-(this.isTileMap?this.areaRect.y:0),n.matrixTransform(e.getScreenCTM().inverse())},a.prototype.clusterExpand=function(e,t){var i,n=JSON.parse(t.dataSource),s=parseInt(e[0].split("_LayerIndex_")[1].split("_")[0],10),o=this.allowInnerClusterSetting(s),a=this.markerClusterCollection[s],l=e[0].split("_LayerIndex_"),r=parseInt(l[1].split("_")[0],10),h=[];if(e[0].indexOf("_MarkerIndex_")>-1){var d=parseInt(l[1].split("_MarkerIndex_")[1].split("_")[0],10),p=parseInt(l[1].split("_dataIndex_")[1].split("_")[0],10);if(a=o?this.markerSettings[s][d].MarkerCluster:this.markerClusterCollection[s],!isNaN(d)){i=n[p];var c=[];if(e[0].indexOf("_cluster_")>-1&&a.AllowClustering)for(var g=0;g<n.length;g++)n[g].Latitude===i.Latitude&&n[g].Longitude===i.Longitude&&c.push({data:i,index:r});if(e[0].indexOf("_cluster_")>-1){var m=document.getElementById(e[0].indexOf("_datalabel_")>-1?e[0].split("_datalabel_")[0]:e[0]),u=void 0;"Balloon"===this.markerClusterCollection[s].Shape||sf.base.isNullOrUndefined(m)?sf.base.isNullOrUndefined(m.firstElementChild)||(u=m.firstElementChild.innerHTML.split(",").map(String)):u=m.innerHTML.split(",").map(String),c=[];for(var f=0;f<u.length;f++){var y=this.dataSource[s][parseInt(u[f].split(":")[0])][parseInt(u[f].split(":")[1])];c.push({data:y,index:parseInt(u[f].split(":")[1])}),y.text=""}!1,h.push({data:c,layerIndex:r,markerIndex:d,dataIndex:p,targetClusterIndex:+(e[0].split("_cluster_")[1].indexOf("_datalabel_")>-1?e[0].split("_cluster_")[1].split("_datalabel_")[0]:e[0].split("_cluster_")[1]),isClusterSame:!1})}}}if(h.length>0){this.clusterData=h;var _=document.getElementById(l[0]+"_LayerIndex_"+s+"_MarkerGroup");this.markerClusterExpandCheck?(this.mergeSeparateCluster(this.clusterData,l[0]),this.markerClusterExpandCheck=!1):(this.clusterSeparate(this.clusterData,_,!0,l[0],a),this.markerClusterExpandCheck=!0)}},a.prototype.mergeSeparateCluster=function(e,t){var i,n=e[0].layerIndex,s=e[0].targetClusterIndex,o=e[0].markerIndex,a=t+"_LayerIndex_"+n+"_MarkerIndex_"+o+"_dataIndex_"+e[0].dataIndex+"_cluster_"+s,l=this.getElementId(a),r=this.getElementId(a+"_datalabel_"+s);sf.base.isNullOrUndefined(l)||(l.style.visibility="visible"),sf.base.isNullOrUndefined(r)||(r.style.visibility="visible");var h=e[0].data.length;if(0!==this.clusterLocation.length){var d=[];d="g"===l.tagName?l.firstElementChild.innerHTML.split(",").map(String):l.innerHTML.split(",").map(String);for(var p=0;p<h;p++){var c=parseInt(d[p].split(":")[0]),g=parseInt(d[p].split(":")[1]),m=t+"_LayerIndex_"+n+"_MarkerIndex_"+c;if(i=this.getElementId(m+"_dataIndex_"+g),!sf.base.isNullOrUndefined(i)&&this.clusterLocation.length-1>=p){if(-1===i.parentElement.id.indexOf("Template")){var u=this.markerSettings[n][o];"Balloon"===u.Type?i.setAttribute("transform","translate( "+this.clusterLocation[p].x+" "+this.clusterLocation[p].y+")scale( "+u.Width/30+" "+u.Height/30+" ) "):i.setAttribute("transform","translate( "+this.clusterLocation[p].x+" "+this.clusterLocation[p].y+")")}else i.style.left=this.clusterLocation[p].x+"px",i.style.top=this.clusterLocation[p].y+"px";i.style.visibility="hidden",i.style.content="marker",i.classList.add("e-maps-marker-hidden")}}}this.clusterLocation=[],this.removeElement(t+"_LayerIndex_"+n+"_MarkerIndex_"+o+"_markerClusterConnectorLine")},a.prototype.removeElement=function(e){var t=document.getElementById(e);sf.base.isNullOrUndefined(t)||t.remove()},a.prototype.drawPath=function(e){var t=document.getElementById(e.id);return sf.base.isNullOrUndefined(t)&&(t=document.createElementNS("http://www.w3.org/2000/svg","path")),t.setAttribute("id",e.id),t.setAttribute("d",e.d),t.setAttribute("opacity",e.opacity.toString()),t.setAttribute("stroke",e.stroke),t.setAttribute("stroke-width",e.strokeWidth.toString()),sf.base.isNullOrUndefined(e.fill)||t.setAttribute("fill",e.fill),t},a.prototype.clusterSeparate=function(e,t,i,n,o){var a=e[0].layerIndex,l=e[0].markerIndex,r=e[0].targetClusterIndex,h=e[0].dataIndex,d=(document.getElementById(n).getBoundingClientRect(),i?this.getElementId:t.querySelector.bind(t)),p=i?"":"#",c=n+"_LayerIndex_"+a+"_MarkerIndex_"+l,g=c+"_dataIndex_"+h+"_cluster_"+r,m=d(p+""+g),u=d(p+""+g+"_datalabel_"+r);m.style.visibility="hidden",u.style.visibility="hidden";var f=d(p+""+c+"_dataIndex_"+h),y=25,_=25,b=f&&f.parentElement.id.indexOf("Template")>-1;if(f&&b){var v=f.getBoundingClientRect();y=v.height,_=v.width}var x=+m.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],I=+m.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),T=_+5,M=6.28*T,S=0,C=Math.round(M/_);S+=C;var k=e[0].data.length,B=Math.round(y/M*100);B=k<C?100/k:B;var O=b?360/(C>=k?k:C):B/100*360,L=k<C?45:0,P=1,w="M "+x+" "+I+" ",E="",A=[];A="g"===m.tagName?m.firstElementChild.innerHTML.split(",").map(String):m.innerHTML.split(",").map(String);for(var N=0;N<k;N++){var Z=parseInt(A[N].split(":")[0]),R=parseInt(A[N].split(":")[1]),D=n+"_LayerIndex_"+a+"_MarkerIndex_"+Z;if(S===N||Math.round(L)>=360){for(L=0,M=6.28*(T=(_+5)*++P),C=b?Math.round(M/_):Math.round(M/y),B=Math.round(y/M*100);!b&&(0===B?1:B)*C<100;)C++;O=b?360/C:B/100*360,S+=C}var H=x+T*Math.sin(2*Math.PI*L/360),F=I+T*Math.cos(2*Math.PI*L/360);if(b&&H<=x&&F<=I&&(H-=_/2,F-=y/2),E+=w+"L "+H+" "+F+" ",f=d(p+""+D+"_dataIndex_"+R),sf.base.isNullOrUndefined(f.getAttribute("transform")))f.parentElement.id.indexOf("Template")>-1&&this.clusterLocation.push({x:parseFloat(f.style.left.replace("px","")),y:parseFloat(f.style.top.replace("px",""))});else{var U=parseFloat(f.getAttribute("transform").split("translate(")[1].trim().split(" ")[0]),z=parseFloat(f.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim());this.clusterLocation.push({x:U,y:z})}var X=this.markerSettings[a][Z];-1===f.parentElement.id.indexOf("Template")?"Balloon"===X.Type?f.setAttribute("transform","translate( "+(H-X.Width/2)+" "+(F-X.Height)+"  ) scale( "+X.Width/30+" "+X.Height/30+" ) "):f.setAttribute("transform","translate( "+H+" "+F+")"):(f.style.left=H+"px",f.style.top=F+"px"),f.style.visibility="visible",u.style.visibility="hidden",L+=O}var Y={d:E,id:n+"_LayerIndex_"+a+"_MarkerIndex_"+l+"_dataIndex_"+h+"_markerClusterConnectorLine",stroke:sf.base.isNullOrUndefined(o.LineColor)?"#000000":o.LineColor,opacity:o.LineOpacity,strokeWidth:o.LineWidth};t=i?d(n+"_LayerIndex_"+a+"_MarkerGroup"):t;var G=s(n+"_LayerIndex_"+a+"_MarkerIndex_"+l+"_markerClusterConnectorLine");G.appendChild(this.drawPath(Y)),t.insertBefore(G,t.querySelector("#"+c+"_dataIndex_0"))},a.prototype.getElementId=function(e){return document.getElementById(e)},a.prototype.shapeHighlightHandle=function(e,t,i){var n=this.options.layerHighlightSettings[i];this.handleHighlight(this.targetElementPath,"Shape",{BorderColor:n.BorderColor,BorderWidth:n.BorderWidth/this.scaleFactor,BorderOpacity:n.BorderOpacity,Enable:n.Enable,EnableMultiSelect:n.EnableMultiSelect,Fill:e,Opacity:t})},a.prototype.itemHighlightHandle=function(e,t,i,n,s){if("Bubble"===s){var o=this.options.bubbleHighlightSettings[i][n];this.handleHighlight(this.targetElementPath,"Bubble",{BorderColor:o.BorderColor,BorderWidth:o.BorderWidth,BorderOpacity:o.BorderOpacity,Enable:o.Enable,EnableMultiSelect:o.EnableMultiSelect,Fill:e,Opacity:t})}if("Marker"===s){var a=this.options.markerHighlightSettings[i][n];this.handleHighlight(this.targetElementPath,"Marker",{BorderColor:a.BorderColor,BorderWidth:a.BorderWidth,BorderOpacity:a.BorderOpacity,Enable:a.Enable,EnableMultiSelect:a.EnableMultiSelect,Fill:e,Opacity:t})}if("Navigation"===s){for(var l=this.options.navigationHighlightSettings[i][n],r=0;r<=this.navigation[i][n].Latitude.length;r++){var h=document.getElementById(this.element.id+"_LayerIndex_"+i+"_NavigationIndex_"+n+"_Line_"+r);this.handleHighlight(h,"Navigation",{BorderColor:l.BorderColor,BorderWidth:l.BorderWidth,BorderOpacity:l.BorderOpacity,Enable:l.Enable,EnableMultiSelect:l.EnableMultiSelect,Fill:e,Opacity:t})}if(""!==this.targetElementPath.getAttribute("marker-start")||""!==this.targetElementPath.getAttribute("marker-end")){var d=document.getElementById(this.targetElementPath.id+"_triangle");this.handleHighlight(d,"Arrow",{BorderColor:d.BorderColor,BorderWidth:d.BorderWidth,BorderOpacity:d.BorderOpacity,Enable:d.Enable,EnableMultiSelect:d.EnableMultiSelect,Fill:e,Opacity:t})}}if("Polygon"===s){var p=this.options.polygonHighlightSettings[i],c=document.getElementById(this.element.id+"_LayerIndex_"+i+"_PolygonIndex_"+n);sf.base.isNullOrUndefined(c)&&(c=document.getElementById(this.element.id+"_LayerIndex_"+i+"_PolygonIndex_"+n+"_LineString"),e="transparent"),this.handleHighlight(c,"Polygon",{BorderColor:p.BorderColor,BorderWidth:p.BorderWidth,BorderOpacity:p.BorderOpacity,Enable:p.Enable,EnableMultiSelect:p.EnableMultiSelect,Fill:e,Opacity:t})}},a.prototype.datalabelAnimate=function(e,t,i,n){var s=0;new sf.base.Animation({}).animate(e,{duration:t,delay:0,progress:function(t){t.timeStamp>t.delay&&(s=(t.timeStamp-t.delay)/t.duration,e.setAttribute("style","user-select: none; visibility: visible;"),e.setAttribute(n?"fill-opacity":"opacity",(i*s).toString()))},end:function(t){e.style.visibility="visible",e.setAttribute(n?"fill-opacity":"opacity",i.toString())}})},a.prototype.elementAnimate=function(e,t,i,n,s,o,a,l,r,h,d){var p=this;sf.base.isNullOrUndefined(a)&&(a=0);var c=n,g=s,m=0,u=e.getAttribute("transform")||"";new sf.base.Animation({}).animate(e,{duration:i,delay:t,progress:function(t){t.timeStamp>t.delay&&!p.isInteracted?(m=(t.timeStamp-t.delay)/t.duration,e.style.visibility="visible",e.setAttribute("transform","translate( "+(c-a*m)+" "+(g-a*m)+" ) scale("+m+")")):p.isInteracted&&(u=e.getAttribute("transform"))},end:function(t){e.style.visibility="visible",p.isInteracted||(e.id.indexOf("_MarkerIndex_")>-1?e.setAttribute("transform",u):e.setAttribute("transform","translate( "+c+" "+g+" )")),p.isInteracted=!1,p.allowAnimationCompleteEvent&&!sf.base.isNullOrUndefined(p.dotNetRef)&&p.dotNetRef.invokeMethodAsync("TriggerAnimation",e)}})},a.prototype.markerAnimation=function(e,t){for(var i=JSON.parse(t.markerData),n=0;n<i.length;n++)for(var s=0;s<i[n].MarkerAnimation.length;s++)if(i[n].MarkerAnimation[s].IsMarkerShape)for(var o=0;o<i[n].MarkerAnimation[s].DataSourceLength;o++){var a=document.getElementById(e+"_LayerIndex_"+n+"_MarkerIndex_"+s+"_dataIndex_"+o),l=sf.base.isNullOrUndefined(this.dataSource[i[n].MarkerAnimation[s].Layer][s][o][i[n].MarkerAnimation[s].ShapeValuePath])?" ":this.dataSource[i[n].MarkerAnimation[s].Layer][s][o][i[n].MarkerAnimation[s].ShapeValuePath];this.elementAnimate(a,i[n].MarkerAnimation[s].AnimationDelay,i[n].MarkerAnimation[s].AnimationDuration,a.transform.baseVal[0].matrix.e,a.transform.baseVal[0].matrix.f,null,0,i[n].MarkerAnimation[s].MarkerType,l,i[n].MarkerAnimation[s].MarkerSizeCollections[o].Width,i[n].MarkerAnimation[s].MarkerSizeCollections[o].Height)}for(n=0;n<this.labelCollection.length;n++){if(null!==this.labelCollection[n]&&this.labelCollection[n].length>0&&this.labelCollection[n][0].AnimationDuration>0)for(s=0;s<(null!==this.labelCollection[n]?this.labelCollection[n].length:0);s++){var r=this.labelCollection[n][s],h=document.getElementById(e+"_LayerIndex_"+n+"_shapeIndex_"+s+"_LabelIndex_"+s),d=document.getElementById(e+"_LayerIndex_"+n+"_shapeIndex_"+s+"_RectIndex_"+s);sf.base.isNullOrUndefined(h)||(this.datalabelAnimate(h,r.AnimationDuration,r.Font.Opacity,!1),sf.base.isNullOrUndefined(d)||this.datalabelAnimate(d,r.AnimationDuration,r.Opacity,!0))}}},a.prototype.bubbleAnimation=function(e,t){for(var i=JSON.parse(t.bubbleData),n=0;n<i.length;n++)for(var s=0;s<i[n].MarkerAnimation.length;s++)for(var o=0;o<i[n].MarkerAnimation[s].DataSourceLength;o++){var a=document.getElementById(e+"_LayerIndex_"+n+"_BubbleIndex_"+s+"_dataIndex_"+o);sf.base.isNullOrUndefined(a)||this.elementAnimate(a,i[n].MarkerAnimation[s].AnimationDelay,i[n].MarkerAnimation[s].AnimationDuration,a.transform.baseVal[0].matrix.e,a.transform.baseVal[0].matrix.f,null,0," "," ",0,0)}},a.prototype.toolbarOpacity=function(e,t){this.removeZoomOpacity(t,e,t,e,t,e,t,e,t,e)},a.prototype.allowInnerClusterSetting=function(e){for(var t=!1,i=0;i<this.markerSettings[e].length;i++)if(this.markerSettings[e][i].MarkerCluster.AllowClustering){t=!0;break}return t},a.prototype.clusterMarkerProcess=function(){for(var e=!1,t=0;t<this.layerCount;t++)e||(this.mergeSeparation(),this.removeCluster(),e=!0),this.clusterMarkers(t)},a.prototype.clusterMarkers=function(e){for(var t,i=this.allowInnerClusterSetting(e),n=i?this.markerSettings[e].length:1,a=0;a<n;a++)if(t=!i&&this.markerClusterCollection[e].AllowClustering?this.markerClusterCollection[e]:this.markerSettings[e][a]?this.markerSettings[e][a].MarkerCluster:null,!sf.base.isNullOrUndefined(t)&&t.AllowClustering){var l=void 0,r=void 0,h=this.id,d=[],p=[],c=0,g=0,m=s(h+"_LayerIndex_"+e+"_cluster"),u=3.75,f=0,y=void 0,_=void 0,b=void 0,v=[],x=document.getElementById(h+"_LayerIndex_"+e+"_Markers_Template_Group"),I=x.childElementCount>0;I&&0===x.querySelectorAll('[id*="LayerIndex_'+e+"_MarkerIndex_"+a+'"]').length&&(I=!1);var T=document.getElementById(h),M=I?document.getElementById(h+"_LayerIndex_"+e+"_Markers_Template_Group"):document.getElementById(h+"_LayerIndex_"+e+"_MarkerGroup"),S=i&&t.AllowClustering?M.querySelectorAll("[id*='LayerIndex_"+e+"_MarkerIndex_"+a+"']:not([id*='_Group'])"):M.childNodes;if(M)for(var C=0;C<S.length;C++)if(!(S[C].id.indexOf("markerClusterConnectorLine")>-1)&&-1===S[C].id.indexOf("Marker_LayerIndex")){d=[];var k=parseInt(S[C].id.split("_MarkerIndex_")[1].split("_")[0],10),B=parseInt(S[C].id.split("_dataIndex_")[1].split("_")[0],10),O=("Balloon"===this.markerSettings[e][k].Type||"Image"===this.markerSettings[e][k].Type)&&sf.base.isNullOrUndefined(this.markerSettings[e][k].ShapeValuePath);if("hidden"!==S[C].style.visibility){var L=(_=S[C]).getBoundingClientRect();if(d.push(k.toString()+":"+B.toString()),null!==L){for(var P=C+1;P<S.length;P++)if("hidden"!==S[P].style.visibility&&-1===S[P].id.indexOf("Marker_LayerIndex")){_=S[P];var w=parseInt(_.id.split("_MarkerIndex_")[1].split("_")[0],10),E=parseInt(_.id.split("_dataIndex_")[1].split("_")[0],10),A=_.getBoundingClientRect();null!==A&&(L.left>A.right||L.right<A.left||L.top>A.bottom||L.bottom<A.top||(p.push(A),S[P].style.visibility="hidden",S[P].style.content="marker",S[P].classList.add("e-maps-marker-hidden"),d.push(w.toString()+":"+E.toString())))}if(c=L.left+L.width/2,g=L.top+(O?L.height:L.height/2),p.length>0){var N=T.getBoundingClientRect();c=this.isTileMap?c-N.left-this.areaRect.x:c-N.left,g=this.isTileMap?g-N.top-this.areaRect.y:g-N.top;var Z=parseInt(S[C].id.split("_dataIndex_")[1].split("_")[0],10),R=parseInt(S[C].id.split("_LayerIndex_")[1].split("_")[0],10);S[C].getAttribute("transform")?(c+=this.isTileMap?0:I?this.areaRect.x:0,g+=this.isTileMap?0:I?this.areaRect.y:0):(c=parseFloat(S[C].style.left.replace("px",""))+(this.isTileMap?0:I?this.areaRect.x:0),g=parseFloat(S[C].style.top.replace("px",""))+(this.isTileMap?0:I?this.areaRect.y:0));var D=h+"_LayerIndex_"+R+"_MarkerIndex_"+k+"_dataIndex_"+Z+"_cluster_"+f,H=h+"_LayerIndex_"+R+"_MarkerIndex_"+k+"_dataIndex_"+Z+"_cluster_"+f+"_datalabel_"+f;f++;var F=void 0,U=(this.allowInnerClusterSetting(R)?this.markerSettings[R][k].MarkerCluster.AllowClusterExpand:this.markerClusterCollection[R].AllowClusterExpand)?"pointer":"default";switch(t.Shape){case"Circle":(F=this.createClusterShape("circle",D,t.Fill,t.Opacity,"translate( "+c+" "+g+" )",!0,d,t,U)).setAttribute("r",(t.Height+t.Width)/4);break;case"Rectangle":(F=this.createClusterShape("rect",D,t.Fill,t.Opacity,"translate( "+c+" "+g+" )",!0,d,t,U)).setAttribute("x",-t.Width/2),F.setAttribute("y",-t.Height/2),F.setAttribute("height",t.Height),F.setAttribute("width",t.Width);break;case"Balloon":b=s(D);(F=this.createClusterShape("path",D,t.Fill,t.Opacity,"translate( "+-t.Width/2+", "+-t.Height+" ) scale( "+t.Width/30+", "+t.Height/30+" )",!0,d,t,U)).classList.remove("clusterGroup"),F.setAttribute("d","M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z"),b.appendChild(F),b.style.visibility="visible",b.style.cursor=U,b.setAttribute("class","clusterGroup"),I&&b.classList.add("e-maps-cluster"),b.setAttribute("transform","translate( "+c+" "+g+" )");break;case"Image":var z=-(0+t.Width/2),X=-(0+t.Height/2);(F=this.createClusterShape("image",D,null,null,"translate( "+c+" "+g+" )",!0,d,t,U)).setAttributeNS(null,"height",t.Height),F.setAttributeNS(null,"width",t.Width),F.setAttributeNS("http://www.w3.org/1999/xlink","href",t.ImageUrl),F.setAttributeNS(null,"x",z),F.setAttributeNS(null,"y",X);break;case"Cross":case"Diamond":case"Star":case"Triangle":case"HorizontalLine":case"VerticalLine":case"InvertedTriangle":case"Pentagon":var Y;Y=o(t.Shape,{height:t.Height,width:t.Width},{x:0,y:0}),(F=this.createClusterShape("path",D,t.Fill,t.Opacity,"translate( "+c+" "+g+" )",!1,d,t,U)).setAttribute("d",Y),"Cross"!==t.Shape&&"HorizontalLine"!==t.Shape&&"VerticalLine"!==t.Shape||(F.setAttribute("stroke",t.Fill),F.setAttribute("stroke-width",((t.Width+t.Height)/4).toString()))}"Balloon"!==t.Shape&&(I&&this.isTileMap||F.setAttribute("class","clusterGroup")),I&&"Balloon"!==t.Shape&&F.classList.add("e-maps-cluster");var G=document.createElementNS("http://www.w3.org/2000/svg","text");G.setAttribute("id",H),G.setAttribute("x","0"),G.setAttribute("y",u.toString()),G.setAttribute("fill",t.LabelColor),G.setAttribute("font-size",t.LabelSize),G.setAttribute("font-style",t.LabelFontStyle),G.setAttribute("font-family",t.LabelFontFamily),G.setAttribute("font-weight",t.LabelFontWeight),G.setAttribute("text-anchor","middle"),G.setAttribute("transform","translate( "+c+" "+g+" )"),G.setAttribute("opacity",t.LabelOpacity),G.style.visibility="visible",G.style.cursor=U,G.setAttribute("class","clusterGroup"),G.innerHTML=(p.length+1).toString(),I&&G.classList.add("e-maps-cluster"),m.appendChild(G),m.setAttribute("class","clusterGroup"),"Balloon"!==t.Shape?m.appendChild(F):m.appendChild(b),S[C].style.visibility="hidden",S[C].style.content="marker",S[C].classList.add("e-maps-marker-hidden")}p=[]}}}if(m.childElementCount>0){var W=document.getElementById(h+"_LayerIndex_"+e);W.appendChild(m),y=document.getElementById(h+"_LayerIndex_"+e+"_MarkerGroup");for(C=0;C<m.childElementCount;C++)if("hidden"!==m.children[C].style.visibility&&null!==(l=(_=m.children[C]).getBoundingClientRect())&&!(_.id.indexOf("_datalabel_")>-1)){for(P=C+1;P<m.childElementCount;P++)if("hidden"!==m.children[P].style.visibility){var J=m.children[P];k=parseInt(J.id.split("_MarkerIndex_")[1].split("_")[0],10),B=parseInt(J.id.split("_dataIndex_")[1].split("_")[0],10);null===(r=J.getBoundingClientRect())||J.id.indexOf("_datalabel_")>-1||l.left>r.right||l.right<r.left||l.top>r.bottom||l.bottom<r.top||(v.push(J),v.push(m.children[P-1]),m.children[P].style.visibility="hidden",m.children[P-1].style.visibility="hidden",d.push(k.toString()+":"+B.toString()))}if(v.length>0){_=m.children[C];for(var V=0;V<v.length;V++)"g"===_.tagName?_.children[0].textContent=_.children[0].textContent+","+v[V].textContent:_.textContent=_.textContent+","+v[V].textContent,m.children[C-1].textContent=(+m.children[C-1].textContent+ +v[V+1].textContent).toString(),V++}v=[]}for(;0<m.children.length;)y.insertBefore(m.children[0],y.firstChild);(W=document.getElementById(h+"_LayerIndex_"+e)).appendChild(y),W.removeChild(m)}}},a.prototype.createClusterShape=function(e,t,i,n,s,o,a,l,r){var h=document.createElementNS("http://www.w3.org/2000/svg",e);return h.setAttribute("id",t),h.setAttribute("fill",i),h.setAttribute("stroke",l.BorderColor),h.setAttribute("stroke-width",l.BorderWidth),h.setAttribute("stroke-dasharray",l.DashArray),h.setAttribute("fill-opacity",n),h.setAttribute("stroke-opacity",l.BorderOpacity),h.setAttribute("transform",s),h.setAttribute("style","visibility:visible"),h.setAttribute("style","cursor: "+r),o?h.setAttribute("class","clusterGroup"):h.setAttribute(null,"class","clusterGroup"),h.innerHTML=a,h},a.prototype.mergeSeparation=function(){this.markerClusterExpandCheck&&this.clusterData&&(this.mergeSeparateCluster(this.clusterData,this.id),this.markerClusterExpandCheck=!1)},a.prototype.click=function(e){var t=this;if(this.isResize=!1,"pointerdown"!==e.type||"mouse"!==e.pointerType){var i=e.target.id,n=this.getMousePosition(e.pageX,e.pageY);i.split("_")[0];if((i.indexOf("_Left_Page_Rect")>-1||i.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",i.indexOf("_Left_Page_Rect")>-1?1:0),i.indexOf("_Zooming_")>-1&&this.options.enableZoom){var s="pointerdown"===e.type?"click":e.type,o=1;if(this.isInteracted=!0,this.mergeSeparation(),i.indexOf("_ZoomIn_")>-1&&(o=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,this.triggerEnableZoom(o,i.split("_Zooming_ToolBar_")[1].split("_")[0],s)),i.indexOf("_ZoomOut_")>-1&&(o=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,this.factorCount++,o=o<this.options.minZoom?this.options.minZoom:o,this.scaleFactor!==this.options.minZoom&&this.triggerEnableZoom(o,i.split("_Zooming_ToolBar_")[1].split("_")[0],s)),i.indexOf("_Reset_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){this.zoomClick=!1;var a=i.split("_Zooming_ToolBar_")[1].split("_")[0];this.scaleFactor!==this.options.minZoom&&(this.removeCluster(),this.scaleFactor=this.options.minZoom,this.tileAnimation(a,s))}i.indexOf("_Zoom_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Zoom_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!0,this.isInteracted=!1,this.allowPanning=!1,this.enableSelectionZoom=!0),i.indexOf("_Pan_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Pan_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!1,this.isInteracted=!1,this.allowPanning=!1,this.enableSelectionZoom=!1,this.isPan=!0)}if((i.indexOf("MapAreaBorder")>-1||i.indexOf("shapeIndex")>-1||i.indexOf("_Legend_")>-1||i.indexOf("BubbleIndex")>-1||i.indexOf("Zooming")>-1||i.indexOf("MapMargin")>-1||""===i||!(this.options.tooltipDisplayMode.includes("Click")&&i.indexOf("_MarkerIndex_")>-1)&&this.markerClusterExpandCheck)&&this.mergeSeparation(),(""===i||-1===i.indexOf(this.element.id))&&!sf.base.isNullOrUndefined(e.target.offsetParent)){var l=e.target.offsetParent.id;i=l.indexOf("_MarkerIndex_")>-1?l:i}if(i.indexOf("_LayerIndex_")>-1&&i.indexOf("_MarkerIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var r=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),h=parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10),d=parseInt(i.split("_dataIndex_")[1].split("_")[0],10),p=document.getElementById(i),c=void 0;(i.indexOf("cluster")>-1||i.indexOf("Cluster")>-1)&&(this.mergeSeparation(),i.indexOf("_cluster_")>-1&&i.indexOf("_datalabel_")>-1&&(p=document.getElementById(i.split("_datalabel")[0])),"Balloon"===this.markerClusterCollection[r].Shape?!sf.base.isNullOrUndefined(p.firstElementChild)&&p.firstElementChild.innerHTML.length>0&&(c=p.firstElementChild.innerHTML.split(",")):!sf.base.isNullOrUndefined(p)&&p.innerHTML.length>0&&(c=p.innerHTML.split(","))),this.removeAllHighlight(),(!(i.indexOf("markerClusterConnectorLine")>-1)&&i.indexOf("_MarkerIndex_")>-1||i.indexOf("cluster")>-1&&("click"===e.type||"pointerdown"===e.type))&&this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",r,h,d,i,n.x,n.y,c,i.indexOf("cluster")>-1?"cluster":"marker",this.isTouch)}if(i.indexOf("shapeIndex")>-1&&"Click"===this.options.tooltipDisplayMode&&!sf.base.isNullOrUndefined(this.dotNetRef)){r=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10);var g=parseInt(i.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",i,n.x,n.y,r,g,"Shape",0)}if(i.indexOf("_PolygonIndex_")>-1&&"Click"===this.options.tooltipDisplayMode&&!sf.base.isNullOrUndefined(this.dotNetRef)){r=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10);var m=parseInt(i.split("_PolygonIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",i,n.x,n.y,r,-1,"Polygon",m)}if(i.indexOf("_LayerIndex_")>-1&&i.indexOf("BubbleIndex")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){r=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),h=parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10),d=parseInt(i.split("_dataIndex_")[1].split("_")[0],10),p=document.getElementById(i);this.dotNetRef.invokeMethodAsync("TriggerBubbleClick",r,h,d,i,n.x,n.y,e.layerX,e.layerY)}i.indexOf("_Legend_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.removeAllHighlight(),"touch"===e.pointerType&&"pointerdown"===e.type||this.dotNetRef.invokeMethodAsync("TriggerLegendClick",parseInt(i.split("_Index_")[1].split("_")[0],10)));var u=e.target.closest("#"+this.element.id+"_Tooltip_TooltipTemplate");if(-1===i.indexOf("_shapeIndex_")&&-1===i.indexOf("_MarkerIndex_")&&-1===i.indexOf("_BubbleIndex_")&&-1===i.indexOf("_PolygonIndex_")&&"Click"===this.options.tooltipDisplayMode&&sf.base.isNullOrUndefined(u)&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",n.x,n.y,0,0,"",0),"touch"===e.pointerType&&-1===i.indexOf("_cluster_")&&(i.indexOf("_shapeIndex_")>-1||i.indexOf("BubbleIndex")>-1||i.indexOf("_MarkerIndex_")>-1||i.indexOf("_PolygonIndex_")>-1)){r=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),h=i.indexOf("_BubbleIndex_")>-1?parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10):i.indexOf("_PolygonIndex_")>-1?parseInt(i.split("_PolygonIndex_")[1].split("_")[0],10):i.indexOf("_MarkerIndex_")>-1?parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10):parseInt(i.split("_shapeIndex_")[1].split("_")[0],10),d=i.indexOf("_BubbleIndex_")>-1||i.indexOf("_MarkerIndex_")>-1?parseInt(i.split("_dataIndex_")[1].split("_")[0],10):0;var f=i.indexOf("_BubbleIndex_")>-1?"Bubble":i.indexOf("_MarkerIndex_")>-1?"Marker":i.indexOf("_PolygonIndex_")>-1?"Polygon":"Shape";clearTimeout(this.tooltipCountTimer),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",i,n.x,n.y,r,"Shape"===f?h:"Polygon"===f?-1:d,f,h);var y=this.getTooltipDuration(i);y>0&&(this.tooltipCountTimer=setTimeout((function(){sf.base.isNullOrUndefined(t.dotNetRef)||t.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",n.x,n.y,0,0,"",0)}),y))}this.renderTitleTooltip(i,n,e),this.renderLegendTitleTooltip(i,n,e),this.renderLegendTextTooltip(i,n,e),this.renderInteractiveLegend(i,e)}},a.prototype.removeCluster=function(){var e=document.querySelectorAll('[class="clusterGroup"]');if(e.length>0)for(var t=0;t<e.length;t++)document.getElementById(e[t].id).remove();if((e=document.querySelectorAll('[class="clusterGroup e-maps-cluster"]')).length>0)for(t=0;t<e.length;t++){if(e[t].id.indexOf("_datalabel")>-1){var i=e[t].id.split("_datalabel")[0],n=document.getElementById(i);n&&n.remove()}document.getElementById(e[t].id).remove()}var s=document.querySelectorAll('[class="e-maps-marker-hidden"]');for(t=0;t<s.length;t++){var o=document.getElementById(s[t].id);o.style.visibility="visible",o.classList.remove("e-maps-marker-hidden")}},a.prototype.createImageUrl=function(e,t){var i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+e.outerHTML+"</svg>";return window.URL.createObjectURL(new Blob("SVG"===t?[i]:[(new XMLSerializer).serializeToString(e)],{type:"image/svg+xml"}))},a.prototype.imageExport=function(i,n,s,o){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){return e=this,[2,new Promise((function(t,a){var l=document.createElement("canvas"),r=e.element.getBoundingClientRect();l.width=r.width,l.height=r.height;var h=document.getElementById(e.element.id+"_svg"),d=e.createImageUrl(h,i),p=document.getElementById(e.element.id+"_animated_tiles").children.length,c=l.getContext("2d"),g=document.getElementById(e.element.id+"_Map_title"),m=document.getElementById(e.element.id+"_MapMargin");sf.base.isNullOrUndefined(m)||(c.fillStyle=m.getAttribute("fill"),"Tailwind"!==o&&"Tailwind3"!==o&&"Bootstrap5"!==o&&"Fluent"!==o&&"Material3"!==o&&"Fluent2"!==o||"rgba(255, 255, 255, 0)"!==c.fillStyle&&"rgba(0, 0, 0, 0)"!==c.fillStyle&&"transparent"!==c.fillStyle?"TailwindDark"!==o&&"Tailwind3Dark"!==o&&"Bootstrap5Dark"!==o&&"FluentDark"!==o&&"Material3Dark"!==o&&"Fluent2Dark"!==o&&"Fluent2HighContrast"!==o||"rgba(255, 255, 255, 0)"!==c.fillStyle&&"rgba(0, 0, 0, 0)"!==c.fillStyle&&"transparent"!==c.fillStyle||(c.fillStyle="rgba(0, 0, 0, 1)"):c.fillStyle="rgba(255,255,255, 1)",c.fillRect(0,0,r.width,r.height)),sf.base.isNullOrUndefined(g)||(c.font=g.getAttribute("font-size")+" Arial",c.fillStyle=g.getAttribute("fill"),c.fillText(g.textContent,parseFloat(g.getAttribute("x")),parseFloat(g.getAttribute("y")))),c.save();var u=document.getElementById(e.element.id+"_Tile_SVG_Parent");c.rect(parseFloat(u.style.left),parseFloat(u.style.top),parseFloat(u.style.width),parseFloat(u.style.height)),c.clip(),c.fillRect(0,0,r.width,r.height),e.exportedCount=0;for(var f=[],y=0;y<p;y++){var _=document.getElementById(e.element.id+"tile"+y),b=new Image;b.crossOrigin="Anonymous",f.push(e.renderImages(l,_,c,b,p,i,n,d,e,s)),b.src=_.children[0].getAttribute("src")}Promise.all(f).then((function(e){for(var i=0;i<e.length;i++)if(null!=e[i]){t(e[i]);break}}))}))]}))}))},a.prototype.renderImages=function(e,t,i,n,s,o,a,l,r,h){return new Promise((function(d,p){n.onload=function(){r.exportedCount++,i.setTransform(1,0,0,1,parseFloat(t.style.left)+10,parseFloat(t.style.top)+parseFloat(document.getElementById(r.element.id+"_tile_parent").style.top));if(i.drawImage(n,0,0,257,257),r.exportedCount===s){var p=document.getElementById(r.element.id+"_Tile_SVG_Parent");l=r.createImageUrl(p.children[0],o);var c=new Image;c.onload=function(){if(i.setTransform(1,0,0,1,parseFloat(p.style.left),parseFloat(p.style.top)),i.drawImage(c,0,0),h)r.triggerDownload(o,a,e.toDataURL("image/png").replace("image/png","image/octet-stream")),d(null);else{var t="JPEG"===o?e.toDataURL("image/jpeg"):"PNG"===o?e.toDataURL("image/png"):"";d(t)}},c.src=l}else d(null)}}))},a.prototype.triggerDownload=function(e,t,i){var n=document.createElement("a");n.download=t+"."+e.toLocaleLowerCase(),n.href=i,n.click()},a.prototype.getMousePosition=function(e,t){var i=this.element.getBoundingClientRect(),s=this.element.ownerDocument.defaultView.scrollX,o=this.element.ownerDocument.defaultView.scrollY,a=this.element.ownerDocument.documentElement.clientTop,l=this.element.ownerDocument.documentElement.clientLeft;return this.positionX=i.left+s-l,this.positionY=i.top+o-a,new n(e-this.positionX,t-this.positionY)},a.prototype.getBound=function(e){var t=document.getElementById(e);return{x:t.offsetLeft,y:t.offsetTop}},a.prototype.createToolbarStyle=function(e,t){var i=document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path");sf.base.isNullOrUndefined(i)||i.setAttribute("stroke",this.toolbarColor),this.enableSelectionZoom||(this.zoomClick=!1);var n=document.getElementById(this.element.id+"_zoomToolbar_style");n&&n.parentNode.removeChild(n);var s=".e-maps-toolbar:hover { opacity:1; } .e-maps-toolbar:hover > circle { stroke:"+e+"; } .e-maps-toolbar:hover > path { fill: "+e+" ;  stroke: "+e+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",o=document.createElement("style");o.id=this.element.id+"_zoomToolbar_style",o.appendChild(document.createTextNode(s)),t.appendChild(o)},a.prototype.render=function(){this.wireEvents()},a}();return{getMarker:function(e,t,i){var n=window.sfBlazor.getCompInstance(i);n&&n.element&&n.clusterExpand(e,t)},markerCluster:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.clusterMarkerProcess()},clusterSeperation:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.mergeSeparation()},itemHighlight:function(e,t,i,n,s,o){var a=window.sfBlazor.getCompInstance(o);a&&a.element&&a.itemHighlightHandle(e,t,i,n,s)},shapeHighlight:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(n);s&&s.element&&s.shapeHighlightHandle(e,t,i)},panDirection:function(e,t,i,n,s,o){var a=window.sfBlazor.getCompInstance(o);if(a&&a.element){var l=document.getElementById(a.element.id+"_animated_tiles");a.isTileMap&&!sf.base.isNullOrUndefined(l)&&(a.currentTiles=l.cloneNode(!0)),a.panning(e,t,i,n,s,!1),sf.base.isNullOrUndefined(a.dotNetRef)||a.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",a.isTileMap?a.translatePoint:a.shapeTranslatePoint,a.tileTranslatePoint,a.scaleFactor,!1)}},initialize:function(e,t,i){return new a(e.id,e,t,i).render(),this.getElementSize(e.id)},updateInstance:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.dataSource=t.dataSource?JSON.parse(t.dataSource):null,i.options.layerHighlightSettings=JSON.parse(t.layerHighlightSettings),i.options.markerHighlightSettings=JSON.parse(t.markerHighlightSettings),i.options.bubbleHighlightSettings=JSON.parse(t.bubbleHighlightSettings),i.options.navigationHighlightSettings=JSON.parse(t.navigationHighlightSettings),i.options.polygonHighlightSettings=JSON.parse(t.polygonHighlightSettings),i.options.selectionSettings=JSON.parse(t.selectionSettings))},getElementSize:function(e){var t,i,n,s,o=document.getElementById(e);if(null!==o){var a=o.getBoundingClientRect();t=a.width,i=a.height,n=a.x,s=a.y}return{width:t,height:i,isIE:sf.base.Browser.isIE,x:n,y:s,isDevice:sf.base.Browser.isDevice}},getElementBounds:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},getBound:function(e){var t=document.getElementById(e);return{x:t.offsetLeft,y:t.offsetTop}},getBoundData:function(e){var t=document.getElementById(e);return{x:t.getBoundingClientRect().x,y:t.getBoundingClientRect().y}},getTileZoom:function(i,n,s,o,a,l,r){return e(this,void 0,void 0,(function(){var e,h,d,p,c,g,m,u,f,y,_;return t(this,(function(t){switch(t.label){case 0:e=document.getElementById(i+"_animated_tiles"),h=parseInt(e.className,10),e.children[r].setAttribute("style","top:"+s+"; height:"+a+";width:"+l+"; left:"+n+"; position:absolute;"),e.children[r].innerHTML="",(d=document.createElement("img")).src=o,e.children[r].appendChild(d),p=document.getElementById(i+"_LayerCollections"),c=0,t.label=1;case 1:if(!(c<p.children.length))return[3,8];g=0,t.label=2;case 2:if(!(g<p.children[c].childElementCount))return[3,7];if(!(p.children[c].children[g].id.indexOf("MarkerGroup")>-1))return[3,6];m=0,t.label=3;case 3:return m<p.children[c].children[g].childElementCount?(u=parseInt(p.children[c].children[g].children[m].id.split("_LayerIndex_")[1].split("_")[0],10),f=parseInt(p.children[c].children[g].children[m].id.split("_MarkerIndex_")[1].split("_")[0],10),y=parseInt(p.children[c].children[g].children[m].id.split("_dataIndex_")[1].split("_")[0],10),[4,this.dotNetRef.invokeMethodAsync("ZoomMarker",u,f,y,0,0,h)]):[3,6];case 4:_=t.sent(),p.children[c].children[g].children[m].setAttribute("transform","translate("+_[0]+","+_[1]+")"),t.label=5;case 5:return m++,[3,3];case 6:return g++,[3,2];case 7:return c++,[3,1];case 8:return[2,r]}}))}))},getLayer:function(e){var t=document.getElementById(e+"_LayerCollections").getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},getElement:function(e){var t=document.getElementById(e).getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},getSvg:function(e){var t=document.getElementById(e+"_svg").getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},updateTileTranslatePoint:function(e,t,i,n,s,o,a,l,r,h,d,p){var c=window.sfBlazor.getCompInstance(p);c&&c.element&&(c.tileTranslatePoint={x:e.x,y:e.y},c.translatePoint={x:t.x,y:t.y},c.areaRect={x:i,y:n,width:s,height:o},c.marginLeft=a,c.marginTop=l,c.labelCollection=JSON.parse(h),c.dataLabelTemplateCollection=JSON.parse(d),c.tileZoomLevel=c.options.factor=c.scaleFactor=r,(r===c.options.maxZoom||r>1||1===r)&&""===c.previousId&&(sf.base.Browser.isDevice&&c.setToolbarButtonColor(c.tileZoomLevel,p+"_Zooming_"),r===c.options.maxZoom&&document.getElementById(c.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(c.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",c.toolbarColor),document.getElementById(c.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",c.toolbarColor),c.isPan=!1)),c.isTileMap&&c.previousId.indexOf("_Reset_")>-1&&(c.options.enablePanning||document.getElementById(c.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(c.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",c.toolbarColor),document.getElementById(c.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",c.toolbarColor)),c.enableSelectionZoom=!c.enableSelectionZoom&&c.enableSelectionZoom),c.isPan=!!(c.previousId.indexOf("_Reset_")>-1&&c.options.enablePanning)||c.isPan)},updateTranslatePoint:function(e,t,i,n,s,o,a,l,r,h,d){var p=window.sfBlazor.getCompInstance(d);p&&p.element&&(p.shapeTranslatePoint=e,p.areaRect={x:t,y:i,width:n,height:s},p.marginLeft=o,p.marginTop=a,p.options.factor=p.scaleFactor=l,p.labelCollection=JSON.parse(r),p.dataLabelTemplateCollection=JSON.parse(h))},updateZoomSettings:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableZoom=t.enable,i.options.zoomOnClick=t.zoomOnClick,i.options.zoomOnMarkerClick=t.zoomOnMarkerClick,i.options.doubleClickZoom=t.doubleClickZoom,i.options.enablePanning=t.enablePanning,i.options.enablePinchZooming=t.pinchZooming,i.options.enableSelectionZooming=t.enableSelectionZooming,i.options.enableMouseWheelZoom=t.mouseWheelZoom)},updateMarkerCollection:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.dataSource=JSON.parse(t.markerDataSource))},updateCollection:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.layerHighlightSettings=JSON.parse(t.layerHighlightSettings),i.options.markerHighlightSettings=JSON.parse(t.markerHighlightSettings),i.options.navigationHighlightSettings=JSON.parse(t.navigationHighlightSettings),i.options.polygonHighlightSettings=JSON.parse(t.polygonHighlightSettings),i.bubbleCollection=JSON.parse(t.bubble),i.labelCollection=JSON.parse(t.dataLabel),i.dataLabelTemplateCollection=JSON.parse(t.dataLabelTemplate),i.markerSettings=JSON.parse(t.markerSettings),i.geometryType=JSON.parse(t.geometryType),i.layerTooltipSettings=JSON.parse(t.layerTooltipSettings),i.allowMarkerDragStartEvent=t.allowMarkerDragStartEvent,i.allowAnimationCompleteEvent=t.allowAnimationCompleteEvent,i.allowMarkerMouseLeaveEvent=t.allowMarkerMouseLeaveEvent,i.allowRightClickEvent=t.allowRightClickEvent,i.allowDoubleClickEvent=t.allowDoubleClickEvent,i.allowClickEvent=t.allowClickEvent,i.navigation=JSON.parse(t.navigationLine),i.polygon=JSON.parse(t.polygon),i.markerClusterCollection=JSON.parse(t.markerCluster),i.baseMapBounds={latitudeMax:t.latitudeMax,latitudeMin:t.latitudeMin,longitudeMax:t.longitudeMax,longitudeMin:t.longitudeMin,minBounds:t.minBounds,maxBounds:t.maxBounds,availableSize:t.availableSize,mapsAreaRect:t.mapsAreaRect},i.isTileMap=t.isTileMap,i.animationDuration=t.animationDuration,i.legendSettings=JSON.parse(t.legendSettings),i.legendDetails=null!=t.legendDetails?JSON.parse(t.legendDetails):null,i.legendFill=null!=t.legendFill?JSON.parse(t.legendFill):null,i.legendShapeCollection=null!=t.legendShapeCollection?JSON.parse(t.legendShapeCollection):null,i.urlTemplate=t.urlTemplate,i.dataSource=JSON.parse(t.markerDataSource),i.polygonDataSource=JSON.parse(t.polygonDataSource),i.toolbarSelection=t.toolbarSelection,i.toolbarColor=t.toolbarColor,i.mapsBorderWidth=t.mapsBorder,i.toolbarButtonOpacity=t.toolbarButtonOpacity,i.toolbarShapeOpacity=t.toolbarShapeOpacity,i.removeAllHighlight())},updateLayerHighlight:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(n);s&&s.element&&(i?(s.options.layerHighlightSettings[e].BorderColor=t.borderColor,s.options.layerHighlightSettings[e].BorderWidth=t.borderWidth,s.options.layerHighlightSettings[e].BorderOpacity=t.borderOpacity):(s.options.layerHighlightSettings[e].Fill=t.fill,s.options.layerHighlightSettings[e].Opacity=t.opacity,s.options.layerHighlightSettings[e].Enable=t.enable))},updateMarkerHighlight:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(s);o&&o.element&&(n?(o.options.markerHighlightSettings[e][t].BorderColor=i.borderColor,o.options.markerHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.markerHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.markerHighlightSettings[e][t].Fill=i.fill,o.options.markerHighlightSettings[e][t].Opacity=i.opacity,o.options.markerHighlightSettings[e][t].Enable=i.enable))},updateBubbleHighlight:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(s);o&&o.element&&(n?(o.options.bubbleHighlightSettings[e][t].BorderColor=i.borderColor,o.options.bubbleHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.bubbleHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.bubbleHighlightSettings[e][t].Fill=i.fill,o.options.bubbleHighlightSettings[e][t].Opacity=i.opacity,o.options.bubbleHighlightSettings[e][t].Enable=i.enable))},updateTooltipDisplayMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.tooltipDisplayMode=t)},updateNavigationHighlight:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(s);o&&o.element&&(n?(o.options.navigationHighlightSettings[e][t].BorderColor=i.borderColor,o.options.navigationHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.navigationHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.navigationHighlightSettings[e][t].Fill=i.fill,o.options.navigationHighlightSettings[e][t].Opacity=i.opacity,o.options.navigationHighlightSettings[e][t].Enable=i.enable))},updatePolygonHighlight:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(n);s&&s.element&&(i?(s.options.polygonHighlightSettings[e].BorderColor=t.borderColor,s.options.polygonHighlightSettings[e].BorderWidth=t.borderWidth,s.options.polygonHighlightSettings[e].BorderOpacity=t.borderOpacity):(s.options.polygonHighlightSettings[e].Fill=t.fill,s.options.polygonHighlightSettings[e].Opacity=t.opacity,s.options.polygonHighlightSettings[e].Enable=t.enable))},exportToImage:function(i,n,s,o,a){return e(this,void 0,void 0,(function(){var l,r,h=this;return t(this,(function(d){switch(d.label){case 0:return(r=window.sfBlazor.getCompInstance(o))&&r.element?[4,r.imageExport(i,n,s,a)]:[3,2];case 1:l=d.sent(),d.label=2;case 2:return l instanceof Promise?[4,l.then((function(i){return e(h,void 0,void 0,(function(){return t(this,(function(e){return[2,i]}))}))}))]:[3,4];case 3:return d.sent(),[3,5];case 4:return[2,l];case 5:return[2]}}))}))},getLegendRect:function(e,t){var i=document.getElementById(e).getBoundingClientRect(),n=e.split("_Legend_")[0],s=document.getElementById(n).getBoundingClientRect();return{x:i.left-s.left,y:i.top-s.top,width:i.width,height:i.height}},markerAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.markerAnimation(e,t)},layerAnimation:function(e,t,i,n,s,o){var a=window.sfBlazor.getCompInstance(e);if(a&&a.element)for(var l=document.getElementById(e+"_LayerIndex_0"),r=0;r<l.children.length;r++)null!==l.children[r].getAttribute("transform")&&this.zoomAnimation(l.children[r],0,o,n,s,t,i,a)},slope:function(e,t){return e.x===t.x?null:(t.y-e.y)/(t.x-e.x)},interception:function(e,t){return null===t?e.x:e.y-t*e.x},zoomAnimation:function(e,t,i,n,s,o,a,l){var r=0,h={x:n.x,y:n.y},d=s-a,p={x:0,y:0},c=1;if(s!==a){var g=this.slope(o,h),m=this.interception(o,g),u=h.x-o.x,f=h.y-o.y;e.style.removeProperty("visibility"),this.animate(e,i,(function(e){e.timeStamp>e.delay&&(r=(e.timeStamp-e.delay)/e.duration,c=a+r*d,p.x=o.x+r*u/(c/s),sf.base.isNullOrUndefined(g)?p.y=o.y+r*f:p.y=g*p.x+m,l.applyTransform(c,p))}),(function(t){l.applyTransform(s,h),this.markerCluster(l.id),l.allowAnimationCompleteEvent&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerAnimation",e)}))}else e.setAttribute("transform","scale( "+s+" ) translate( "+h.x+" "+h.y+" )")},bubbleAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.bubbleAnimation(e,t)},animate:function(e,t,i,n){var s=this,o=null,a=0,l=function(r){o||(o=r);var h=r-o;h<t?(i.call(s,{element:e,delay:0,timeStamp:h,duration:t}),window.requestAnimationFrame(l)):(window.cancelAnimationFrame(a),n.call(s,{element:e}),e.setAttribute("style","visibility:visible"))};a=window.requestAnimationFrame(l)},getToolbarAlign:function(e,t){var i,n,s=t.verticalAlignment,o=t.horizontalAlignment,a=document.getElementById(e+"_Zooming_KitCollection");sf.base.isNullOrUndefined(a)||(i=a.getBoundingClientRect());var l=document.getElementById(e+"_ToolBar");sf.base.isNullOrUndefined(l)||(n=l.getBoundingClientRect());var r=0,h=0;switch(s){case 0:h=t.y;break;case 1:h=t.height/2-i.height/2+t.mapsBorder;break;case 2:h=t.height-i.height+t.mapsBorder-2*t.buttonPadding}switch(o){case 0:r=t.x;break;case 1:r=t.width/2-(sf.base.isNullOrUndefined(i)?0:0===i.width?n.width:i.width)/2+t.mapsBorder;break;case 2:r=t.width-(sf.base.isNullOrUndefined(i)?0:0===i.width?n.width:i.width)-2*t.buttonPadding+t.mapsBorder}var d=document.getElementById(e+"_ToolBar");d.style.left=r+"px",d.style.top=h+"px",d.style.visibility="visible";var p=t.color,c=window.sfBlazor.getCompInstance(e);c&&c.element&&c.createToolbarStyle(p,d)},getTemplate:function(e,t,i,n,s,o,a,l){for(var r=e[0],h=Object.keys(r),d=t,p=RegExp,c=0;c<h.length;c++)"latitude"!==h[c].toLowerCase()&&"longitude"!==h[c].toLowerCase()&&(d=d.replace(new p("{{:"+h[c]+"}}","g"),r[h[c].toString()]));var g=document.createElementNS("http://www.w3.org/2000/svg","div");g.setAttribute("id",s),g.style.position="absolute",g.style.transform="translate(-50 %, -50 %)",g.style.left=n.toString(),g.style.top=i.toString(),g.innerHTML=d.toString();var m=document.getElementById(l+"_LayerIndex_0_Markers_Template_Group");m.appendChild(g);var u=document.getElementById(l+"_Secondary_Element");return u.appendChild(m),document.getElementById(l).appendChild(u),d},dispose:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy(),window.sfBlazor.disposeWindowsInstance(e)}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js`).then(()=>{sfBlazor.loadDependencies('sfmaps');})})();