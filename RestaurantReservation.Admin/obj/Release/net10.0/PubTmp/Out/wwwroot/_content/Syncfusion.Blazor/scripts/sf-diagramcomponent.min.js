/*!*  filename: sf-diagramcomponent.min.js 
*     version : 31.2.12 
*     Copyright Syncfusion Inc. 2001 - 2025. All rights reserved. 
*     Use of this code is subject to the terms of our license.
*     A copy of the current license can be obtained at any time by e-mailing 
*     licensing@syncfusion.com. Any infringement will be prosecuted under 
*     applicable laws. 
*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"./bundles/sf-diagramcomponent.js":function(e,t,n){"use strict";n.r(t);n("./modules/sf-diagramcomponent.js")},"./modules/sf-diagramcomponent.js":function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Diagram=function(){"use strict";var e=function(){function e(e,t,n,i){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,n=i=0):(void 0===n&&(n=0),void 0===i&&(i=0)),this.x=e,this.y=t,this.width=n,this.height=i}return e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}(),t=function(e,t){this.width=e,this.height=t};function i(e,t){for(var n=t.split(";"),i=0;i<n.length;i++){var r=n[parseInt(i.toString(),10)].split(":");2===r.length&&(e.style[r[0].trim()]=r[1].trim())}}function r(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++)"style"!==n[parseInt(r.toString(),10)]?e.setAttribute(n[parseInt(r.toString(),10)],t[n[parseInt(r.toString(),10)]]):i(e,t[n[parseInt(r.toString(),10)]])}function a(e,t,n){for(var i=e;i&&!(n?i.id===t:o(i,t));)i=i.parentNode;return i}function o(e,t){return(" "+("object"===n(e.className)?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}function s(e){var t=e;if(t)for(;null!==t.parentNode;){var n=t.classList;if(-1!==t.id.indexOf("_diagramlayer")||-1!==t.id.indexOf("_htmlLayer_div")||-1!==t.id.indexOf("_diagramPorts_svg")||-1!==t.id.indexOf("_diagramAdornerLayer"))return!0;if(n.contains("e-symbol-draggable"))return!0;t=t.parentNode}return!1}var l,d,h=function(){function e(e,t){var n=this;this.over=function(e){try{for(var t=document.getElementById("clonedNode"),i=void 0,r=n.symbolPaletteInstance.length-1;r>=0;r--)if(e.dragData.draggable.id===n.symbolPaletteInstance[parseInt(r.toString(),10)].id){i=n.symbolPaletteInstance[parseInt(r.toString(),10)].componentInstance;break}if(i&&i.invokeMethodAsync("SymbolPaletteDragEnter",e.target.id.split("_")[0]),t){sf.base.remove(t);var a=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");a[0].style.width="1px",a[0].style.height="1px"}}catch(e){throw console.log("An unexpected error occurred:",e),e}},this.drop=function(e){try{for(var t=void 0,i=n.symbolPaletteInstance.length-1;i>=0;i--)if(e.dragData.draggable.id===n.symbolPaletteInstance[parseInt(i.toString(),10)].id){t=n.symbolPaletteInstance[parseInt(i.toString(),10)].componentInstance;break}var r=a(e.target,"e-diagram");if(r&&e.event.changedTouches&&e.event.changedTouches.length>0){var o=void 0;for(i=n.symbolPaletteInstance.length-1;i>=0;i--){o=n.symbolPaletteInstance[parseInt(i.toString(),10)].componentInstance;break}o&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,o,void 0,e),t&&t.invokeMethodAsync("SymbolPaletteDrop",r.id,!0)}else t&&t.invokeMethodAsync("SymbolPaletteDrop",r.id,!1);sf.base.remove(e.droppedElement)}catch(e){throw console.log("An unexpected error occurred:",e),e}},this.out=function(e){try{for(var t=void 0,i=n.symbolPaletteInstance.length-1;i>=0;i--)if(e.target&&e.target.children[0].id===n.symbolPaletteInstance[parseInt(i.toString(),10)].id||e.target&&e.target.parentNode&&e.target.parentNode.parentNode&&e.target.parentNode.parentNode.parentElement&&e.target.parentNode.parentNode.parentElement.id===n.symbolPaletteInstance[parseInt(i.toString(),10)].id||n.draggable.target&&n.draggable.target.id===n.symbolPaletteInstance[parseInt(i.toString(),10)].id){t=n.symbolPaletteInstance[parseInt(i.toString(),10)].componentInstance;break}t&&(e.evt.changedTouches&&e.evt.changedTouches.length>0&&window.sfBlazor.Diagram.invokeDiagramEvents(e.evt,t,void 0,e),t.invokeMethodAsync("SymbolPaletteDragLeave"))}catch(e){throw console.log("An unexpected error occurred:",e),e}},this.helper=function(e){var t=document.getElementsByClassName("e-control e-accordion")[0],n=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-dragclone",styles:'color:"transparent" height:"auto",  width:'+t.offsetWidth}),i=document.getElementById("previewID");return null===i&&("touchmove"!==e.sender.type||"touchmove"===e.sender.type&&s(e.sender.target))&&(i=e.sender.target),i?(n.setAttribute("id","helperElement"),document.body.appendChild(n),n):null},this.dragStart=function(e){e.bindEvents(e.dragElement)},this.drag=function(e){try{if(a(e.target,"e-diagram")){if(e.event.touches&&e.event.touches.length>0){var t=void 0;for(o=n.symbolPaletteInstance.length-1;o>=0;o--)if(e.element.id===n.symbolPaletteInstance[parseInt(o.toString(),10)].id){t=n.symbolPaletteInstance[parseInt(o.toString(),10)].componentInstance;break}t&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,t,void 0,e)}}else{for(var i=document.getElementById("previewID"),r=void 0,o=n.symbolPaletteInstance.length-1;o>=0;o--)if(e.element.id===n.symbolPaletteInstance[parseInt(o.toString(),10)].id){r=n.symbolPaletteInstance[parseInt(o.toString(),10)].allowDrag;break}if(i){i.style.visibility="";var s=i.cloneNode(!0);s.style.display="Block",s.style.visibility=!0,s.setAttribute("class","e-cloneproperties e-draganddrop e-dragclone"),s.setAttribute("id","clonedNode");var l=document.getElementById("helperElement");l&&l.children[0]&&l.removeChild(l.children[0]),r||(l.style.opacity="0"),l.appendChild(s)}}}catch(e){throw console.log("An unexpected error occurred:",e),e}},this.dragStop=function(e){var t=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");if(t.length>0&&(t[0].style.width="1px",t[0].style.height="1px"),t.length>1)for(var i=t.length-1;i>0;i--)"helperElement"===t[parseInt(i.toString(),10)].id&&t[parseInt(i.toString(),10)].remove();if(!a(e.target,"e-diagram")){var r=document.getElementById("helperElement");r&&r.remove();for(var o=void 0,s=n.symbolPaletteInstance.length-1;s>=0;s--)if(e.element.id===n.symbolPaletteInstance[parseInt(s.toString(),10)].id){o=n.symbolPaletteInstance[parseInt(s.toString(),10)].componentInstance;break}o&&o.invokeMethodAsync("ElementDropToOutSideDiagram")}},this.symbolPaletteInstance=t,e&&this.initializeDrag(e)}return e.prototype.initializeDrag=function(e){var t=e.children[1];this.draggable=new sf.base.Draggable(t,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,preventDefault:!1});for(var n=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),i=0;i<n.length;i++)this.droppable=new sf.base.Droppable(n[parseInt(i.toString(),10)],{accept:".e-dragclone",drop:this.drop,over:this.over,out:this.out});var r=document.getElementsByClassName("e-acrdn-header-content");for(i=0;i<r.length;i++)r[parseInt(i.toString(),10)].style.textDecoration="inherit"},e.prototype.destroy=function(){this.draggable.destroy()},e}(),c=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))},g=function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},u=!1,m=!1,p=!1,v=!1,f=!1,y=!1,w=!1,b=!1,S=!1,x=!1,E=0,I=!1,H=[],B=!1,k={},A={},T=0,C=0,D={},M=!1,N=!1,P="Arial",L="black",W="Center",_=12,O="None",X="Wrap",K="WrapWithOverflow",Y="CollapseSpace";return{createHtmlElement:function(e,t){try{var n=sf.base.createElement(e);return t&&this.setAttribute(n,t),n}catch(e){throw console.log("An unexpected error occurred:",e),e}},setAttributeSvg:function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++)"style"!==n[parseInt(i.toString(),10)]?e.setAttribute(n[parseInt(i.toString(),10)],t[n[parseInt(i.toString(),10)]]):this.applyStyleAgainstCsp(e,t[n[parseInt(i.toString(),10)]])},applyStyleAgainstCsp:function(e,t){for(var n=t.split(";"),i=0;i<n.length;i++){var r=n[parseInt(i.toString(),10)].split(":");2===r.length&&(e.style[r[0].trim()]=r[1].trim())}},setCanvasSize:function(e,t,n){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",n.toString()))},getHTMLLayer:function(e){var t=null;window[e+"_htmlLayer"]?t=window[e+"_htmlLayer"]:(t=this.getDiagramElement(e).getElementsByClassName("e-html-layer")[0],window[e+"_htmlLayer"]=t);return t},getDiagramElement:function(e,t){var n;return t&&(n=document.getElementById(t)),"msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name?n?n.querySelector("#"+e):document.getElementById(e):n?n.querySelector("#"+CSS.escape(e)):document.getElementById(e)},createCanvas:function(e,t,n){var i=this.createHtmlElement("canvas",{id:e});return this.setCanvasSize(i,t,n),i},setAttribute:function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++)"style"===n[parseInt(i.toString(),10)]?this.applyStyleAgainstCsp(e,t[n[parseInt(i.toString(),10)]]):e.setAttribute(n[parseInt(i.toString(),10)],t[n[parseInt(i.toString(),10)]])},createMeasureElements:function(e,t,n,i,r,a,o,s,l,d,h){try{this.updateZoomPanTool(e),this.updateDrawingTool(t),this.updateInnerLayerSize(n,i,r,void 0,s,l,d,h),a&&o&&this.onAddWireEvents(a,o);if(window.measureElement)window.measureElement.usageCount+=1;else{var c=this.createHtmlElement("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),g=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"});c.appendChild(g);var u=this.createHtmlElement("img",{});c.appendChild(u);var m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("xlink","http://www.w3.org/1999/xlink"),c.appendChild(m);var p=document.createElementNS("http://www.w3.org/2000/svg","path");m.appendChild(p);var v=document.createElementNS("http://www.w3.org/2000/svg","text");v.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),m.appendChild(v),window.measureElement=c,window.measureElement.usageCount=1,document.body.appendChild(c);window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}}catch(e){throw console.log("An unexpected error occurred:",e),e}},updateZoomPanTool:function(e){w=e},updateDrawingTool:function(e){b=e},updateGridlines:function(e,t,n,i){var r=document.getElementById(e);if(r&&(r.setAttribute("width",t.width.toString()),r.setAttribute("height",t.height.toString()),r.children.length>0))for(var a=0;a<r.children.length;a++)n&&n.length&&a<n.length?r.children[parseInt(a.toString(),10)].setAttribute("d",n[parseInt(a.toString(),10)]):i&&i.length&&a<i.length&&(r.children[parseInt(a.toString(),10)].setAttribute("cx",i[parseInt(a.toString(),10)].x.toString()),r.children[parseInt(a.toString(),10)].setAttribute("cy",i[parseInt(a.toString(),10)].y.toString()))},updatePageBreaks:function(e,t,n,i,r,a,o,s,l,d,h,c){try{var g=document.getElementById(e),u=document.getElementById(t);if(g&&g.children.length>0)for(var m=0;m<g.children.length;m++)g.children[parseInt(m.toString(),10)].setAttribute("x",n),g.children[parseInt(m.toString(),10)].setAttribute("y",i),g.children[parseInt(m.toString(),10)].setAttribute("width",r),g.children[parseInt(m.toString(),10)].setAttribute("height",a);if(u&&u.children.length>0)for(var p=0,v=0;v<u.children.length;v++)if(-1!==u.children[parseInt(v.toString(),10)].id.indexOf("_backgroundLayerrect"))u.children[parseInt(v.toString(),10)].setAttribute("x",n),u.children[parseInt(v.toString(),10)].setAttribute("y",i),u.children[parseInt(v.toString(),10)].setAttribute("width",r),u.children[parseInt(v.toString(),10)].setAttribute("height",a),u.children[parseInt(v.toString(),10)].setAttribute("transform",o);else if(c){var f=s[0+p],y=s[1+p],w=s[2+p],b=s[3+p],S=(f+l)*h,x=(y+d)*h,E=(w+l)*h,I=(b+d)*h;u.children[parseInt(v.toString(),10)].setAttribute("x1",S.toString()),u.children[parseInt(v.toString(),10)].setAttribute("y1",x.toString()),u.children[parseInt(v.toString(),10)].setAttribute("x2",E.toString()),u.children[parseInt(v.toString(),10)].setAttribute("y2",I.toString()),p+=4}}catch(e){throw console.log("An unexpected error occurred:",e),e}},updateInnerLayerSize:function(e,t,n,i,r,a,o,s,l,d,h,c,g,u){try{var m=void 0;d&&(t=(m=this.measureScrollValues(d)).width,n=m.height);var p=void 0;if(null!=e&&null!=t&&null!=n&&e.length>0)for(var v=void 0,f=0;f<e.length-1;f++)if(v=document.getElementById(e[parseInt(f.toString(),10)]),f>=e.length-6){if(-1!==e[parseInt(f.toString(),10)].indexOf("_pattern"))this.updateGridlines(e[parseInt(f.toString(),10)],a,o,s);else if(-1!==e[parseInt(f.toString(),10)].indexOf("gridline")&&r&&v){var w=r.scale,b=-r.tx*w,S=-r.ty*w,x="translate("+r.tx*w+","+r.ty*w+")";v.setAttribute("transform",x),v.children[0].setAttribute("x",b.toString()),v.children[0].setAttribute("y",S.toString())}else if(r&&v){w=r.scale;var E="translate("+r.tx*w+","+r.ty*w+"),scale("+w+")";v.setAttribute("transform",E),p=e[parseInt(f.toString(),10)].split("_")[0];var I=document.getElementById(p+"_diagram_PolygonHelper");I&&I.setAttribute("transform",E);var H=document.getElementById(p+"_diagram_ConnectorHelper");H&&H.setAttribute("transform",E);var B=document.getElementById(p+"_htmlLayer_div"),k="position: absolute; top: 0px; left: 0px; pointer-events: all; transform: translate("+r.tx*w+"px,"+r.ty*w+"px) scale("+w+")";sf.base.updateCSSText(B,k);var A=document.getElementById(p+"_diagramUserHandleLayer_div");A&&u&&A.children.length===u.length&&Array.from(A.children).forEach((function(e,t){var n="position: absolute; top: 0px; left: 0px; pointer-events: all; transform: translate("+u[parseInt(t.toString(),10)].x+"px, "+u[parseInt(t.toString(),10)].y+"px)",i=document.getElementById(e.id+"_content_html_template");i&&sf.base.updateCSSText(i,n)}));var T=document.getElementById(p+"_diagramFixedUserHandleLayer_div");if(T){var C="position: absolute; top: 0px; left: 0px; pointer-events: all; transform: translate("+r.tx*w+"px,"+r.ty*w+"px) scale("+w+")";sf.base.updateCSSText(T,C)}var D=document.getElementById(p+"_SelectorElement");if(l&&D&&D.children.length>0&&D.children.length===l.length){var M=void 0;for(M=0;M<D.children.length;M++)if("line"===D.children[parseInt(M.toString(),10)].tagName){var N=l[parseInt(M.toString(),10)],P=N.startPoint.x+N.x,L=N.startPoint.y+N.y,W=N.endPoint.x+N.x,_=N.endPoint.y+N.y;D.children[parseInt(M.toString(),10)].setAttribute("x1",P.toString()),D.children[parseInt(M.toString(),10)].setAttribute("y1",L.toString()),D.children[parseInt(M.toString(),10)].setAttribute("x2",W.toString()),D.children[parseInt(M.toString(),10)].setAttribute("y2",_.toString()),D.children[parseInt(M.toString(),10)].setAttribute("transform","rotate("+N.angle+" "+(N.x+N.width*N.pivotX)+" "+(N.y+N.height*N.pivotY)+")")}else if("e-diagram-selection-indicator"!==D.children[parseInt(M.toString(),10)].className.baseVal&&"e-diagram-first-selection-indicator e-diagram-selection-indicator"!==D.children[parseInt(M.toString(),10)].className.baseVal||"path"!==D.children[parseInt(M.toString(),10)].tagName)if("path"===D.children[parseInt(M.toString(),10)].tagName){j=l[parseInt(M.toString(),10)];D.children[parseInt(M.toString(),10)].setAttribute("transform","rotate("+j.angle+","+(j.x+j.width*j.pivotX)+","+(j.y+j.height*j.pivotY)+")translate("+j.x+","+j.y+")")}else if("rect"===D.children[parseInt(M.toString(),10)].tagName){var O=l[parseInt(M.toString(),10)];D.children[parseInt(M.toString(),10)].setAttribute("x",O.x),D.children[parseInt(M.toString(),10)].setAttribute("y",O.y),D.children[parseInt(M.toString(),10)].setAttribute("width",O.width),D.children[parseInt(M.toString(),10)].setAttribute("height",O.height),D.children[parseInt(M.toString(),10)].setAttribute("transform","rotate("+O.angle+","+(O.x+O.width*O.pivotX)+","+(O.y+O.height*O.pivotY)+")")}else if("image"===D.children[parseInt(M.toString(),10)].tagName){var X=Number(M),K=D.children[parseInt(X.toString(),10)],Y=l[parseInt(X.toString(),10)],U=(b=Y.x,S=Y.y,Y.width),R=Y.height,z=Y.angle,G=Y.pivotX,V=Y.pivotY;K.setAttribute("x",b),K.setAttribute("y",S),K.setAttribute("width",U),K.setAttribute("height",R),K.setAttribute("transform","rotate("+z+","+(b+U*G)+","+(S+R*V)+")")}else"circle"===D.children[parseInt(M.toString(),10)].tagName&&(D.children[parseInt(M.toString(),10)].setAttribute("cx",l[parseInt(M.toString(),10)].cx),D.children[parseInt(M.toString(),10)].setAttribute("cy",l[parseInt(M.toString(),10)].cy),D.children[parseInt(M.toString(),10)].setAttribute("visibility",l[parseInt(M.toString(),10)].visible?"visible":"hidden"));else{var j=l[parseInt(M.toString(),10)];D.children[parseInt(M.toString(),10)].setAttribute("transform","rotate("+j.angle+","+(j.x+j.width*j.pivotX)+","+(j.y+j.height*j.pivotY)+")translate("+j.x+","+j.y+")scale("+w+")")}}}}else v&&(v.style.width=t,v.style.height=n);if(y&&(y=!1),!d&&null!=e&&e.length>0){var F=document.getElementById(e[e.length-1]);m=this.onChangeScrollValues(F,i)}if(null!=h&&void 0!==p){var J=p+"_backgroundImageLayer",q=p+"_backgroundLayer",Z=(b=(r.tx+h.x)*r.scale,S=(r.ty+h.y)*r.scale,h.height*r.scale),Q=h.width*r.scale,$="rotate("+(z=0)+" "+(b+0*Q)+" "+(S+0*Z)+")";this.updatePageBreaks(J,q,b,S,Q,Z,$,c,r.tx,r.ty,r.scale,g)}return m}catch(e){throw console.log("An unexpected error occurred:",e),e}},onChangeScrollValues:function(e,t){return u&&(u=!1),null!=e&&null!=t&&void 0!==t.x&&void 0!==t.y?(m&&(m=!1,p=!0),e.scrollLeft=t.x,e.scrollTop=t.y,this.measureScrollValues(e.id)):null},measureScrollValues:function(t){try{var n=document.getElementById(t);return new e(n.scrollLeft,n.scrollTop,n.scrollWidth,n.scrollHeight)}catch(e){throw console.log("An unexpected error occurred:",e),e}},measurePath:function(t){try{if(t){window.measureElement.style.visibility="visible";var n=window.measureElement.children[2],i=this.getChildNode(n)[0];i.setAttribute("d",t);var r=i.getBBox(),a=new e(r.x,r.y,r.width,r.height);return window.measureElement.style.visibility="hidden",a}return new e(0,0,0,0)}catch(e){throw console.log("An unexpected error occurred:",e),e}},setVerticalRulerLabelAttribute:function(e,t,n){var i=document.getElementsByClassName(e);if(i.length>0)for(var r=0;r<i.length;r++){var a=i[parseInt(r.toString(),10)];if(a instanceof SVGTextElement){var o=a,s=o.getBBox(),l=n?"-"+(s.width+2)+","+(t/2-s.height):"-"+(s.width+2)+","+(t/2-s.height/2);o.setAttribute("x","0"),o.setAttribute("y",s.height.toString()),o.setAttribute("transform","rotate(270) translate("+l+")"),o.setAttribute("fill","black")}}},openUrl:function(e){return c(this,void 0,void 0,(function(){return g(this,(function(t){return window.open(e,"_blank"),[2]}))}))},textEdit:function(e,t,n,i,a,o,s,l,d){var h=this;try{var c=document.getElementById("diagram_editTextBoxDiv");e.id=l;var g=void 0,u=document.getElementById("diagram_editBox"),m=e.content;if(!c&&!u){c=this.createHtmlElement("div",{}),u=this.createHtmlElement("textarea",{});var p=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),v=-1;if(p.length>0)for(var f=0;f<p.length;f++){var y="#"+p[parseInt(f.toString(),10)].id+"_content";if(p[parseInt(f.toString(),10)].querySelector(y).id.split("_")[0]===n){v=f;break}}if(-1!==v){y="#"+p[parseInt(v.toString(),10)].id+"_content";p[parseInt(v.toString(),10)].querySelector(y).appendChild(c),c.appendChild(u),u.appendChild(document.createTextNode(m)),this.diagram_editTextBoxDiv=c,this.diagram_editBox=u}}var w=e.bounds.width<a.width?e.bounds.width:a.width;w=90>w?90:w;var b=this.measureHtmlText(e.style,t,m,void 0,void 0,w);0===b.width&&0===b.height&&(b.width=50,b.height=12);var S=s?o.scale:1;b.width=Math.max(b.width,50);var x=(i.x+o.tx)*o.scale-b.width/2*S-2.5,E=(i.y+o.ty)*o.scale-b.height/2*S-3;g={id:"diagram_editTextBoxDiv"};var I="position: absolute;left:"+x+"px;top:"+E+"px;width:"+(b.width+1)*S+"px;height:"+b.height*S+"px; containerName:temp;";c.style.cssText=I,r(c,g);var H=e.style;g={id:"diagram_editBox",class:"e-diagram-text-edit"};var B="width: "+(b.width+1)*S+"px; height: "+b.height*S+"px; line-height: normal; resize: none; outline: none; overflow: hidden; font-family: "+H.fontFamily+"; font-size: "+H.fontSize*S+"px; text-align: "+e.style.textAlign.toLowerCase()+";";u.style.cssText=B,r(u,g),u.style.fontWeight=H.bold?"bold":"",u.style.fontStyle=H.italic?"italic":"",u.style.lineHeight=(1.2*H.fontSize+"px;").toString();var k=document.getElementById(e.id+"_text");k&&k.setAttribute("visibility","hidden"),u.style.textDecoration=H.textDecoration?H.textDecoration:"",u.addEventListener("input",(function(n){h.inputChange(n,e,t,a,i,o,s)})),d||(this._onFocusOutBound=this.onFocusOut.bind(this),u.addEventListener("focusout",this._onFocusOutBound),u.select()),window.annotation=e}catch(e){throw console.log("An unexpected error occurred:",e),e}},onFocusOut:function(e){this.endEdit(e)},inputChange:function(e,t,n,i,r,a,o){var s,l,d=this.diagram_editBox,h=this.diagram_editTextBoxDiv,c=d.value,g=c.split("\n");s=(s=Math.min(i.width,t.bounds.width))>90?s:90;var u=this.measureHtmlText(t.style,n,c,void 0,void 0,s),m=Number(d.style.fontSize.split("px")[0]);g.length>1&&""===g[g.length-1]&&(u.height=u.height+m);var p=o?a.scale:1;l=(90>(l=u.width)?90:l)*p;var v=(12>u.height?12:u.height)*p;h.style.left=(r.x+a.tx)*a.scale-l/2-2.5+"px",h.style.top=(r.y+a.ty)*a.scale-v/2-3+"px",h.style.width=l+"px",h.style.height=v+"px",d.style.minHeight="12px",d.style.minWidth="90px",d.style.width=l+"px",d.style.height=v+"px"},measureHtmlText:function(e,t,n,i,r,a){var o={},s=this.createHtmlElement("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(s.style.fontWeight="bold"),e.italic&&(s.style.fontStyle="italic"),null!=i&&(s.style.width=i.toString()+"px"),null!=r&&(s.style.height=r.toString()+"px"),null!=a&&(s.style.maxWidth=a.toString()+"px"),s.style.fontFamily=e.fontFamily,s.style.fontSize=e.fontSize+"px",s.style.color=e.color,s.textContent=n,s.style.whiteSpace=this.whiteSpaceToString(t,e.textWrapping),s.style.wordBreak=null!=a?"break-word":this.wordBreakToString(e.textWrapping),document.body.appendChild(s),o.width=s.offsetWidth,o.height=s.offsetHeight,document.body.removeChild(s),o},getChildNode:function(e){var t,n=[];if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(var i=0;i<e.childNodes.length;i++)1===(t=e.childNodes[parseInt(i.toString(),10)]).nodeType&&n.push(t);else n=e.children;return n},measureBounds:function(e,t,n,i,r){return c(this,void 0,void 0,(function(){var a,o,s,l,d,h,c,u,m,p,v,f,y,w,b,S,x,E,I,H,B,k,C,D,M,N,P,L,W,_;return g(this,(function(g){switch(g.label){case 0:if(g.trys.push([0,3,,4]),a=void 0,o=void 0,null!=i)for(o=document.getElementsByClassName("e-acrdn-panel e-content-hide"),a=[],W=0;W<o.length;W++)a[parseInt(W.toString(),10)]=o[parseInt(W.toString(),10)].style.display,o[parseInt(W.toString(),10)].style.display="block";if(s={},l={},d={},h={},c={},u="measureElement",e)for(N=Object.keys(e).map((function(t){return[e[""+t],t]})),window[""+u].style.visibility="visible",E=window[""+u].children[2],m=this.getChildNode(E)[0],L=0;L<N.length;L++)"Path"===N[parseInt(L.toString(),10)][0]?(f=N[parseInt(L.toString(),10)][1],m.setAttribute("d",f),v=m.getBBox(),M={x:v.x,y:v.y,width:v.width,height:v.height},l[""+f]=M):-1!==N[parseInt(L.toString(),10)][0].indexOf("GetBoundingClientRect")&&((p=document.getElementById(N[parseInt(L.toString(),10)][1]))&&(v=p.getBoundingClientRect(),l[N[parseInt(L.toString(),10)][0]]={x:v.x,y:v.y,width:v.width,height:v.height}),"GetBoundingClientRect"===N[parseInt(L.toString(),10)][0]&&(N[parseInt(L.toString(),10)][1],l.GetScrollerBounds=this.measureScrollValues(N[parseInt(L.toString(),10)][1])));if(t)for(N=Object.keys(t).map((function(e){return[t[""+e],e]})),L=0;L<N.length;L++)f=N[parseInt(L.toString(),10)][1],y=t[""+f].content,w=t[""+f].style,b=t[""+f].bounds,S=t[""+f].nodeSize,b.width=null==b.width?void 0:b.width,b.height=null==b.height?void 0:b.height,S.width=null==S.width?void 0:S.width,S.height=null==S.height?void 0:S.height,d[""+f]=this.measureText(b,w,y,b.width||S.width);return n&&(x=Object.keys(n).map((function(e){return[n[""+e],e]}))).length>0?(0,N={},[4,this.loadImage(x,0,N)]):[3,2];case 1:g.sent(),h=N,g.label=2;case 2:if(i&&(N=Object.keys(i).map((function(e){return[i[""+e],e]})),window[""+u].style.visibility="visible",E=window[""+u].children[2],N.length>0)){for(I={},H={},L=0;L<N.length;L++)B=N[parseInt(L.toString(),10)][0],(k=document.getElementById(B))&&((C=k.cloneNode(!0)).id=C.id+"_copy",E.appendChild(C),D=C.getBoundingClientRect(),M=E.getBoundingClientRect(),H={x:D.left-M.left,y:D.top-M.top,width:D.width,height:D.height},I[N[parseInt(L.toString(),10)][1]]=H,E.removeChild(C));c=I}if(l.GetScrollerWidth=this.getScrollerWidth(),s.Path=l,s.Text=d,s.Image=h,s.Native=c,r){for(28500,N=JSON.stringify(s),(s={}).MeasureData="",P=[],L=0;L<N.length;L+=28500)0===L&&N.length<28500?s.MeasureData=N.slice(L,L+28500):(P.push(T),A[T.toString()]=N.slice(L,L+28500),T++);P.length>0&&(s.ChunkMeasureData=[P[0],P[P.length-1]].toString())}if(null!=a)for(W=0;W<o.length;W++)o[parseInt(W.toString(),10)].style.display=a[parseInt(W.toString(),10)].toString();return window[""+u].style.visibility="hidden",[2,s];case 3:throw _=g.sent(),console.log("An unexpected error occurred:",_),_;case 4:return[2]}}))}))},getChunkPathPointsData:function(e){var t=D[parseInt(e.toString(),10)];return delete D[parseInt(e.toString(),10)],t},getChunkMeasureData:function(e){var t=A[parseInt(e.toString(),10)];return delete A[parseInt(e.toString(),10)],t},measureText:function(e,t,n,i,r){var a={},o={width:0,height:0},s=this.getTextOptions(n,e,t,i),l=this.wrapSvgText(s,r,i),d=this.wrapSvgTextAlign(s,l);return o.width=d.width,d.width>=i&&"Wrap"!==s.textOverflow&&(o.width=i),o.height=l.length*s.fontSize*1.2,d.width>s.width&&"Wrap"!==s.textOverflow&&"NoWrap"===s.textWrapping&&(l[0].text=this.overFlow(s.content,s)),a.Bounds=o,a.WrapBounds=d,a.ChildNodes=l,a},getTextOptions:function(e,t,n,i){var r={fill:n.fill,stroke:n.strokeColor,strokeWidth:n.strokeWidth,dashArray:n.strokeDashArray,opacity:n.opacity,gradient:n.gradient,width:i||t.width,height:t.height};return r.fontSize=n.fontSize||_,r.fontFamily=n.fontFamily||P,r.textOverflow=n.textOverflow||X,r.textDecoration=n.textDecoration||O,r.doWrap=n.doWrap,r.whiteSpace=this.whiteSpaceToString(n.whiteSpace||Y,n.textWrapping||K),r.content=e,r.textWrapping=n.textWrapping||K,r.breakWord=this.wordBreakToString(n.textWrapping||K),r.textAlign=this.textAlignToString(n.textAlign||W),r.color=n.color||L,r.italic=n.italic||N,r.bold=n.bold||M,r.dashArray="",r.strokeWidth=0,r.fill="",r},whiteSpaceToString:function(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var n="";switch(e){case"CollapseAll":n="nowrap";break;case"CollapseSpace":n="pre-line";break;case"PreserveAll":n="pre-wrap"}return n},wordBreakToString:function(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t},textAlignToString:function(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t},wrapSvgText:function(e,t,n){var i,r,a=[],o=0,s=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(i="",i+=s[0],o=0;o<s.length;o++)if((r=this.bBoxText(i,e))>=e.width&&i.length>0)a[a.length]={text:i,x:0,dy:0,width:r},i="";else{(i+=s[o+1]||"").indexOf("\n")>-1&&(a[a.length]={text:i,x:0,dy:0,width:this.bBoxText(i,e)},i="");var l=this.bBoxText(i,e);Math.ceil(l)+2>=e.width&&i.length>0&&(a[a.length]={text:i,x:0,dy:0,width:l},i=""),o===s.length-1&&i.length>0&&(a[a.length]={text:i,x:0,dy:0,width:l},i="")}else a=this.wordWrapping(e,t,n);else a[a.length]={text:s,x:0,dy:0,width:this.bBoxText(s,e)};return a},wordWrapping:function(e,t,n){var i=[],r="",a=0,o=0,s="nowrap"!==e.whiteSpace,l=t||e.content;if(null!=l){var d=l.split("\n"),h=void 0,c=void 0,g=void 0,u=void 0;for(a=0;a<d.length;a++)for(h="NoWrap"!==e.textWrapping?d[parseInt(a.toString(),10)].split(" "):"NoWrap"===e.textWrapping?[d[parseInt(a.toString(),10)]]:d,o=0;o<h.length;o++){r+=((0!==o||1===h.length)&&s&&r.length>0?" ":"")+h[parseInt(o.toString(),10)],c=h[o+1]?r+" "+h[o+1]:r;var m=this.bBoxText(c,e);Math.floor(m)>(n||e.width)-2&&r.length>0?(i[i.length]={text:r,x:0,dy:0,width:c===r?m:r===u?g:this.bBoxText(r,e)},r=""):o===h.length-1&&(i[i.length]={text:r,x:0,dy:0,width:m},r=""),u=c,g=m}}return i},wrapSvgTextAlign:function(e,t){var n,i,r={x:0,width:0},a=0;for(a=0;a<t.length;a++)i=n=t[parseInt(a.toString(),10)].width,n="left"===e.textAlign?0:"center"===e.textAlign?n>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-n/2:"right"===e.textAlign?-n:t.length>1?0:-n/2,t[parseInt(a.toString(),10)].dy=1.2*e.fontSize,t[parseInt(a.toString(),10)].x=n,r?(r.x=Math.min(r.x,n),r.width=Math.max(r.width,i)):r={x:n,width:i};return r},overFlow:function(e,t){var n,i=0,r=0,a=0,o="";n=e.length;var s=0;do{a>0&&(i=r),r=Math.floor(this.middleElement(i,n)),o+=e.substr(i,r),a=this.bBoxText(o,t)}while(a<=t.width);for(o=o.substr(0,i),s=i;s<n;s++)if(o+=e[parseInt(s.toString(),10)],(a=this.bBoxText(o,t))>=t.width){e=e.substr(0,o.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e},middleElement:function(e,t){return(e+t)/2},getScrollerWidth:function(){var e=this.createHtmlElement("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var n=this.createHtmlElement("div",{style:"width:100%"});e.appendChild(n);var i=n.getBoundingClientRect().width;return e.parentNode.removeChild(e),{x:0,y:0,width:t-i,height:0}},pathPoints:function(e,t){return c(this,void 0,void 0,(function(){var n,i,r,a,o,s;return g(this,(function(l){if(n={},e)for(a=Object.keys(e).map((function(t){return[e[""+t],t]})),s=0;s<a.length;s++)a.length>0&&(i=a[parseInt(s.toString(),10)][1],n[a[parseInt(s.toString(),10)][0]]=this.findSegmentPoints(i));if(t){for((r={}).PathPoints=n,28500,a=JSON.stringify(r),o=[],(r={}).PathPoints="",s=0;s<a.length;s+=28500)0===s&&a.length<28500?r.PathPoints=a.slice(s,s+28500):(o.push(C),D[C.toString()]=a.slice(s,s+28500),C++);return o.length>0&&(r.ChunkPathPoints=[o[0],o[o.length-1]].toString()),[2,r]}return[2,n]}))}))},findSegmentPoints:function(e){var t,n=[],i=0;window.measureElement.style.visibility="visible";var r=window.measureElement.children[2],a=this.getChildNode(r)[0];a.setAttributeNS(null,"d",e);var o=a.getTotalLength();for(i=0;i<=o;i+=10)t=a.getPointAtLength(i),n.push({x:t.x,y:t.y});return window.measureElement.style.visibility="hidden",n},loadImage:function(e,t,n){return c(this,void 0,void 0,(function(){var i,a,o;return g(this,(function(s){switch(s.label){case 0:return i=new Promise((function(n,i){var a={};window.measureElement.style.visibility="visible",window.measureElement.children[1].setAttribute("src",e[parseInt(t.toString(),10)][0]),window.measureElement.style.visibility="hidden";var o=document.createElement("img");o.setAttribute("src",e[parseInt(t.toString(),10)][0]),r(o,{id:"imagesf"+t+"imageNode"}),o.style.cssText="display: none;",document.body.appendChild(o),o.onload=function(e){var t=e.currentTarget;a={width:t.width,height:t.height},n(a)},o.onerror=function(){n(a={width:0,height:0})}})),a=n,o=e[parseInt(t.toString(),10)][1],[4,i];case 1:return a[o]=s.sent(),t!==e.length-1?[3,2]:[2,n];case 2:return t++,[4,this.loadImage(e,t,n)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))},bBoxText:function(e,t){window.measureElement.style.visibility="visible";var n=window.measureElement.children[2],r=this.getChildNode(n)[1];r.textContent=e,i(r,"font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var a=r.getBBox().width;return r.textContent="",window.measureElement.style.visibility="hidden",a},endEdit:function(e){setTimeout((function(){var e=document.getElementById(n.id+"_text");e&&e.setAttribute("visibility","visible")}),100);var t=this.diagram_editBox;this._onFocusOutBound&&(t.removeEventListener("focusout",this._onFocusOutBound),this._onFocusOutBound=null);var n=window.annotation,i=t.value,r=n.style,a=n.bounds,o=n.nodeSize;o.width=null==o.width?void 0:o.width,o.height=null==o.height?void 0:o.height;var s={},l={};return s[n.id]=this.measureText(a,r,i,a.width||o.width),s[n.id].Content=i,l.Text=s,this.diagram_editTextBoxDiv.remove(),l},onAddWireEvents:function(e,t){var n=this;try{var i=document.getElementById(e);if(!i)return;k[""+e]=t,sf.base.EventHandler.add(i,"mousedown",(function(e){return n.diagramMouseDownHandler(e,t)}),this),sf.base.EventHandler.add(i,"mousemove",(function(e){return n.diagramMouseMoveHandler(e,t)}),this),sf.base.EventHandler.add(i,"mouseup",(function(e){return n.diagramMouseUpHandler(e,t)}),this),sf.base.EventHandler.add(i,"mouseleave",(function(e){return n.diagramMouseLeaveHandler(e,t)}),this),sf.base.EventHandler.add(i,"touchstart",(function(e){return n.diagramTouchStartHandler(e,t)}),this),sf.base.EventHandler.add(i,"touchmove",(function(e){return n.diagramTouchMoveHandler(e,t)}),this),sf.base.EventHandler.add(i,"touchend",(function(e){return n.diagramTouchEndHandler(e,t)}),this),sf.base.EventHandler.add(i,"scroll",(function(e){return n.diagramScrollHandler(e,t)}),this),sf.base.EventHandler.add(i,"mousewheel",(function(e){return n.diagramMouseWheelHandler(e,t)}),this),sf.base.EventHandler.add(i,"wheel",(function(e){return n.diagramWheelHandler(e,t)}),this),sf.base.EventHandler.add(i,"keydown",(function(e){return n.diagramKeyDownHandler(e,t)}),this),sf.base.EventHandler.add(i,"keyup",(function(e){return n.diagramKeyUpHandler(e,t)}),this),window.addEventListener("resize",this.windowResizeHandler.bind(this))}catch(e){throw console.error("An unexpected error occurred in addWireEvents:",e),e}},diagramMouseDownHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramMouseMoveHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramMouseUpHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramMouseLeaveHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramTouchStartHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramTouchMoveHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramTouchEndHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramScrollHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramMouseWheelHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramWheelHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramKeyDownHandler:function(e,t){this.invokeDiagramEvents(e,t)},diagramKeyUpHandler:function(e,t){this.invokeDiagramEvents(e,t)},windowResizeHandler:function(e){var t=this;setTimeout((function(){t.invokeDiagramEvents(e,null,t.scrollDiagramID)}),800)},onRemoveWireEvents:function(e){var t=document.getElementById(e);t&&(sf.base.EventHandler.remove(t,"mousedown",this.diagramMouseDownHandler),sf.base.EventHandler.remove(t,"mousemove",this.diagramMouseMoveHandler),sf.base.EventHandler.remove(t,"mouseup",this.diagramMouseUpHandler),sf.base.EventHandler.remove(t,"mouseleave",this.diagramMouseLeaveHandler),sf.base.EventHandler.remove(t,"touchstart",this.diagramTouchStartHandler),sf.base.EventHandler.remove(t,"touchmove",this.diagramTouchMoveHandler),sf.base.EventHandler.remove(t,"touchend",this.diagramTouchEndHandler),sf.base.EventHandler.remove(t,"scroll",this.diagramScrollHandler),sf.base.EventHandler.remove(t,"mousewheel",this.diagramMouseWheelHandler),sf.base.EventHandler.remove(t,"wheel",this.diagramWheelHandler),sf.base.EventHandler.remove(t,"keydown",this.diagramKeyDownHandler),sf.base.EventHandler.remove(t,"keyup",this.diagramKeyUpHandler),window.removeEventListener("resize",this.windowResizeHandler.bind(this)))},resizeHandler:function(e){var t=this;setTimeout((function(){t.invokeDiagramEvents(e,null,t.scrollDiagramID)}),800)},invokeDiagramEvents:function(e,t,n,i){try{var r=void 0,a="diagram_editTextBoxDiv",o=this[""+a],d={};if("resize"===e.type){var h=document.getElementById(n);if(!h){if(document.getElementsByClassName("e-diagram").length>0){var c=document.getElementsByClassName("e-diagram").length;n=document.getElementsByClassName("e-diagram")[c-1].id+"_content",h=document.getElementById(n),n}if(!h)return}t=k[""+n]}if("mousedown"!==e.type&&"touchstart"!==e.type||(f=!0,"touchstart"===e.type&&(H=this.getTouches(e),S=s(e.target)&&!w&&!e.target.id.indexOf("_icon"),!function(e){var t=e;if(t)for(;null!==t.parentNode;){var n=t.classList;if(n.contains("e-diagram-userhandle-circle")||n.contains("e-diagram-userhandle-path"))return!0;t=t.parentNode}return!1}(e.target)?(s(e.target)||document.getElementsByClassName("e-diagram-helper").length>0)&&(x=!0,l=setTimeout((function(){!sf.base.Browser.isDevice&&x&&(x=!1)}),300)):e.preventDefault())),"touchmove"===e.type&&l&&clearTimeout(l),("mouseup"===e.type||"touchend"===e.type||"mouseleave"===e.type)&&(f=!1,"touchend"===e.type)){var g=(new Date).getTime()-E;I=g<300&&g>0,E=(new Date).getTime(),l&&clearTimeout(l),e.cancelable&&(x||sf.base.Browser.isDevice&&(s(e.target)||document.getElementsByClassName("e-diagram-helper").length>0))&&e.preventDefault()}if("Escape"!==e.key&&("mousedown"!==e.type&&"touchstart"!==e.type||"diagram_editBox"===e.target.id)||!o||(window.isEscape="Escape"===e.key,r=this.endEdit(e,this),this[""+a]=o=document.getElementById("diagram_editTextBoxDiv"),e.currentTarget.focus()),d=this.getMouseEvents(e,n,i),"Escape"===e.key){var b=document.getElementById("helperElement");b&&(sf.base.remove(b),b.remove())}if("mousewheel"!==e.type&&"wheel"!==e.type||!e.ctrlKey){if(!o&&(("mousemove"===e.type||"touchmove"===e.type)&&!u||"mousemove"!==e.type&&"touchmove"!==e.type||!v))if(("mousemove"===e.type||"touchmove"===e.type&&!y)&&f&&!sf.base.Browser.isDevice&&w&&(u=!0,d.isPan=!0),i)t.invokeMethodAsync("InvokeDiagramEvents",d);else if("keydown"===e.type||"keyup"===e.type||"scroll"!==e.type||"scroll"===e.type&&!y)if("mousewheel"===e.type||"wheel"===e.type)if(t.invokeMethodAsync("InvokeDiagramEvents",d,r),e.shiftKey){var B=e.currentTarget.scrollWidth>e.currentTarget.clientWidth,A=0===e.currentTarget.scrollLeft,T=e.currentTarget.scrollLeft===e.currentTarget.scrollWidth-e.currentTarget.clientWidth;A&&e.wheelDelta>0||T&&e.wheelDelta<0||!B||e.preventDefault()}else{var C=e.currentTarget.scrollHeight>e.currentTarget.clientHeight,D=0===e.currentTarget.scrollTop,M=e.currentTarget.scrollTop===e.currentTarget.scrollHeight-e.currentTarget.clientHeight;D&&e.wheelDelta>0||M&&e.wheelDelta<0||!C||e.preventDefault()}else"touchmove"===e.type?(S||(d.type="scroll"),t.invokeMethodAsync("InvokeDiagramEvents",d,r)):"scroll"!==e.type||"scroll"===e.type&&!p?(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&(e.target.id&&e.target.id.indexOf("_icon")||H.length>1&&e.touches.length>1||!w||"touchstart"!==e.type&&"touchmove"!==e.type&&"touchend"!==e.type&&"mousedown"!==e.type&&"mousemove"!==e.type&&"mouseup"!==e.type||!w))&&t.invokeMethodAsync("InvokeDiagramEvents",d,r):"scroll"===e.type&&p&&(p=!1)}else m?setTimeout((function(){m=!1,y=!1}),1e3):(m=!0,t.invokeMethodAsync("InvokeDiagramEvents",d,r));"mouseup"!==e.type&&"touchend"!==e.type||!e.currentTarget||!e.currentTarget.id||this[""+a]||this.isForeignObject(e.target)||e.currentTarget.focus(),"mouseup"!==e.type&&"touchend"!==e.type&&"mouseleave"!==e.type||(S=!1,H=[])}catch(e){throw console.log("An unexpected error occurred:",e),e}},isForeignObject:function(e,t){var n=e;if(n)for(;null!==n.parentNode;){if("string"==typeof n.className&&(!t&&-1!==n.className.indexOf("foreign-object")||t&&-1!==n.className.indexOf("e-diagram-text-edit")))return n;n=n.parentNode}return null},getTouches:function(e){var t=[];if(e&&e.touches&&e.touches.length>0)for(var n=0;n<e.touches.length;n++)t.push({pageX:e.touches[parseInt(n.toString(),10)].pageX,pageY:e.touches[parseInt(n.toString(),10)].pageY,screenX:e.touches[parseInt(n.toString(),10)].screenX,screenY:e.touches[parseInt(n.toString(),10)].screenY,clientX:e.touches[parseInt(n.toString(),10)].clientX,clientY:e.touches[parseInt(n.toString(),10)].clientY});return t},getMouseEvents:function(e,t,n){var i={};if(-1!==e.type.indexOf("touch")?((i={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:I?2:1,metaKey:e.metaKey,type:e.type}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(i.clientX=i.offsetX=e.changedTouches[0].clientX,i.clientY=i.offsetY=e.changedTouches[0].clientY),n&&"out"===n.name&&(i.type="mouseleave"),"touchmove"===e.type&&e.cancelable&&(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&(H.length>1&&e.touches.length>1||(b||S||s(e.target))&&!w))&&(S=!0,e.preventDefault())):i={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button},t&&"resize"===e.type){var r=this.measureScrollValues(t),o=document.getElementById(t);i.diagramCanvasScrollBounds=r,i.diagramGetBoundingClientRect=o.getBoundingClientRect()}else if(n){if(n.target.id&&""!==n.target.id){var l=a(n.target,"e-diagram");if(l&&l.id&&""!==l.id){var d=l.id;r=this.measureScrollValues(d);i.diagramCanvasScrollBounds=r,i.diagramGetBoundingClientRect=document.getElementById(d+"_content").getBoundingClientRect()}}}else if(e.currentTarget&&e.currentTarget.id){r=this.measureScrollValues(e.currentTarget.id);i.diagramCanvasScrollBounds=r,i.diagramGetBoundingClientRect=e.currentTarget.getBoundingClientRect()}else if(e.target){r=this.measureScrollValues(e.target.id);i.diagramCanvasScrollBounds=r,i.diagramGetBoundingClientRect=e.target.getBoundingClientRect()}return"mousewheel"!==e.type&&"wheel"!==e.type||(e.ctrlKey&&e.preventDefault(),i.wheelDelta=e.wheelDelta,y=!0),"touchmove"===e.type&&e.touches.length>1&&(y=!0),"mousedown"!==e.type&&"touchstart"!==e.type||(v=!0),"mouseup"!==e.type&&"touchend"!==e.type||(v=!1),t||this.isForeignObject(e.target,!0)||"mousemove"!==e.type&&"mouseleave"!==e.type&&"mouseup"!==e.type&&(this.isForeignObject(e.target)||"mousedown"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type)&&(!this.isForeignObject(e.target)||"mousedown"!==e.type||"keydown"!==e.type||"keyup"!==e.type)||y||e.preventDefault(),i},initialiseModule:function(e,t,n){return c(this,void 0,void 0,(function(){var i,r,a,o=this;return g(this,(function(s){try{"symbolPaletteInstance",window.symbolPaletteInstance?(i={id:e.children[1].id,componentInstance:t,allowDrag:n},window.symbolPaletteInstance.push(i)):(i={id:e.children[1].id,componentInstance:t,allowDrag:n},window.symbolPaletteInstance=[],window.symbolPaletteInstance.push(i)),r=document.getElementById(e.children[1].id+"textEnter"),(a=document.getElementById(e.children[1].id+"iconSearch"))&&sf.base.EventHandler.add(a,"click",(function(e){return o.symbolSearchClickHandler(e,t)})),r&&(sf.base.EventHandler.add(r,"input",(function(e){return o.textElementInputHandler(e,t)})),sf.base.EventHandler.add(r,"keyup",(function(e){return o.textElementKeyupHandler(e,t)}))),sf.base.EventHandler.add(e,"mousedown",(function(e){return o.elementMouseDownHandler(e,t,r)})),sf.base.EventHandler.add(e,"mousemove",(function(e){return o.elementMouseMoveHandler(e,t)})),sf.base.EventHandler.add(e,"mouseup",(function(e){return o.elementMouseUpHandler(e,t)})),sf.base.EventHandler.add(e,"mouseleave",(function(e){return o.elementMouseLeaveHandler(e,t)})),sf.base.EventHandler.add(e,"touchstart",(function(e){return o.elementTouchStartHandler(e,t)})),sf.base.EventHandler.add(e,"touchmove",(function(e){return o.elementTouchMoveHandler(e,t)})),sf.base.EventHandler.add(e,"touchend",(function(e){return o.elementTouchEndHandler(e,t)})),setTimeout((function(){this.symbolPaletteDragAndDropModule=new h(e,window.symbolPaletteInstance)}),100)}catch(e){throw console.log("An unexpected error occurred:",e),e}return[2]}))}))},symbolSearchClickHandler:function(e,t){this.invokePaletteEvents(e,t)},textElementInputHandler:function(e,t){this.invokePaletteEvents(e,t)},textElementKeyupHandler:function(e,t){this.invokePaletteEvents(e,t)},elementMouseDownHandler:function(e,t,n){-1!==navigator.userAgent.indexOf("Mac")&&n&&e.target.id!==n.id&&e.preventDefault(),this.invokePaletteEvents(e,t)},elementMouseMoveHandler:function(e,t){-1!==navigator.userAgent.indexOf("Mac")&&e.preventDefault(),this.invokePaletteEvents(e,t)},elementMouseUpHandler:function(e,t){this.invokePaletteEvents(e,t)},elementMouseLeaveHandler:function(e,t){this.invokePaletteEvents(e,t)},elementTouchStartHandler:function(e,t){-1!==navigator.userAgent.indexOf("Mac")&&e.preventDefault(),this.invokePaletteEvents(e,t)},elementTouchMoveHandler:function(e,t){-1!==navigator.userAgent.indexOf("Mac")&&e.preventDefault(),this.invokePaletteEvents(e,t)},elementTouchEndHandler:function(e,t){this.invokePaletteEvents(e,t)},removeSymbolPaletteEvents:function(e){var t=e.children[1].id;document.getElementById(t+"textEnter"),document.getElementById(t+"iconSearch");this.symbolsearch&&sf.base.EventHandler.remove(this.symbolsearch,"click",this.symbolSearchClickHandler),this.textElement&&(sf.base.EventHandler.remove(this.textElement,"input",this.textElementInputHandler),sf.base.EventHandler.remove(this.textElement,"keyup",this.textElementKeyupHandler)),this.element&&(sf.base.EventHandler.remove(this.element,"mousedown",this.elementMouseDownHandler),sf.base.EventHandler.remove(this.element,"mousemove",this.elementMouseMoveHandler),sf.base.EventHandler.remove(this.element,"mouseup",this.elementMouseUpHandler),sf.base.EventHandler.remove(this.element,"mouseleave",this.elementMouseLeaveHandler),sf.base.EventHandler.remove(this.element,"touchstart",this.elementTouchStartHandler),sf.base.EventHandler.remove(this.element,"touchmove",this.elementTouchMoveHandler),sf.base.EventHandler.remove(this.element,"touchend",this.elementTouchEndHandler))},invokePaletteEvents:function(e,t){var n,i,r=window.symbolPaletteInstance,l=null,d=null;"touchstart"!==e.type&&"touchend"!==e.type&&e.target&&a(e.target,"e-acrdn-header")&&e.preventDefault(),"touchstart"===e.type&&(B=s(e.target)),"touchend"===e.type&&(B=!1);var h=this.palettegetMouseEvents(e);if(n=2===e.target.id.split("_").length?e.target.id.split("_")[0]:function(e,t,n){for(var i,r=e;r&&!o(r,n);){if(r.id&&-1!==r.id.indexOf(t)){i=r.id.split(t)[0];break}r=r.parentNode}return i}(e.target,"_Container","e-symbolpalette"),"keyup"===e.type||"click"===e.type||"input"===e.type){for(var c=0;c<(r||[]).length;c++){var g=r[parseInt(c.toString(),10)],m=e.target&&e.target.id&&e.target.id.includes("iconSearch")?"iconSearch":"textEnter";if(e.target&&g.id===e.target.id.split(m)[0]){i=g;break}}if(i&&i.id){var p=i.id;l=document.getElementById(p+"textEnter"),d=document.getElementById(p+"iconSearch")}"input"!==e.type&&"Escape"!==e.key||this.resetSearchIcon(d),"Enter"!==e.key&&"NumpadEnter"!==e.key||!l||""===l.value?"Backspace"!==e.key&&"Delete"!==e.key||!l||""===l.value||this.resetSearchIcon(d):this.toggleSearchIcon(d),"Escape"===e.key&&l&&(l.value=""),l&&(n=l.value)}if("mousemove"===e.type&&!u||"mousemove"!==e.type||!v)if(this.updateSymbolPaletteItemColor(e,"e-symbol-draggable","e-symbol-hover","e-symbol-selected"),"touchmove"===e.type&&n&&B||"touchmove"!==e.type)t.invokeMethodAsync("InvokePaletteEvents",h,n,"keyup"===h.type?d.classList.toString():"");else{var f=document.getElementById("previewID");f&&f.parentNode&&f.parentNode.removeChild(f)}"mousedown"===e.type&&this.updateSymbolPaletteItemColor(e,"e-symbol-draggable","e-symbol-hover","e-symbol-selected")},resetSearchIcon:function(e){e.classList.remove("e-close"),e.classList.add("e-search"),e.title="Start Search"},toggleSearchIcon:function(e){e.classList.contains("e-close")?this.resetSearchIcon(e):e.classList.contains("e-search")&&(e.classList.remove("e-search"),e.classList.add("e-close"),e.title="Clear text")},updateSymbolPaletteItemColor:function(e,t,n,i){if(e&&e.target&&e.type){var r=document.getElementById(e.target.id);if(r)if(Array.from(r.classList).find((function(e){return e===t}))){var a=e.target,o="mousemove"===e.type?n:i;a.classList.add(o);var s=document.getElementsByClassName(o);s&&0!==s.length&&Array.from(s).forEach((function(e){a!==e&&e.classList.remove(o)}))}}},palettegetMouseEvents:function(e){var t={};return-1!==e.type.indexOf("touch")?((t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,type:e.type,key:e.key,keyCode:e.keyCode}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(t.offsetX=e.changedTouches[0].clientX,t.offsetY=e.changedTouches[0].clientY),"touchmove"===e.type&&(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&(B||s(e.target)))&&(B=!0,e.preventDefault())):t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode},t},exportDiagram:function(t,n,i,r,a,o,s,l){return c(this,void 0,void 0,(function(){var d,h,c,u,m,p,v,f=this;return g(this,(function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),d="data",h=t.margin||{},t.region=t&&0===t.region?"PageSettings":1===t.region?"Content":"ClipBounds",t.fileName=o,t.mode=l?"Download":"Data",t.format=0===s?"JPEG":1===s?"PNG":2===s?"SVG":s,t.orientation=t&&0===t.orientation?"Landscape":"Portrait",c=i,u=new e(i.x,i.y,i.width,i.height),(m=t.clipBounds)&&(c.x=m.x?m.x:c.x,c.y=m.y?m.y:c.y,c.width=m.width||c.width,c.height=m.height||c.height),h={top:h.top,bottom:h.bottom,right:h.right,left:h.left},p=t.fileName||"diagram",[4,this.setCanvas(t,c,u,h,p,r,n)];case 1:return d=g.sent(),[2,new Promise((function(e,i){if(null!==d)if(a)e(d);else if("Data"===t.mode&&"SVG"===t.format)e(d);else{var o={id:n+"_ExportImage",src:d};t.margin={top:0,bottom:0,right:0,left:0};var s=f.createHtmlElement("img",o);s.onload=function(){var i=f.getMultipleImage(s,t,n,!0,r);e(JSON.stringify(i))}}}))];case 2:throw v=g.sent(),console.log("An unexpected error occurred:",v),v;case 3:return[2]}}))}))},setCanvas:function(t,n,i,r,a,o,s){return c(this,void 0,void 0,(function(){var l,d,h,c,u;return g(this,(function(g){switch(g.label){case 0:return t.clipBounds=n,d=new e(i.x,i.y,i.width,i.height),"scaleX","scaleY","scaleOffsetX","scaleOffsetY",h=new e(n.x,n.y,n.width,n.height),this.setScaleValueforCanvas(t,n,o),[4,this.exportAsImage({clipBounds:n,margin:r,region:t.region,scaleX:t.scaleX,scaleY:t.scaleY,scaleOffsetX:t.scaleOffsetX,scaleOffsetY:t.scaleOffsetY},a,s,t,d,h,o,"Download"===t.mode)];case 1:return c=g.sent(),"SVG"!==t.format&&(u=l="JPEG"===t.format?c.toDataURL("image/jpeg"):"PNG"===t.format?c.toDataURL("image/png"):"BMP"===t.format?c.toDataURL("image/bmp"):c.toDataURL()),"Data"===t.mode?"SVG"===t.format?[2,c]:[2,l]:(this.canvasMultiplePage(t,c,r,u,a),[2,null])}}))}))},exportAsImage:function(e,t,n,i,r,a,o,s){return c(this,void 0,void 0,(function(){var l;return g(this,(function(d){switch(d.label){case 0:return[4,this.imageExport(e,t,n,i,r,a,o,s)];case 1:return(l=d.sent())instanceof Promise?(l.then((function(e){return e})),[2,l]):[2,l]}}))}))},imageExport:function(e,t,n,i,r,a,o,s){return c(this,void 0,void 0,(function(){var s=this;return g(this,(function(l){return[2,new Promise((function(l,d){var h,c=e.clipBounds,g=e.margin,u=r.x,m=r.y,p=r.width,v=r.height,f=document.createElementNS("http://www.w3.org/2000/svg","svg");h="SVG"===i.format&&"ClipBounds"!==i.region?{x:String(a.x),y:String(a.y),width:String(a.width+g.right),height:String(a.height+g.bottom)}:{x:String(a.x),y:String(a.y),width:String(a.width),height:String(a.height)},"SVG"===i.format&&f.setAttribute("transform","translate("+g.left+", "+g.top+")"),s.setAttributeSvg(f,h),h={x:String(u),y:String(m),width:String(p+g.left+g.right),height:String(v+g.top+g.bottom)};var y,w,b=document.getElementById(n+"_backgroundLayer_svg").cloneNode(!0),S=document.getElementById(n+"_diagramLayer_svg").cloneNode(!0);if(b){for(var x=0;x<b.childNodes.length;x++){if((H=b.childNodes[parseInt(x.toString(),10)]).id===n+"_backgroundImageLayer"&&(w=!0),H.id===n+"_backgroundLayer"){y=H;for(var E=H.childNodes.length-1;E>=0;E--){(I=H.childNodes[parseInt(E.toString(),10)]).id!==n+"_backgroundLayerrect"&&H.removeChild(I)}}}if(y&&b.removeChild(y),"PageSettings"!==i.region&&s.setAttributeSvg(b,h),f.appendChild(b),y){for(E=y.childNodes.length-1;E>=0;E--){var I=y.childNodes[parseInt(E.toString(),10)];w||I.setAttribute("fill","transparent"===o.background.background?"white":o.background.background)}f.appendChild(y)}if("PageSettings"!==i.region){s.setTransform(b,a);for(x=0;x<b.childNodes.length;x++){(H=b.childNodes[parseInt(x.toString(),10)]).id!==n+"_backgroundImageLayer"&&H.id!==n+"_backgroundLayer"||s.setTransform(H,a)}}}f.appendChild(S);for(x=0;x<S.childNodes.length;x++){var H;(H=S.childNodes[parseInt(x.toString(),10)]).id===n+"_diagramlayer"&&s.setTransform(H,a)}var B=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(f)],{type:"image/svg+xml"}));if("SVG"===i.format){var k=void 0;"Data"===i.mode&&"SVG"===i.format&&(k=(new window.XMLSerializer).serializeToString(f),l(k));var A=[],T=(new window.XMLSerializer).serializeToString(f);A.push(T);var C=0,D=void 0;if("Download"===i.mode)for(C=0;C<A.length;C++)D=new Blob([A[parseInt(C.toString(),10)]],{type:"application/octet-stream"}),"msie"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(D,t+".svg"):s.triggerDownload("SVG",t,B)}else{var M=document.createElement("canvas"),N=M.getContext("2d"),P=new Image;P.onload=function(){M.height="Content"===e.region?P.height:c.height,M.width="Content"===e.region?P.width:c.width,o.background.imageSource?N.fillStyle="transparent":N.fillStyle="transparent"===o.background.background?"white":o.background.background,N.fillRect(0,0,M.width,M.height),i.fitToPage?N.drawImage(P,g.left,g.top,M.width-(g.left+g.right),M.height-(g.top+g.bottom)):N.drawImage(P,0,0,M.width,M.height),window.URL.revokeObjectURL(B),l(M)},P.src=B}}))]}))}))},triggerDownload:function(e,t,n){var i=document.createElement("a");i.download=t+"."+e.toLocaleLowerCase(),i.href=n,i.click()},canvasMultiplePage:function(e,t,n,i,r){var a=this,o=[],s=i.substring(i.indexOf(":")+1,i.indexOf(";")),l=s.substring(s.indexOf("/")+1),d=(l="jpeg"===l?void 0:l.toUpperCase())||"JPG";if(e.fitToPage)o=[i],this.exportImage(o,r,d,i);else{if(e.pageHeight=e.pageHeight?e.pageHeight:(void 0).height,e.pageWidth=e.pageWidth?e.pageWidth:(void 0).width,e.pageHeight=e.pageHeight?e.pageHeight:t.width,e.pageWidth=e.pageWidth?e.pageWidth:t.height,n=e.margin||{},e.orientation&&("Landscape"===e.orientation&&e.pageHeight>e.pageWidth||"Portrait"===e.orientation&&e.pageWidth>e.pageHeight)){var h=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=h}e.margin={top:isNaN(n.top)?0:n.top,bottom:isNaN(n.bottom)?0:n.bottom,left:isNaN(n.left)?0:n.left,right:isNaN(n.right)?0:n.right};var c={id:void 0+"_printImage",src:i},g=this.createHtmlElement("img",c);g.onload=function(){o=a.getMultipleImage(g,e,!0),a.exportImage(o,r,d,i)}}},exportImage:function(e,t,n,i){for(var r=[],a=e instanceof HTMLElement?0:e.length,o=0;o<a;o++){for(var s=e[parseInt(o.toString(),10)].replace(/^data:[a-z]*;,/,"").split(","),l=atob(s[1]),d=new ArrayBuffer(l.length),h=new Uint8Array(d),c=0;c<l.length;c++)h[parseInt(c.toString(),10)]=l.charCodeAt(c);r.push(d)}for(var g=0;g<r.length;g++){var u=new Blob([r[parseInt(g.toString(),10)]],{type:"application/octet-stream"});if("msie"===sf.base.Browser.info.name)window.navigator.msSaveOrOpenBlob(u,t+"."+n);else{var m=window.URL.createObjectURL(u),p=document.createElement("a");p.download=t+"."+n.toLocaleLowerCase(),p.href=m,p.click()}}},setScaleValueforCanvas:function(e,t,n){e.scaleX=1,e.scaleY=1,e.scaleOffsetX=0,e.scaleOffsetY=0,e.pageHeight=e.pageHeight||n.height,e.pageWidth=e.pageWidth||n.width;var i=e.orientation||n.orientation;if(i||(i="Portrait"),"Portrait"===i){if(e.pageWidth>e.pageHeight){var r=e.pageHeight;e.pageHeight=e.pageWidth,e.pageWidth=r}}else if(e.pageHeight>e.pageWidth){r=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=r}e.pageWidth&&e.pageHeight&&e.fitToPage&&(e.stretch="Meet");var a=e.pageHeight||t.height,o=e.pageWidth||t.width;"Stretch"!==e.stretch&&"Meet"!==e.stretch&&"Slice"!==e.stretch||(e.scaleX=o/t.width,e.scaleY=a/t.height,"Meet"===e.stretch?(e.scaleX=e.scaleY=Math.min(e.scaleX,e.scaleY),e.scaleOffsetY=(e.pageHeight-t.height*e.scaleX)/2,e.scaleOffsetX=(e.pageWidth-t.width*e.scaleX)/2):"Slice"===e.stretch&&(e.scaleX=e.scaleY=Math.max(e.scaleX,e.scaleY)),t.width=o,t.height=a),t.x*=e.scaleX,t.y*=e.scaleY},setTransform:function(e,t){e.setAttribute("transform","translate("+-t.x+", "+-t.y+")")},getPrintCanvasStyle:function(e,n){var i=0,r=0,a=new t;if(i=e.width,r=e.height,(n.pageHeight||n.pageWidth)&&(r=n.pageHeight?n.pageHeight:r,i=n.pageWidth?n.pageWidth:i),n.orientation&&("Landscape"===n.orientation&&r>i||"Portrait"===n.orientation&&i>r)){var o=i;i=r,r=o}return a.height=r,a.width=i,a},getMultipleImage:function(e,t,n){var i=[],r=this.createHtmlElement("div",{}),a=this.getPrintCanvasStyle(e,t),o=t.margin,s=o.left,l=o.top,d=o.right,h=o.bottom,c=0,g=a.width+c,u=a.height+0,m=0,p=0;if(t&&!t.fitToPage){r.style.height="auto",r.style.width="auto";var v=e.height,f=e.width,y=0,w=0,b=void 0,S=0,x=0,E=void 0,I=void 0;do{do{S=a.width,x=a.height,m+a.width>=f&&(S=f-m),p+a.height>=v&&(x=v-p),(E=(I=this.createCanvas(void 0+"_multiplePrint",a.width,a.height)).getContext("2d")).fillStyle="white",E.fillRect(0,0,a.width,a.height),E.drawImage(e,c+m,0+p,S,x,s,l,S-d-s,x-h-l),m+a.width>=f&&(m-=m-f),b="PNG"===t.format?I.toDataURL("image/png"):"JPEG"===t.format?I.toDataURL("image/jpeg"):I.toDataURL(),E.restore(),m+=g,n?i.push(b):this.printImage(r,b,y+""+w,g+"px;",u+"px;"),y++}while(m<f);w++,y=c=m=0,p+a.height>=v&&(p-=p-v),p+=u}while(p<v)}else{var H=this.getPrintCanvasStyle(e,t),B=H.width,k=H.height;(E=(I=this.createCanvas(void 0+"_diagram",B,k)).getContext("2d")).drawImage(e,0+s,0+l,e.width-(d+s),e.height-(l+h),0+s,0+l,B-(d+s),k-(l+h));b="PNG"===t.format?I.toDataURL("image/png"):"JPEG"===t.format?I.toDataURL("image/jpeg"):I.toDataURL();E.restore(),n?i.push(b):this.printImage(r,b,0)}return n?i:r},printImage:function(e,t,n,i,a){var o={class:"e-diagram-print-page",style:"width:"+i+"height:"+a},s=this.createHtmlElement("img",o),l=this.createHtmlElement("div",o);r(s,o={id:void 0+"_multiplePrint_img"+n,style:"float:left",src:t}),l.appendChild(s),e.appendChild(l)},print:function(e,t,n,i){return c(this,void 0,void 0,(function(){var r,a,o;return g(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r={width:n.width,height:n.height},e.mode="Data",[4,this.exportDiagram(e,t,n,i,!0,void 0,void 0,!1)];case 1:return a=s.sent(),e.fitToPage&&(e.pageWidth=r.width,e.pageHeight=r.height),this.printImages(a,e),[2,a];case 2:throw o=s.sent(),console.log("An unexpected error occurred:",o),o;case 3:return[2]}}))}))},onBeforeWindowUnload:function(){d&&!d.closed&&(d.close(),window.removeEventListener("beforeunload",this.onBeforeWindowUnload))},onBeforePrintWindowUnload:function(){d&&(d.removeEventListener("beforeunload",this.onBeforePrintWindowUnload),window.removeEventListener("beforeunload",this.onBeforeWindowUnload))},printImages:function(e,t){var n=this,i={id:void 0+"_printImage",src:e};t.margin={top:0,bottom:0,right:0,left:0};var r=this.createHtmlElement("img",i);r.onload=function(){var e=n.getMultipleImage(r,t),i=window.open("");d=i,null!=i&&e instanceof HTMLElement&&(i.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),i.addEventListener("load",(function(e){setTimeout((function(){i.window.print()}),3e3)})),i.document.write("<center>"+e.innerHTML+"</center>"),i.document.close(),d.addEventListener("beforeunload",n.onBeforePrintWindowUnload),window.addEventListener("beforeunload",n.onBeforeWindowUnload))}},exportImages:function(e,t){var n=this,i=t&&t.region?t.region:"Content",a=t.margin||{};a={top:isNaN(a.top)?0:a.top,bottom:isNaN(a.bottom)?0:a.bottom,left:isNaN(a.left)?0:a.left,right:isNaN(a.right)?0:a.right};var o=this.getDiagramBounds(i,{});t.clipBounds&&(o.x=isNaN(t.clipBounds.x)?o.x:t.clipBounds.x,o.y=isNaN(t.clipBounds.y)?o.y:t.clipBounds.y,o.width=t.clipBounds.width||o.width,o.height=t.clipBounds.height||o.height);var s=document.createElement("img");r(s,{src:e}),s.onload=function(){var i=n.createCanvas(n.Diagram.id+"innerImage",o.width+(a.left+a.right),o.height+(a.top+a.bottom)),r=i.getContext("2d");if(r.fillStyle=n.diagram.pageSettings.background.color,r.fillRect(0,0,o.width+(a.left+a.right),o.height+(a.top+a.bottom)),r.drawImage(s,0,0,o.width,o.height,a.left,a.top,o.width,o.height),e=i.toDataURL(),t.printOptions)n.printImages(e,t);else{r.restore();var l=t.fileName||"diagram";n.canvasMultiplePage(t,i,a,e,l)}}},overviewModelBounds:function(){var e,t,n=document.getElementById("overview"),i=n.clientWidth,r=n.clientHeight,a=n.getBoundingClientRect(),o=window.screenX<0?-1*window.screenX:window.screenX,s=window.screenY<0?-1*window.screenY:window.screenY;if(0===i){var l=Math.floor(window.innerWidth-o-Math.floor(a.left));i=l>0?l:Math.floor(window.innerWidth)}if(0===r){var d=Math.floor(window.innerHeight-s-Math.floor(a.top));r=d>0?d:Math.floor(window.innerHeight)}return i>0&&(e=r),r>0&&(t=i),{height:e,width:t}},overviewMouseDownHandler:function(e,t){this.overviewMouseEventArgs(e,t)},overviewMouseUpHandler:function(e,t){this.overviewMouseEventArgs(e,t)},overviewMouseMoveHandler:function(e,t){this.overviewMouseEventArgs(e,t)},overviewMouseLeaveHandler:function(e,t){this.overviewMouseEventArgs(e,t)},overviewTouchStartHandler:function(e,t){this.overviewMouseEventArgs(e,t)},overviewTouchMoveHandler:function(e,t){this.overviewMouseEventArgs(e,t)},overviewTouchEndHandler:function(e,t){this.overviewMouseEventArgs(e,t)},invokeOverviewEvents:function(e){var t=this,n=document.getElementById("overview");n&&(sf.base.EventHandler.add(n,"mousedown",(function(n){return t.overviewMouseDownHandler(n,e)})),sf.base.EventHandler.add(n,"mouseup",(function(n){return t.overviewMouseUpHandler(n,e)})),sf.base.EventHandler.add(n,"mousemove",(function(n){return t.overviewMouseMoveHandler(n,e)})),sf.base.EventHandler.add(n,"mouseleave",(function(n){return t.overviewMouseLeaveHandler(n,e)})),sf.base.EventHandler.add(n,"touchstart",(function(n){return t.overviewTouchStartHandler(n,e)})),sf.base.EventHandler.add(n,"touchmove",(function(n){return t.overviewTouchMoveHandler(n,e)})),sf.base.EventHandler.add(n,"touchend",(function(n){return t.overviewTouchEndHandler(n,e)})))},unwireOverviewEvents:function(){var e=document.getElementById("overview");e&&(sf.base.EventHandler.remove(e,"mousedown",this.overviewMouseDownHandler.bind(this)),sf.base.EventHandler.remove(e,"mouseup",this.overviewMouseUpHandler.bind(this)),sf.base.EventHandler.remove(e,"mousemove",this.overviewMouseMoveHandler.bind(this)),sf.base.EventHandler.remove(e,"mouseleave",this.overviewMouseLeaveHandler.bind(this)),sf.base.EventHandler.remove(e,"touchstart",this.overviewTouchStartHandler.bind(this)),sf.base.EventHandler.remove(e,"touchmove",this.overviewTouchMoveHandler.bind(this)),sf.base.EventHandler.remove(e,"touchend",this.overviewTouchEndHandler.bind(this)))},diagramOverview:function(e,t,n,i,r){try{var a=document.getElementById(e+"_diagramLayer_svg").cloneNode(!0),o=document.createElementNS("http://www.w3.org/2000/svg","svg");i.scale=1;var s=document.getElementById(e).clientHeight,l=document.getElementById(e).clientWidth,d=Math.max(Number(t.width),l),h=Math.max(Number(t.height),s).toString(),c=d.toString();if(n>=1){var g="pointer-events: all;height:"+h+"px;width:"+c+"px;";sf.base.updateCSSText(a,g),a.children[0].setAttribute("transform","translate("+-t.x+","+-t.y+"),scale("+i.scale+")")}o.setAttribute("height",h),o.setAttribute("width",c),o.appendChild(a);var u=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(o)],{type:"image/svg+xml"})),m=document.getElementById("overview_diagramlayer"),p=m.getContext("2d"),v=new Image;v.onload=function(){p.fillStyle="transparent",p.setTransform(1,0,0,1,0,0),p.clearRect(0,0,m.width,m.height),p.setTransform(r,0,0,r,0,0),p.drawImage(v,0,0),window.URL.revokeObjectURL(u)},v.src=u;for(var f=document.getElementById(e+"_htmlLayer_div").cloneNode(!0),y=document.getElementById("overview_htmllayer_div");y.firstChild;)y.firstChild.remove();for(var w=0;w<f.children.length;w++){var b=f.children[parseInt(w.toString(),10)].cloneNode(!0);y.appendChild(b)}}catch(e){throw console.log("An unexpected error occurred:",e),e}},overviewMouseEventArgs:function(e,t){try{var n=document.getElementById("overview"),i={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button,targetId:e.target.id,overviewGetBoundingClientRect:n.getBoundingClientRect(),targetCssClass:e.target.classList.value,touches:this.getTouches(e),offsetLeft:n.offsetLeft,offsetTop:n.offsetTop};t.invokeMethodAsync("InvokeOverviewEvents",i)}catch(e){throw console.log("An unexpected error occurred:",e),e}}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js`).then(()=>{sfBlazor.loadDependencies('sfdiagramcomponent');})})();