<div class="profile-image-container">
    @if (string.IsNullOrWhiteSpace(ImageUrl))
    {
        <MudSkeleton SkeletonType="MudBlazor.SkeletonType.Rectangle" Height="100px" />
    }
    else
    {
        <img src="@ImageUrl"
             alt="@AltText"
             style="border-radius: @(ImageRadius)%;"
             class="profile-image" />
    }
</div>
<style>
    /*     .profile-image-container {
                    display: block;
                    margin: 0 auto;
                    text-align: center;
                    width: 64px;
                    height: 64px;
                }

                    .profile-image-container img {
                        width: 100%;
                        height: 100%;
                        border-radius: 50% !important;
                    } */
    .profile-image-container {
        display: block;
        margin: 0 auto;
        text-align: center;
        overflow: hidden;
    }

    .profile-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }
</style>

@* @code {
    [Parameter]
    public string ImageUrl { get; set; } = string.Empty;
    [Parameter]
    public int ImageRadius { get; set; } = 0;
    protected override void OnParametersSet()
    {
        if (ImageRadius > MaxAllowedValue)
        {
            ImageRadius = MaxAllowedValue;
        }
    }

    private const int MaxAllowedValue = 50;
} *@
@code
{
    private const int MaxAllowedRadius = 50;
    private const int DefaultSize = 64;
    private string DefaultImagePath = string.Empty;

    [Parameter]
    public string? ImageUrl { get; set; }

    [Parameter]
    public int ImageRadius { get; set; }

    [Parameter]
    public int Size { get; set; }

    [Parameter]
    public string AltText { get; set; } = "Image";

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        // Clamp radius between 0 and max allowed
        if (ImageRadius != 0)
            ImageRadius = Math.Clamp(ImageRadius, 0, MaxAllowedRadius);

        // Ensure size is positive
        if (Size <= 0)
        {
            Size = DefaultSize;
        }
    }

    private string GetImageSource()
    {
        return string.IsNullOrWhiteSpace(ImageUrl) ? DefaultImagePath : ImageUrl;
    }
}